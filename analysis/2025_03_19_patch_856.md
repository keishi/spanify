# Build Failure: 2025_03_19_patch_856

## Chromium Revision

`ae47ae4e0c13026d1824b4cf4b9cea834dfd0cf4`

## Code Changes (Diff)

```diff
diff --git a/gpu/command_buffer/client/gles2_implementation.cc b/gpu/command_buffer/client/gles2_implementation.cc
index c41a5020fb159..501f4c74a10d0 100644
--- a/gpu/command_buffer/client/gles2_implementation.cc
+++ b/gpu/command_buffer/client/gles2_implementation.cc
@@ -2009,7 +2009,7 @@ bool GLES2Implementation::GetProgramResourceNameHelper(GLuint program,
                                                        GLuint index,
                                                        GLsizei bufsize,
                                                        GLsizei* length,
-                                                       char* name) {
+                                                       base::span<char> name) {
   DCHECK_LE(0, bufsize);
   // Clear the bucket so if the command fails nothing will be in it.
   helper_->SetBucketSize(kResultBucketId, 0);
@@ -2044,12 +2044,12 @@ void GLES2Implementation::GetProgramResourceName(GLuint program,
                                                  GLuint index,
                                                  GLsizei bufsize,
                                                  GLsizei* length,
-                                                 char* name) {
+                                                 base::span<char> name) {
   GPU_CLIENT_SINGLE_THREAD_CHECK();
   GPU_CLIENT_LOG("[" << GetLogPrefix() << "] glGetProgramResourceName("
                      << program << ", " << program_interface << ", " << index
                      << ", " << bufsize << ", " << static_cast<void*>(length)
-                     << ", " << static_cast<void*>(name) << ")");
+                     << ", " << static_cast<void*>(name.data()) << ")");
   if (bufsize < 0) {
     SetGLError(GL_INVALID_VALUE, "glGetProgramResourceName", "bufsize < 0");
     return;
@@ -2057,8 +2057,8 @@ void GLES2Implementation::GetProgramResourceName(GLuint program,
   TRACE_EVENT0("gpu", "GLES2::GetProgramResourceName");
   bool success = share_group_->program_info_manager()->GetProgramResourceName(
       this, program, program_interface, index, bufsize, length, name);
-  if (success && name) {
-    GPU_CLIENT_LOG("  name: " << name);
+  if (success && !name.empty()) {
+    GPU_CLIENT_LOG("  name: " << name.data());
   }
   CheckGLError();
 }
@@ -4004,10 +4004,10 @@ void GLES2Implementation::TexSubImage3DImpl(GLenum target,
 
 void GLES2Implementation::GetResultNameHelper(GLsizei bufsize,
                                               GLsizei* length,
-                                              char* name) {
+                                              base::span<char> name) {
   // Length of string (without final \0) that we will write to the buffer.
   GLsizei max_length = 0;
-  if (name && (bufsize > 0)) {
+  if (!name.empty() && (bufsize > 0)) {
     std::vector<int8_t> str;
     GetBucketContents(kResultBucketId, &str);
     if (!str.empty()) {
@@ -4015,7 +4015,7 @@ void GLES2Implementation::GetResultNameHelper(GLsizei bufsize,
       // Note: both bufsize and str.size() count/include the terminating \0.
       max_length = std::min(bufsize, static_cast<GLsizei>(str.size())) - 1;
     }
-    memcpy(name, str.data(), max_length);
+    memcpy(name.data(), str.data(), max_length);
     name[max_length] = '\0';
   }
   if (length) {
@@ -4029,7 +4029,7 @@ bool GLES2Implementation::GetActiveAttribHelper(GLuint program,
                                                 GLsizei* length,
                                                 GLint* size,
                                                 GLenum* type,
-                                                char* name) {
+                                                base::span<char> name) {
   // Clear the bucket so if the command fails nothing will be in it.
   helper_->SetBucketSize(kResultBucketId, 0);
   typedef cmds::GetActiveAttrib::Result Result;
@@ -4064,14 +4064,14 @@ void GLES2Implementation::GetActiveAttrib(GLuint program,
                                           GLsizei* length,
                                           GLint* size,
                                           GLenum* type,
-                                          char* name) {
+                                          base::span<char> name) {
   GPU_CLIENT_SINGLE_THREAD_CHECK();
   GPU_CLIENT_LOG("[" << GetLogPrefix() << "] glGetActiveAttrib(" << program
                      << ", " << index << ", " << bufsize << ", "
                      << static_cast<const void*>(length) << ", "
                      << static_cast<const void*>(size) << ", "
                      << static_cast<const void*>(type) << ", "
-                     << static_cast<const void*>(name) << ", ");
+                     << static_cast<const void*>(name.data()) << ", ");
   if (bufsize < 0) {
     SetGLError(GL_INVALID_VALUE, "glGetActiveAttrib", "bufsize < 0");
     return;
@@ -4086,8 +4086,8 @@ void GLES2Implementation::GetActiveAttrib(GLuint program,
     if (type) {
       GPU_CLIENT_LOG("  type: " << GLES2Util::GetStringEnum(*type));
     }
-    if (name) {
-      GPU_CLIENT_LOG("  name: " << name);
+    if (!name.empty()) {
+      GPU_CLIENT_LOG("  name: " << name.data());
     }
   }
   CheckGLError();
@@ -4099,7 +4099,7 @@ bool GLES2Implementation::GetActiveUniformHelper(GLuint program,
                                                  GLsizei* length,
                                                  GLint* size,
                                                  GLenum* type,
-                                                 char* name) {
+                                                 base::span<char> name) {
   // Clear the bucket so if the command fails nothing will be in it.
   helper_->SetBucketSize(kResultBucketId, 0);
   typedef cmds::GetActiveUniform::Result Result;
@@ -4134,14 +4134,14 @@ void GLES2Implementation::GetActiveUniform(GLuint program,
                                            GLsizei* length,
                                            GLint* size,
                                            GLenum* type,
-                                           char* name) {
+                                           base::span<char> name) {
   GPU_CLIENT_SINGLE_THREAD_CHECK();
   GPU_CLIENT_LOG("[" << GetLogPrefix() << "] glGetActiveUniform(" << program
                      << ", " << index << ", " << bufsize << ", "
                      << static_cast<const void*>(length) << ", "
                      << static_cast<const void*>(size) << ", "
                      << static_cast<const void*>(type) << ", "
-                     << static_cast<const void*>(name) << ", ");
+                     << static_cast<const void*>(name.data()) << ", ");
   if (bufsize < 0) {
     SetGLError(GL_INVALID_VALUE, "glGetActiveUniform", "bufsize < 0");
     return;
@@ -4156,18 +4156,19 @@ void GLES2Implementation::GetActiveUniform(GLuint program,
     if (type) {
       GPU_CLIENT_LOG("  type: " << GLES2Util::GetStringEnum(*type));
     }
-    if (name) {
-      GPU_CLIENT_LOG("  name: " << name);
+    if (!name.empty()) {
+      GPU_CLIENT_LOG("  name: " << name.data());
     }
   }
   CheckGLError();
 }
 
-bool GLES2Implementation::GetActiveUniformBlockNameHelper(GLuint program,
-                                                          GLuint index,
-                                                          GLsizei bufsize,
-                                                          GLsizei* length,
-                                                          char* name) {
+bool GLES2Implementation::GetActiveUniformBlockNameHelper(
+    GLuint program,
+    GLuint index,
+    GLsizei bufsize,
+    GLsizei* length,
+    base::span<char> name) {
   DCHECK_LE(0, bufsize);
   // Clear the bucket so if the command fails nothing will be in it.
   helper_->SetBucketSize(kResultBucketId, 0);
@@ -4195,12 +4196,12 @@ void GLES2Implementation::GetActiveUniformBlockName(GLuint program,
                                                     GLuint index,
                                                     GLsizei bufsize,
                                                     GLsizei* length,
-                                                    char* name) {
+                                                    base::span<char> name) {
   GPU_CLIENT_SINGLE_THREAD_CHECK();
   GPU_CLIENT_LOG("[" << GetLogPrefix() << "] glGetActiveUniformBlockName("
                      << program << ", " << index << ", " << bufsize << ", "
                      << static_cast<const void*>(length) << ", "
-                     << static_cast<const void*>(name) << ")");
+                     << static_cast<const void*>(name.data()) << ")");
   if (bufsize < 0) {
     SetGLError(GL_INVALID_VALUE, "glGetActiveUniformBlockName", "bufsize < 0");
     return;
@@ -4210,8 +4211,8 @@ void GLES2Implementation::GetActiveUniformBlockName(GLuint program,
       share_group_->program_info_manager()->GetActiveUniformBlockName(
           this, program, index, bufsize, length, name);
   if (success) {
-    if (name) {
-      GPU_CLIENT_LOG("  name: " << name);
+    if (!name.empty()) {
+      GPU_CLIENT_LOG("  name: " << name.data());
     }
   }
   CheckGLError();
@@ -4507,13 +4508,14 @@ const GLubyte* GLES2Implementation::GetStringi(GLenum name, GLuint index) {
   return reinterpret_cast<const GLubyte*>(result);
 }
 
-bool GLES2Implementation::GetTransformFeedbackVaryingHelper(GLuint program,
-                                                            GLuint index,
-                                                            GLsizei bufsize,
-                                                            GLsizei* length,
-                                                            GLint* size,
-                                                            GLenum* type,
-                                                            char* name) {
+bool GLES2Implementation::GetTransformFeedbackVaryingHelper(
+    GLuint program,
+    GLuint index,
+    GLsizei bufsize,
+    GLsizei* length,
+    GLint* size,
+    GLenum* type,
+    base::span<char> name) {
   // Clear the bucket so if the command fails nothing will be in it.
   helper_->SetBucketSize(kResultBucketId, 0);
   typedef cmds::GetTransformFeedbackVarying::Result Result;
@@ -4547,14 +4549,14 @@ void GLES2Implementation::GetTransformFeedbackVarying(GLuint program,
                                                       GLsizei* length,
                                                       GLint* size,
                                                       GLenum* type,
-                                                      char* name) {
+                                                      base::span<char> name) {
   GPU_CLIENT_SINGLE_THREAD_CHECK();
   GPU_CLIENT_LOG("[" << GetLogPrefix() << "] glGetTransformFeedbackVarying("
                      << program << ", " << index << ", " << bufsize << ", "
                      << static_cast<const void*>(length) << ", "
                      << static_cast<const void*>(size) << ", "
                      << static_cast<const void*>(type) << ", "
-                     << static_cast<const void*>(name) << ", ");
+                     << static_cast<const void*>(name.data()) << ", ");
   if (bufsize < 0) {
     SetGLError(GL_INVALID_VALUE, "glGetTransformFeedbackVarying",
                "bufsize < 0");
@@ -4571,8 +4573,8 @@ void GLES2Implementation::GetTransformFeedbackVarying(GLuint program,
     if (type) {
       GPU_CLIENT_LOG("  type: " << GLES2Util::GetStringEnum(*type));
     }
-    if (name) {
-      GPU_CLIENT_LOG("  name: " << name);
+    if (!name.empty()) {
+      GPU_CLIENT_LOG("  name: " << name.data());
     }
   }
   CheckGLError();
diff --git a/gpu/command_buffer/client/gles2_implementation.h b/gpu/command_buffer/client/gles2_implementation.h
index 22a68333102b9..b066edbe76cf0 100644
--- a/gpu/command_buffer/client/gles2_implementation.h
+++ b/gpu/command_buffer/client/gles2_implementation.h
@@ -20,6 +20,7 @@
 #include "base/compiler_specific.h"
 #include "base/containers/heap_array.h"
 #include "base/containers/queue.h"
+#include "base/containers/span.h"
 #include "base/memory/raw_ptr.h"
 #include "base/memory/weak_ptr.h"
 #include "base/trace_event/memory_dump_provider.h"
@@ -169,28 +170,44 @@ class GLES2_IMPL_EXPORT GLES2Implementation : public GLES2Interface,
   // buffsize. If length is !null, it receives the number of characters written
   // (excluding the final \0). This is a helper function for GetActive*Helper
   // functions that return names.
-  void GetResultNameHelper(GLsizei bufsize, GLsizei* length, char* name);
-  bool GetActiveAttribHelper(
-      GLuint program, GLuint index, GLsizei bufsize, GLsizei* length,
-      GLint* size, GLenum* type, char* name);
-  bool GetActiveUniformHelper(
-      GLuint program, GLuint index, GLsizei bufsize, GLsizei* length,
-      GLint* size, GLenum* type, char* name);
+  void GetResultNameHelper(GLsizei bufsize,
+                           GLsizei* length,
+                           base::span<char> name);
+  bool GetActiveAttribHelper(GLuint program,
+                             GLuint index,
+                             GLsizei bufsize,
+                             GLsizei* length,
+                             GLint* size,
+                             GLenum* type,
+                             base::span<char> name);
+  bool GetActiveUniformHelper(GLuint program,
+                              GLuint index,
+                              GLsizei bufsize,
+                              GLsizei* length,
+                              GLint* size,
+                              GLenum* type,
+                              base::span<char> name);
   void GetUniformBlocksCHROMIUMHelper(GLuint program,
                                       std::vector<int8_t>* result);
   void GetUniformsES3CHROMIUMHelper(GLuint program,
                                     std::vector<int8_t>* result);
   GLuint GetUniformBlockIndexHelper(GLuint program, const char* name);
-  bool GetActiveUniformBlockNameHelper(
-      GLuint program, GLuint index, GLsizei bufsize,
-      GLsizei* length, char* name);
+  bool GetActiveUniformBlockNameHelper(GLuint program,
+                                       GLuint index,
+                                       GLsizei bufsize,
+                                       GLsizei* length,
+                                       base::span<char> name);
   bool GetActiveUniformBlockivHelper(
       GLuint program, GLuint index, GLenum pname, GLint* params);
   void GetTransformFeedbackVaryingsCHROMIUMHelper(GLuint program,
                                                   std::vector<int8_t>* result);
-  bool GetTransformFeedbackVaryingHelper(
-      GLuint program, GLuint index, GLsizei bufsize, GLsizei* length,
-      GLint* size, GLenum* type, char* name);
+  bool GetTransformFeedbackVaryingHelper(GLuint program,
+                                         GLuint index,
+                                         GLsizei bufsize,
+                                         GLsizei* length,
+                                         GLint* size,
+                                         GLenum* type,
+                                         base::span<char> name);
   bool GetUniformIndicesHelper(
       GLuint program, GLsizei count, const char* const* names, GLuint* indices);
   bool GetActiveUniformsivHelper(
@@ -205,9 +222,12 @@ class GLES2_IMPL_EXPORT GLES2Implementation : public GLES2Interface,
       GLuint program, GLenum program_interface, GLenum pname, GLint* params);
   GLuint GetProgramResourceIndexHelper(
       GLuint program, GLenum program_interface, const char* name);
-  bool GetProgramResourceNameHelper(
-      GLuint program, GLenum program_interface, GLuint index, GLsizei bufsize,
-      GLsizei* length, char* name);
+  bool GetProgramResourceNameHelper(GLuint program,
+                                    GLenum program_interface,
+                                    GLuint index,
+                                    GLsizei bufsize,
+                                    GLsizei* length,
+                                    base::span<char> name);
   bool GetProgramResourceivHelper(
       GLuint program, GLenum program_interface, GLuint index,
       GLsizei prop_count, const GLenum* props, GLsizei bufsize, GLsizei* length,
diff --git a/gpu/command_buffer/client/gles2_implementation_autogen.h b/gpu/command_buffer/client/gles2_implementation_autogen.h
index 96601821fac4c..0e69879628db2 100644
--- a/gpu/command_buffer/client/gles2_implementation_autogen.h
+++ b/gpu/command_buffer/client/gles2_implementation_autogen.h
@@ -13,6 +13,8 @@
 #ifndef GPU_COMMAND_BUFFER_CLIENT_GLES2_IMPLEMENTATION_AUTOGEN_H_
 #define GPU_COMMAND_BUFFER_CLIENT_GLES2_IMPLEMENTATION_AUTOGEN_H_
 
+#include "base/containers/span.h"
+
 void ActiveTexture(GLenum texture) override;
 
 void AttachShader(GLuint program, GLuint shader) override;
@@ -280,7 +282,7 @@ void GetActiveAttrib(GLuint program,
                      GLsizei* length,
                      GLint* size,
                      GLenum* type,
-                     char* name) override;
+                     base::span<char> name) override;
 
 void GetActiveUniform(GLuint program,
                       GLuint index,
@@ -288,7 +290,7 @@ void GetActiveUniform(GLuint program,
                       GLsizei* length,
                       GLint* size,
                       GLenum* type,
-                      char* name) override;
+                      base::span<char> name) override;
 
 void GetActiveUniformBlockiv(GLuint program,
                              GLuint index,
@@ -299,7 +301,7 @@ void GetActiveUniformBlockName(GLuint program,
                                GLuint index,
                                GLsizei bufsize,
                                GLsizei* length,
-                               char* name) override;
+                               base::span<char> name) override;
 
 void GetActiveUniformsiv(GLuint program,
                          GLsizei count,
@@ -405,7 +407,7 @@ void GetTransformFeedbackVarying(GLuint program,
                                  GLsizei* length,
                                  GLsizei* size,
                                  GLenum* type,
-                                 char* name) override;
+                                 base::span<char> name) override;
 
 GLuint GetUniformBlockIndex(GLuint program, const char* name) override;
 
@@ -929,7 +931,7 @@ void GetProgramResourceName(GLuint program,
                             GLuint index,
                             GLsizei bufsize,
                             GLsizei* length,
-                            char* name) override;
+                            base::span<char> name) override;
 
 void GetProgramResourceiv(GLuint program,
                           GLenum program_interface,
diff --git a/gpu/command_buffer/client/gles2_interface_autogen.h b/gpu/command_buffer/client/gles2_interface_autogen.h
index 1440a0a97ce8c..cdaab8949ef49 100644
--- a/gpu/command_buffer/client/gles2_interface_autogen.h
+++ b/gpu/command_buffer/client/gles2_interface_autogen.h
@@ -13,6 +13,8 @@
 #ifndef GPU_COMMAND_BUFFER_CLIENT_GLES2_INTERFACE_AUTOGEN_H_
 #define GPU_COMMAND_BUFFER_CLIENT_GLES2_INTERFACE_AUTOGEN_H_
 
+#include "base/containers/span.h"
+
 virtual void ActiveTexture(GLenum texture) = 0;
 virtual void AttachShader(GLuint program, GLuint shader) = 0;
 virtual void BindAttribLocation(GLuint program,
@@ -207,14 +209,14 @@ virtual void GetActiveAttrib(GLuint program,
                              GLsizei* length,
                              GLint* size,
                              GLenum* type,
-                             char* name) = 0;
+                             base::span<char> name) = 0;
 virtual void GetActiveUniform(GLuint program,
                               GLuint index,
                               GLsizei bufsize,
                               GLsizei* length,
                               GLint* size,
                               GLenum* type,
-                              char* name) = 0;
+                              base::span<char> name) = 0;
 virtual void GetActiveUniformBlockiv(GLuint program,
                                      GLuint index,
                                      GLenum pname,
@@ -223,7 +225,7 @@ virtual void GetActiveUniformBlockName(GLuint program,
                                        GLuint index,
                                        GLsizei bufsize,
                                        GLsizei* length,
-                                       char* name) = 0;
+                                       base::span<char> name) = 0;
 virtual void GetActiveUniformsiv(GLuint program,
                                  GLsizei count,
                                  const GLuint* indices,
@@ -302,7 +304,7 @@ virtual void GetTransformFeedbackVarying(GLuint program,
                                          GLsizei* length,
                                          GLsizei* size,
                                          GLenum* type,
-                                         char* name) = 0;
+                                         base::span<char> name) = 0;
 virtual GLuint GetUniformBlockIndex(GLuint program, const char* name) = 0;
 virtual void GetUniformfv(GLuint program, GLint location, GLfloat* params) = 0;
 virtual void GetUniformiv(GLuint program, GLint location, GLint* params) = 0;
@@ -689,7 +691,7 @@ virtual void GetProgramResourceName(GLuint program,
                                     GLuint index,
                                     GLsizei bufsize,
                                     GLsizei* length,
-                                    char* name) = 0;
+                                    base::span<char> name) = 0;
 virtual void GetProgramResourceiv(GLuint program,
                                   GLenum program_interface,
                                   GLuint index,
diff --git a/gpu/command_buffer/client/gles2_interface_stub_autogen.h b/gpu/command_buffer/client/gles2_interface_stub_autogen.h
index 9e54dd9bea905..9d534f7189105 100644
--- a/gpu/command_buffer/client/gles2_interface_stub_autogen.h
+++ b/gpu/command_buffer/client/gles2_interface_stub_autogen.h
@@ -12,6 +12,8 @@
 #ifndef GPU_COMMAND_BUFFER_CLIENT_GLES2_INTERFACE_STUB_AUTOGEN_H_
 #define GPU_COMMAND_BUFFER_CLIENT_GLES2_INTERFACE_STUB_AUTOGEN_H_
 
+#include "base/containers/span.h"
+
 void ActiveTexture(GLenum texture) override;
 void AttachShader(GLuint program, GLuint shader) override;
 void BindAttribLocation(GLuint program,
@@ -204,14 +206,14 @@ void GetActiveAttrib(GLuint program,
                      GLsizei* length,
                      GLint* size,
                      GLenum* type,
-                     char* name) override;
+                     base::span<char> name) override;
 void GetActiveUniform(GLuint program,
                       GLuint index,
                       GLsizei bufsize,
                       GLsizei* length,
                       GLint* size,
                       GLenum* type,
-                      char* name) override;
+                      base::span<char> name) override;
 void GetActiveUniformBlockiv(GLuint program,
                              GLuint index,
                              GLenum pname,
@@ -220,7 +222,7 @@ void GetActiveUniformBlockName(GLuint program,
                                GLuint index,
                                GLsizei bufsize,
                                GLsizei* length,
-                               char* name) override;
+                               base::span<char> name) override;
 void GetActiveUniformsiv(GLuint program,
                          GLsizei count,
                          const GLuint* indices,
@@ -295,7 +297,7 @@ void GetTransformFeedbackVarying(GLuint program,
                                  GLsizei* length,
                                  GLsizei* size,
                                  GLenum* type,
-                                 char* name) override;
+                                 base::span<char> name) override;
 GLuint GetUniformBlockIndex(GLuint program, const char* name) override;
 void GetUniformfv(GLuint program, GLint location, GLfloat* params) override;
 void GetUniformiv(GLuint program, GLint location, GLint* params) override;
@@ -665,7 +667,7 @@ void GetProgramResourceName(GLuint program,
                             GLuint index,
                             GLsizei bufsize,
                             GLsizei* length,
-                            char* name) override;
+                            base::span<char> name) override;
 void GetProgramResourceiv(GLuint program,
                           GLenum program_interface,
                           GLuint index,
diff --git a/gpu/command_buffer/client/gles2_interface_stub_impl_autogen.h b/gpu/command_buffer/client/gles2_interface_stub_impl_autogen.h
index b470bec1e464e..41a6cd10cfed1 100644
--- a/gpu/command_buffer/client/gles2_interface_stub_impl_autogen.h
+++ b/gpu/command_buffer/client/gles2_interface_stub_impl_autogen.h
@@ -12,6 +12,8 @@
 #ifndef GPU_COMMAND_BUFFER_CLIENT_GLES2_INTERFACE_STUB_IMPL_AUTOGEN_H_
 #define GPU_COMMAND_BUFFER_CLIENT_GLES2_INTERFACE_STUB_IMPL_AUTOGEN_H_
 
+#include "base/containers/span.h"
+
 void GLES2InterfaceStub::ActiveTexture(GLenum /* texture */) {}
 void GLES2InterfaceStub::AttachShader(GLuint /* program */,
                                       GLuint /* shader */) {}
@@ -242,14 +244,14 @@ void GLES2InterfaceStub::GetActiveAttrib(GLuint /* program */,
                                          GLsizei* /* length */,
                                          GLint* /* size */,
                                          GLenum* /* type */,
-                                         char* /* name */) {}
+                                         base::span<char>) {}
 void GLES2InterfaceStub::GetActiveUniform(GLuint /* program */,
                                           GLuint /* index */,
                                           GLsizei /* bufsize */,
                                           GLsizei* /* length */,
                                           GLint* /* size */,
                                           GLenum* /* type */,
-                                          char* /* name */) {}
+                                          base::span<char>) {}
 void GLES2InterfaceStub::GetActiveUniformBlockiv(GLuint /* program */,
                                                  GLuint /* index */,
                                                  GLenum /* pname */,
@@ -258,7 +260,7 @@ void GLES2InterfaceStub::GetActiveUniformBlockName(GLuint /* program */,
                                                    GLuint /* index */,
                                                    GLsizei /* bufsize */,
                                                    GLsizei* /* length */,
-                                                   char* /* name */) {}
+                                                   base::span<char>) {}
 void GLES2InterfaceStub::GetActiveUniformsiv(GLuint /* program */,
                                              GLsizei /* count */,
                                              const GLuint* /* indices */,
@@ -365,7 +367,7 @@ void GLES2InterfaceStub::GetTransformFeedbackVarying(GLuint /* program */,
                                                      GLsizei* /* length */,
                                                      GLsizei* /* size */,
                                                      GLenum* /* type */,
-                                                     char* /* name */) {}
+                                                     base::span<char>) {}
 GLuint GLES2InterfaceStub::GetUniformBlockIndex(GLuint /* program */,
                                                 const char* /* name */) {
   return 0;
@@ -898,7 +900,7 @@ void GLES2InterfaceStub::GetProgramResourceName(GLuint /* program */,
                                                 GLuint /* index */,
                                                 GLsizei /* bufsize */,
                                                 GLsizei* /* length */,
-                                                char* /* name */) {}
+                                                base::span<char>) {}
 void GLES2InterfaceStub::GetProgramResourceiv(GLuint /* program */,
                                               GLenum /* program_interface */,
                                               GLuint /* index */,
diff --git a/gpu/command_buffer/client/gles2_trace_implementation_autogen.h b/gpu/command_buffer/client/gles2_trace_implementation_autogen.h
index 9f9b695b1946a..b0a0b2e0bd809 100644
--- a/gpu/command_buffer/client/gles2_trace_implementation_autogen.h
+++ b/gpu/command_buffer/client/gles2_trace_implementation_autogen.h
@@ -12,6 +12,8 @@
 #ifndef GPU_COMMAND_BUFFER_CLIENT_GLES2_TRACE_IMPLEMENTATION_AUTOGEN_H_
 #define GPU_COMMAND_BUFFER_CLIENT_GLES2_TRACE_IMPLEMENTATION_AUTOGEN_H_
 
+#include "base/containers/span.h"
+
 void ActiveTexture(GLenum texture) override;
 void AttachShader(GLuint program, GLuint shader) override;
 void BindAttribLocation(GLuint program,
@@ -204,14 +206,14 @@ void GetActiveAttrib(GLuint program,
                      GLsizei* length,
                      GLint* size,
                      GLenum* type,
-                     char* name) override;
+                     base::span<char> name) override;
 void GetActiveUniform(GLuint program,
                       GLuint index,
                       GLsizei bufsize,
                       GLsizei* length,
                       GLint* size,
                       GLenum* type,
-                      char* name) override;
+                      base::span<char> name) override;
 void GetActiveUniformBlockiv(GLuint program,
                              GLuint index,
                              GLenum pname,
@@ -220,7 +222,7 @@ void GetActiveUniformBlockName(GLuint program,
                                GLuint index,
                                GLsizei bufsize,
                                GLsizei* length,
-                               char* name) override;
+                               base::span<char> name) override;
 void GetActiveUniformsiv(GLuint program,
                          GLsizei count,
                          const GLuint* indices,
@@ -295,7 +297,7 @@ void GetTransformFeedbackVarying(GLuint program,
                                  GLsizei* length,
                                  GLsizei* size,
                                  GLenum* type,
-                                 char* name) override;
+                                 base::span<char> name) override;
 GLuint GetUniformBlockIndex(GLuint program, const char* name) override;
 void GetUniformfv(GLuint program, GLint location, GLfloat* params) override;
 void GetUniformiv(GLuint program, GLint location, GLint* params) override;
@@ -665,7 +667,7 @@ void GetProgramResourceName(GLuint program,
                             GLuint index,
                             GLsizei bufsize,
                             GLsizei* length,
-                            char* name) override;
+                            base::span<char> name) override;
 void GetProgramResourceiv(GLuint program,
                           GLenum program_interface,
                           GLuint index,
diff --git a/gpu/command_buffer/client/gles2_trace_implementation_impl_autogen.h b/gpu/command_buffer/client/gles2_trace_implementation_impl_autogen.h
index f113a0ad0308f..3c09ab5e7f448 100644
--- a/gpu/command_buffer/client/gles2_trace_implementation_impl_autogen.h
+++ b/gpu/command_buffer/client/gles2_trace_implementation_impl_autogen.h
@@ -12,6 +12,8 @@
 #ifndef GPU_COMMAND_BUFFER_CLIENT_GLES2_TRACE_IMPLEMENTATION_IMPL_AUTOGEN_H_
 #define GPU_COMMAND_BUFFER_CLIENT_GLES2_TRACE_IMPLEMENTATION_IMPL_AUTOGEN_H_
 
+#include "base/containers/span.h"
+
 void GLES2TraceImplementation::ActiveTexture(GLenum texture) {
   TRACE_EVENT_BINARY_EFFICIENT0("gpu", "GLES2Trace::ActiveTexture");
   gl_->ActiveTexture(texture);
@@ -531,7 +533,7 @@ void GLES2TraceImplementation::GetActiveAttrib(GLuint program,
                                                GLsizei* length,
                                                GLint* size,
                                                GLenum* type,
-                                               char* name) {
+                                               base::span<char> name) {
   TRACE_EVENT_BINARY_EFFICIENT0("gpu", "GLES2Trace::GetActiveAttrib");
   gl_->GetActiveAttrib(program, index, bufsize, length, size, type, name);
 }
@@ -542,7 +544,7 @@ void GLES2TraceImplementation::GetActiveUniform(GLuint program,
                                                 GLsizei* length,
                                                 GLint* size,
                                                 GLenum* type,
-                                                char* name) {
+                                                base::span<char> name) {
   TRACE_EVENT_BINARY_EFFICIENT0("gpu", "GLES2Trace::GetActiveUniform");
   gl_->GetActiveUniform(program, index, bufsize, length, size, type, name);
 }
@@ -555,11 +557,12 @@ void GLES2TraceImplementation::GetActiveUniformBlockiv(GLuint program,
   gl_->GetActiveUniformBlockiv(program, index, pname, params);
 }
 
-void GLES2TraceImplementation::GetActiveUniformBlockName(GLuint program,
-                                                         GLuint index,
-                                                         GLsizei bufsize,
-                                                         GLsizei* length,
-                                                         char* name) {
+void GLES2TraceImplementation::GetActiveUniformBlockName(
+    GLuint program,
+    GLuint index,
+    GLsizei bufsize,
+    GLsizei* length,
+    base::span<char> name) {
   TRACE_EVENT_BINARY_EFFICIENT0("gpu", "GLES2Trace::GetActiveUniformBlockName");
   gl_->GetActiveUniformBlockName(program, index, bufsize, length, name);
 }
@@ -773,13 +776,14 @@ void GLES2TraceImplementation::GetTexParameteriv(GLenum target,
   gl_->GetTexParameteriv(target, pname, params);
 }
 
-void GLES2TraceImplementation::GetTransformFeedbackVarying(GLuint program,
-                                                           GLuint index,
-                                                           GLsizei bufsize,
-                                                           GLsizei* length,
-                                                           GLsizei* size,
-                                                           GLenum* type,
-                                                           char* name) {
+void GLES2TraceImplementation::GetTransformFeedbackVarying(
+    GLuint program,
+    GLuint index,
+    GLsizei bufsize,
+    GLsizei* length,
+    GLsizei* size,
+    GLenum* type,
+    base::span<char> name) {
   TRACE_EVENT_BINARY_EFFICIENT0("gpu",
                                 "GLES2Trace::GetTransformFeedbackVarying");
   gl_->GetTransformFeedbackVarying(program, index, bufsize, length, size, type,
@@ -1915,7 +1919,7 @@ void GLES2TraceImplementation::GetProgramResourceName(GLuint program,
                                                       GLuint index,
                                                       GLsizei bufsize,
                                                       GLsizei* length,
-                                                      char* name) {
+                                                      base::span<char> name) {
   TRACE_EVENT_BINARY_EFFICIENT0("gpu", "GLES2Trace::GetProgramResourceName");
   gl_->GetProgramResourceName(program, program_interface, index, bufsize,
                               length, name);
diff --git a/gpu/command_buffer/client/program_info_manager.cc b/gpu/command_buffer/client/program_info_manager.cc
index a6ce747527415..a54a367bfe810 100644
--- a/gpu/command_buffer/client/program_info_manager.cc
+++ b/gpu/command_buffer/client/program_info_manager.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -63,16 +65,16 @@ class DataIterator {
 // This is a helper function for GetActive*Helper functions that return names.
 void FillNameAndLength(GLsizei bufsize,
                        GLsizei* length,
-                       char* name,
+                       base::span<char> name,
                        const std::string& string) {
   // Length of string (without final \0) that we will write to the
   // buffer.
   GLsizei max_length = 0;
-  if (name && (bufsize > 0)) {
+  if (!name.empty() && (bufsize > 0)) {
     DCHECK_LE(string.size(), static_cast<size_t>(INT_MAX));
     // Note: bufsize counts the terminating \0, but not string.size().
     max_length = std::min(bufsize - 1, static_cast<GLsizei>(string.size()));
-    memcpy(name, string.data(), max_length);
+    memcpy(name.data(), string.data(), max_length);
     name[max_length] = '\0';
   }
   if (length) {
@@ -810,10 +812,14 @@ GLint ProgramInfoManager::GetFragDataLocation(
   return loc;
 }
 
-bool ProgramInfoManager::GetActiveAttrib(
-    GLES2Implementation* gl,
-    GLuint program, GLuint index, GLsizei bufsize, GLsizei* length,
-    GLint* size, GLenum* type, char* name) {
+bool ProgramInfoManager::GetActiveAttrib(GLES2Implementation* gl,
+                                         GLuint program,
+                                         GLuint index,
+                                         GLsizei bufsize,
+                                         GLsizei* length,
+                                         GLint* size,
+                                         GLenum* type,
+                                         base::span<char> name) {
   {
     base::AutoLock auto_lock(lock_);
     Program* info = GetProgramInfo(gl, program, kES2);
@@ -835,10 +841,14 @@ bool ProgramInfoManager::GetActiveAttrib(
       program, index, bufsize, length, size, type, name);
 }
 
-bool ProgramInfoManager::GetActiveUniform(
-    GLES2Implementation* gl,
-    GLuint program, GLuint index, GLsizei bufsize, GLsizei* length,
-    GLint* size, GLenum* type, char* name) {
+bool ProgramInfoManager::GetActiveUniform(GLES2Implementation* gl,
+                                          GLuint program,
+                                          GLuint index,
+                                          GLsizei bufsize,
+                                          GLsizei* length,
+                                          GLint* size,
+                                          GLenum* type,
+                                          base::span<char> name) {
   {
     base::AutoLock auto_lock(lock_);
     Program* info = GetProgramInfo(gl, program, kES2);
@@ -872,9 +882,12 @@ GLuint ProgramInfoManager::GetUniformBlockIndex(
   return gl->GetUniformBlockIndexHelper(program, name);
 }
 
-bool ProgramInfoManager::GetActiveUniformBlockName(
-    GLES2Implementation* gl, GLuint program, GLuint index,
-    GLsizei buf_size, GLsizei* length, char* name) {
+bool ProgramInfoManager::GetActiveUniformBlockName(GLES2Implementation* gl,
+                                                   GLuint program,
+                                                   GLuint index,
+                                                   GLsizei buf_size,
+                                                   GLsizei* length,
+                                                   base::span<char> name) {
   DCHECK_LE(0, buf_size);
   {
     base::AutoLock auto_lock(lock_);
@@ -968,9 +981,14 @@ void ProgramInfoManager::UniformBlockBinding(
   }
 }
 
-bool ProgramInfoManager::GetTransformFeedbackVarying(
-    GLES2Implementation* gl, GLuint program, GLuint index, GLsizei bufsize,
-    GLsizei* length, GLsizei* size, GLenum* type, char* name) {
+bool ProgramInfoManager::GetTransformFeedbackVarying(GLES2Implementation* gl,
+                                                     GLuint program,
+                                                     GLuint index,
+                                                     GLsizei bufsize,
+                                                     GLsizei* length,
+                                                     GLsizei* size,
+                                                     GLenum* type,
+                                                     base::span<char> name) {
   {
     base::AutoLock auto_lock(lock_);
     Program* info = GetProgramInfo(gl, program, kES3TransformFeedbackVaryings);
@@ -1026,9 +1044,13 @@ GLuint ProgramInfoManager::GetProgramResourceIndex(
   return gl->GetProgramResourceIndexHelper(program, program_interface, name);
 }
 
-bool ProgramInfoManager::GetProgramResourceName(
-    GLES2Implementation* gl, GLuint program, GLenum program_interface,
-    GLuint index, GLsizei bufsize, GLsizei* length, char* name) {
+bool ProgramInfoManager::GetProgramResourceName(GLES2Implementation* gl,
+                                                GLuint program,
+                                                GLenum program_interface,
+                                                GLuint index,
+                                                GLsizei bufsize,
+                                                GLsizei* length,
+                                                base::span<char> name) {
   // TODO(jiajie.hu@intel.com): The info is not cached for now, so always
   // fallback to the IPC path.
   return gl->GetProgramResourceNameHelper(
diff --git a/gpu/command_buffer/client/program_info_manager.h b/gpu/command_buffer/client/program_info_manager.h
index c1298c56125c2..c2e5690e2b39d 100644
--- a/gpu/command_buffer/client/program_info_manager.h
+++ b/gpu/command_buffer/client/program_info_manager.h
@@ -12,6 +12,7 @@
 #include <unordered_map>
 #include <vector>
 
+#include "base/containers/span.h"
 #include "base/gtest_prod_util.h"
 #include "base/synchronization/lock.h"
 #include "gles2_impl_export.h"
@@ -46,20 +47,33 @@ class GLES2_IMPL_EXPORT ProgramInfoManager {
   GLint GetFragDataLocation(
       GLES2Implementation* gl, GLuint program, const char* name);
 
-  bool GetActiveAttrib(
-      GLES2Implementation* gl, GLuint program, GLuint index, GLsizei bufsize,
-      GLsizei* length, GLint* size, GLenum* type, char* name);
-
-  bool GetActiveUniform(
-      GLES2Implementation* gl, GLuint program, GLuint index, GLsizei bufsize,
-      GLsizei* length, GLint* size, GLenum* type, char* name);
+  bool GetActiveAttrib(GLES2Implementation* gl,
+                       GLuint program,
+                       GLuint index,
+                       GLsizei bufsize,
+                       GLsizei* length,
+                       GLint* size,
+                       GLenum* type,
+                       base::span<char> name);
+
+  bool GetActiveUniform(GLES2Implementation* gl,
+                        GLuint program,
+                        GLuint index,
+                        GLsizei bufsize,
+                        GLsizei* length,
+                        GLint* size,
+                        GLenum* type,
+                        base::span<char> name);
 
   GLuint GetUniformBlockIndex(
       GLES2Implementation* gl, GLuint program, const char* name);
 
-  bool GetActiveUniformBlockName(
-      GLES2Implementation* gl, GLuint program, GLuint index,
-      GLsizei buf_size, GLsizei* length, char* name);
+  bool GetActiveUniformBlockName(GLES2Implementation* gl,
+                                 GLuint program,
+                                 GLuint index,
+                                 GLsizei buf_size,
+                                 GLsizei* length,
+                                 base::span<char> name);
 
   bool GetActiveUniformBlockiv(
       GLES2Implementation* gl, GLuint program, GLuint index,
@@ -71,9 +85,14 @@ class GLES2_IMPL_EXPORT ProgramInfoManager {
   void UniformBlockBinding(
       GLES2Implementation* gl, GLuint program, GLuint index, GLuint binding);
 
-  bool GetTransformFeedbackVarying(
-      GLES2Implementation* gl, GLuint program, GLuint index, GLsizei bufsize,
-      GLsizei* length, GLsizei* size, GLenum* type, char* name);
+  bool GetTransformFeedbackVarying(GLES2Implementation* gl,
+                                   GLuint program,
+                                   GLuint index,
+                                   GLsizei bufsize,
+                                   GLsizei* length,
+                                   GLsizei* size,
+                                   GLenum* type,
+                                   base::span<char> name);
 
   bool GetUniformIndices(
       GLES2Implementation* gl, GLuint program, GLsizei count,
@@ -91,9 +110,13 @@ class GLES2_IMPL_EXPORT ProgramInfoManager {
       GLES2Implementation* gl, GLuint program, GLenum program_interface,
       const char* name);
 
-  bool GetProgramResourceName(
-      GLES2Implementation* gl, GLuint program, GLenum program_interface,
-      GLuint index, GLsizei bufsize, GLsizei* length, char* name);
+  bool GetProgramResourceName(GLES2Implementation* gl,
+                              GLuint program,
+                              GLenum program_interface,
+                              GLuint index,
+                              GLsizei bufsize,
+                              GLsizei* length,
+                              base::span<char> name);
 
   bool GetProgramResourceiv(
       GLES2Implementation* gl, GLuint program, GLenum program_interface,
diff --git a/gpu/command_buffer/client/program_info_manager_unittest.cc b/gpu/command_buffer/client/program_info_manager_unittest.cc
index 721331e49c597..0a84ed5aacf91 100644
--- a/gpu/command_buffer/client/program_info_manager_unittest.cc
+++ b/gpu/command_buffer/client/program_info_manager_unittest.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -330,35 +332,30 @@ TEST_F(ProgramInfoManagerTest, GetActiveUniformBlockNameCached) {
   GLsizei buf_size = std::max(strlen(data.name0), strlen(data.name1)) + 1;
   std::vector<char> buffer(buf_size);
   GLsizei length = 0;
-  EXPECT_EQ(true,
-            program_info_manager_->GetActiveUniformBlockName(
-                nullptr, kClientProgramId, 0, buf_size, &length, &buffer[0]));
+  EXPECT_EQ(true, program_info_manager_->GetActiveUniformBlockName(
+                      nullptr, kClientProgramId, 0, buf_size, &length, buffer));
   EXPECT_EQ(static_cast<GLsizei>(strlen(data.name0)), length);
   EXPECT_STREQ(data.name0, &buffer[0]);
 
-  EXPECT_EQ(true,
-            program_info_manager_->GetActiveUniformBlockName(
-                nullptr, kClientProgramId, 1, buf_size, &length, &buffer[0]));
+  EXPECT_EQ(true, program_info_manager_->GetActiveUniformBlockName(
+                      nullptr, kClientProgramId, 1, buf_size, &length, buffer));
   EXPECT_EQ(static_cast<GLsizei>(strlen(data.name1)), length);
   EXPECT_STREQ(data.name1, &buffer[0]);
 
   // Test length == nullptr.
-  EXPECT_EQ(true,
-            program_info_manager_->GetActiveUniformBlockName(
-                nullptr, kClientProgramId, 0, buf_size, nullptr, &buffer[0]));
+  EXPECT_EQ(true, program_info_manager_->GetActiveUniformBlockName(
+                      nullptr, kClientProgramId, 0, buf_size, nullptr, buffer));
   EXPECT_STREQ(data.name0, &buffer[0]);
 
   // Test buffer == nullptr.
-  EXPECT_EQ(true,
-            program_info_manager_->GetActiveUniformBlockName(
-                nullptr, kClientProgramId, 0, buf_size, &length, nullptr));
+  EXPECT_EQ(true, program_info_manager_->GetActiveUniformBlockName(
+                      nullptr, kClientProgramId, 0, buf_size, &length, {}));
   EXPECT_EQ(0, length);
 
   // Test buf_size smaller than string size.
   buf_size = strlen(data.name0);
-  EXPECT_EQ(true,
-            program_info_manager_->GetActiveUniformBlockName(
-                nullptr, kClientProgramId, 0, buf_size, &length, &buffer[0]));
+  EXPECT_EQ(true, program_info_manager_->GetActiveUniformBlockName(
+                      nullptr, kClientProgramId, 0, buf_size, &length, buffer));
   EXPECT_EQ(buf_size, length + 1);
   EXPECT_STREQ(std::string(data.name0).substr(0, length).c_str(), &buffer[0]);
 }
@@ -429,7 +426,7 @@ TEST_F(ProgramInfoManagerTest, GetTransformFeedbackVaryingCached) {
     GLenum type = 0;
     EXPECT_EQ(true, program_info_manager_->GetTransformFeedbackVarying(
                         nullptr, kClientProgramId, ii, buf_size, &length, &size,
-                        &type, &buffer[0]));
+                        &type, buffer));
     EXPECT_EQ(data.entry[ii].size, static_cast<uint32_t>(size));
     EXPECT_EQ(data.entry[ii].type, static_cast<uint32_t>(type));
     EXPECT_STREQ(kName[ii], &buffer[0]);
diff --git a/third_party/blink/renderer/modules/webgl/webgl2_rendering_context_base.cc b/third_party/blink/renderer/modules/webgl/webgl2_rendering_context_base.cc
index 28e0c530426cf..fe3bfd74585c8 100644
--- a/third_party/blink/renderer/modules/webgl/webgl2_rendering_context_base.cc
+++ b/third_party/blink/renderer/modules/webgl/webgl2_rendering_context_base.cc
@@ -4250,7 +4250,7 @@ WebGLActiveInfo* WebGL2RenderingContextBase::getTransformFeedbackVarying(
   GLenum type = 0;
   ContextGL()->GetTransformFeedbackVarying(ObjectOrZero(program), index,
                                            max_name_length, &length, &size,
-                                           &type, name.data());
+                                           &type, name);
 
   if (length <= 0 || size == 0 || type == 0) {
     return nullptr;
@@ -4662,7 +4662,7 @@ String WebGL2RenderingContextBase::getActiveUniformBlockName(
   GLsizei length = 0;
   ContextGL()->GetActiveUniformBlockName(ObjectOrZero(program),
                                          uniform_block_index, max_name_length,
-                                         &length, name.data());
+                                         &length, name);
 
   if (length <= 0)
     return String();
diff --git a/third_party/blink/renderer/modules/webgl/webgl_rendering_context_base.cc b/third_party/blink/renderer/modules/webgl/webgl_rendering_context_base.cc
index 22f2b7fda1666..9c63d7dd7c1cd 100644
--- a/third_party/blink/renderer/modules/webgl/webgl_rendering_context_base.cc
+++ b/third_party/blink/renderer/modules/webgl/webgl_rendering_context_base.cc
@@ -3221,7 +3221,7 @@ WebGLActiveInfo* WebGLRenderingContextBase::getActiveAttrib(
       StringImpl::CreateUninitialized(max_name_length, name_buffer);
   ContextGL()->GetActiveAttrib(program_id, index, max_name_length, &length,
                                &size, &type,
-                               reinterpret_cast<GLchar*>(name_buffer.data()));
+                               reinterpret_cast<GLchar*>(name_buffer));
   if (size < 0)
     return nullptr;
   return MakeGarbageCollected<WebGLActiveInfo>(name_impl->Substring(0, length),
@@ -3252,7 +3252,7 @@ WebGLActiveInfo* WebGLRenderingContextBase::getActiveUniform(
       StringImpl::CreateUninitialized(max_name_length, name_buffer);
   ContextGL()->GetActiveUniform(program_id, index, max_name_length, &length,
                                 &size, &type,
-                                reinterpret_cast<GLchar*>(name_buffer.data()));
+                                reinterpret_cast<GLchar*>(name_buffer));
   if (size < 0)
     return nullptr;
   return MakeGarbageCollected<WebGLActiveInfo>(name_impl->Substring(0, length),
@@ -4274,9 +4274,9 @@ ScriptValue WebGLRenderingContextBase::getUniform(
     GLsizei name_length = 0;
     GLint size = -1;
     GLenum type = 0;
-    ContextGL()->GetActiveUniform(
-        program_id, i, max_name_length, &name_length, &size, &type,
-        reinterpret_cast<GLchar*>(name_buffer.data()));
+    ContextGL()->GetActiveUniform(program_id, i, max_name_length, &name_length,
+                                  &size, &type,
+                                  reinterpret_cast<GLchar*>(name_buffer));
     if (size < 0)
       return ScriptValue::CreateNull(script_state->GetIsolate());
     String name(name_impl->Substring(0, name_length));
```

## Build Failure Log

```

 9.33s Build Failure: 1 done 1 failed 69756 remaining - 0.11/s
 1 steps failed: exit=1
see ./out/linux/siso_output for full command line and output
 or ./out/linux/siso.INFO
use ./out/linux/siso_failed_commands.sh to re-run failed commands
real	0m9.591s
user	0m54.803s
sys	0m35.194s
ninja: Entering directory `out/linux'
init credentials done 37.756381ms
reapi instance: projects/rbe-chrome-untrusted/instances/default_instance
loading fs state done 1.291329181s
loading/recompacting deps log done 6.714s
load siso config done 806.141234ms
load build.ninja done 1.055549289s
schedule pending:0+ready:1 (node:310590 edge:2)
build start: Ready 1 Pending 1
rebuild manifest finished	
schedule pending:0+ready:1 (node:310590 edge:9)
build start: Ready 15287 Pending 102644
FAILED: af22799c-3b9b-4057-b37f-79de5f67a23b "./obj/gpu/command_buffer/client/gles2_interface/gles2_interface.o" CXX obj/gpu/command_buffer/client/gles2_interface/gles2_interface.o
err: exit=1
../../third_party/llvm-build/Release+Asserts/bin/clang++ -MMD -MF obj/gpu/command_buffer/client/gles2_interface/gles2_interface.o.d -DDCHECK_ALWAYS_ON=1 -DUSE_UDEV -DUSE_AURA=1 -DUSE_GLIB=1 -DUSE_OZONE=1 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_GNU_SOURCE -DCR_CLANG_REVISION=\"llvmorg-21-init-5118-g52cd27e6-2\" -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -DCOMPONENT_BUILD -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0 -DCR_LIBCXX_REVISION=4f05e20cbe1d02fa0871ac88b30eead9e38cab3a -DTMP_REBUILD_HACK -DCR_SYSROOT_KEY=20250129T203412Z-1 -D_DEBUG -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DGLIB_VERSION_MAX_ALLOWED=GLIB_VERSION_2_56 -DGLIB_VERSION_MIN_REQUIRED=GLIB_VERSION_2_56 -DABSL_CONSUME_DLL -DABSL_FLAGS_STRIP_NAMES=0 -DCR_CXX_INCLUDE=\"third_party/rust/chromium_crates_io/vendor/cxx-1.0.146/include/cxx.h\" -DBORINGSSL_SHARED_LIBRARY -I../.. -Igen -I../../buildtools/third_party/libc++ -I../../third_party/khronos -I../../gpu -I../../third_party/perfetto/include -Igen/third_party/perfetto/build_config -Igen/third_party/perfetto -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/protobuf/src -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi -Wunreachable-code-aggressive -Wthread-safety -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return -Wno-nontrivial-memcall -Wshadow -Werror -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-strict-aliasing -fstack-protector -funwind-tables -fPIC -pthread -fcolor-diagnostics -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../../tools/clang/crashreports -mllvm -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -Wa,--crel,--allow-experimental-crel -fcomplete-member-pointers -m64 -msse3 -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=. -no-canonical-prefixes -ftrivial-auto-var-init=pattern -O0 -fno-omit-frame-pointer -gdwarf-4 -g2 -gdwarf-aranges -gsplit-dwarf -ggnu-pubnames -Xclang -fuse-ctor-homing -fvisibility=hidden -Wheader-hygiene -Wstring-conversion -Wtautological-overlap-compare -Xclang -add-plugin -Xclang find-bad-constructs -Xclang -plugin-arg-find-bad-constructs -Xclang span-ctor-from-string-literal -Xclang -plugin-arg-find-bad-constructs -Xclang raw-ref-template-as-trivial-member -Xclang -plugin-arg-find-bad-constructs -Xclang raw-span-template-as-trivial-member -Xclang -plugin-arg-find-bad-constructs -Xclang check-stack-allocated -Xclang -plugin-arg-find-bad-constructs -Xclang check-ipc -Xclang -add-plugin -Xclang raw-ptr-plugin -Xclang -plugin-arg-raw-ptr-plugin -Xclang check-raw-ptr-to-stack-allocated -Xclang -plugin-arg-raw-ptr-plugin -Xclang disable-check-raw-ptr-to-stack-allocated-error -Xclang -plugin-arg-raw-ptr-plugin -Xclang raw-ptr-exclude-path=../../third_party/dawn/ -Xclang -plugin-arg-raw-ptr-plugin -Xclang check-raw-ptr-fields -Xclang -plugin-arg-raw-ptr-plugin -Xclang check-span-fields -Xclang -plugin-arg-raw-ptr-plugin -Xclang check-raw-ref-fields -DUNSAFE_BUFFERS_BUILD -Xclang -add-plugin -Xclang unsafe-buffers -Xclang -plugin-arg-unsafe-buffers -Xclang ../../build/config/unsafe_buffers_paths.txt -isystem../../build/linux/debian_bullseye_amd64-sysroot/usr/include/glib-2.0 -isystem../../build/linux/debian_bullseye_amd64-sysroot/usr/lib/x86_64-linux-gnu/glib-2.0/include -Wno-invalid-offsetof -Wenum-compare-conditional -Wno-c++11-narrowing-const-reference -Wno-missing-template-arg-list-after-template-kw -Wno-undefined-bool-conversion -Wno-tautological-undefined-compare -std=c++20 -Wno-trigraphs -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystem../../third_party/libc++/src/include -isystem../../third_party/libc++abi/src/include --sysroot=../../build/linux/debian_bullseye_amd64-sysroot -fvisibility-inlines-hidden  -c ../../gpu/command_buffer/client/gles2_interface.cc -o obj/gpu/command_buffer/client/gles2_interface/gles2_interface.o
build step: cxx "./obj/gpu/command_buffer/client/gles2_interface/gles2_interface.o"
siso_rule: clang/cxx
stderr:
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:15:
In file included from ../../third_party/libc++/src/include/string.h:64:
../../build/linux/debian_bullseye_amd64-sysroot/usr/include/string.h:28:1: error: expected member name or ';' after declaration specifiers
   28 | __BEGIN_DECLS
      | ^~~~~~~~~~~~~
../../build/linux/debian_bullseye_amd64-sysroot/usr/include/x86_64-linux-gnu/sys/cdefs.h:114:31: note: expanded from macro '__BEGIN_DECLS'
  114 | # define __BEGIN_DECLS  extern "C" {
      |                         ~~~~~~ ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:17:
In file included from ../../third_party/libc++/src/include/algorithm:1852:
In file included from ../../third_party/libc++/src/include/__algorithm/find.h:32:
In file included from ../../third_party/libc++/src/include/cwchar:116:
In file included from ../../third_party/libc++/src/include/cwctype:58:
In file included from ../../third_party/libc++/src/include/wctype.h:66:
In file included from ../../build/linux/debian_bullseye_amd64-sysroot/usr/include/wctype.h:38:
../../build/linux/debian_bullseye_amd64-sysroot/usr/include/x86_64-linux-gnu/bits/wctype-wchar.h:87:1: error: expected member name or ';' after declaration specifiers
   87 | __BEGIN_DECLS
      | ^~~~~~~~~~~~~
../../build/linux/debian_bullseye_amd64-sysroot/usr/include/x86_64-linux-gnu/sys/cdefs.h:114:31: note: expanded from macro '__BEGIN_DECLS'
  114 | # define __BEGIN_DECLS  extern "C" {
      |                         ~~~~~~ ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:17:
In file included from ../../third_party/libc++/src/include/algorithm:1852:
In file included from ../../third_party/libc++/src/include/__algorithm/find.h:32:
In file included from ../../third_party/libc++/src/include/cwchar:118:
In file included from ../../third_party/libc++/src/include/wchar.h:116:
In file included from ../../build/linux/debian_bullseye_amd64-sysroot/usr/include/wchar.h:35:
In file included from ../../third_party/libc++/src/include/stddef.h:38:
In file included from ../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/stddef.h:93:
../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/__stddef_size_t.h:18:23: error: redefinition of 'size_t'
   18 | typedef __SIZE_TYPE__ size_t;
      |                       ^
../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/stddef.h:93:10: note: '../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/__stddef_size_t.h' included multiple times, additional include site here
   93 | #include <__stddef_size_t.h>
      |          ^
../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/stddef.h:93:10: note: '../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/__stddef_size_t.h' included multiple times, additional include site here
   93 | #include <__stddef_size_t.h>
      |          ^
../../third_party/llvm-build/Release+Asserts/lib/clang/21/include/__stddef_size_t.h:18:23: note: unguarded header; consider using #ifdef guards or #pragma once
   18 | typedef __SIZE_TYPE__ size_t;
      |                       ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:17:
In file included from ../../third_party/libc++/src/include/algorithm:1852:
In file included from ../../third_party/libc++/src/include/__algorithm/find.h:32:
In file included from ../../third_party/libc++/src/include/cwchar:118:
In file included from ../../third_party/libc++/src/include/wchar.h:116:
../../build/linux/debian_bullseye_amd64-sysroot/usr/include/wchar.h:79:1: error: expected member name or ';' after declaration specifiers
   79 | __BEGIN_DECLS
      | ^~~~~~~~~~~~~
../../build/linux/debian_bullseye_amd64-sysroot/usr/include/x86_64-linux-gnu/sys/cdefs.h:114:31: note: expanded from macro '__BEGIN_DECLS'
  114 | # define __BEGIN_DECLS  extern "C" {
      |                         ~~~~~~ ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
../../gpu/command_buffer/client/gles2_interface.h:37:7: error: missing '}' at end of definition of 'gpu::gles2::GLES2Interface'
   37 | class GLES2Interface : public InterfaceBase {
      |       ^
../../third_party/libc++/src/include/cwchar:132:1: note: still within definition of 'gpu::gles2::GLES2Interface' here
  132 | _LIBCPP_BEGIN_NAMESPACE_STD
      | ^
../../third_party/libc++/src/include/__config:583:39: note: expanded from macro '_LIBCPP_BEGIN_NAMESPACE_STD'
  583 |                                       namespace _LIBCPP_TYPE_VISIBILITY_DEFAULT std {                                  \
      |                                       ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:17:
In file included from ../../third_party/libc++/src/include/algorithm:1852:
In file included from ../../third_party/libc++/src/include/__algorithm/find.h:32:
../../third_party/libc++/src/include/cwchar:200:60: error: unknown type name 'size_t'
  200 | inline _LIBCPP_HIDE_FROM_ABI _LIBCPP_CONSTEXPR_SINCE_CXX14 size_t __constexpr_wcslen(const wchar_t* __str) {
      |                                                            ^
../../third_party/libc++/src/include/cwchar:215:65: error: unknown type name 'size_t'
  215 | __constexpr_wmemcmp(const wchar_t* __lhs, const wchar_t* __rhs, size_t __count) {
      |                                                                 ^
../../third_party/libc++/src/include/cwchar:233:103: error: unknown type name 'size_t'
  233 | _LIBCPP_HIDE_FROM_ABI _LIBCPP_CONSTEXPR_SINCE_CXX14 _Tp* __constexpr_wmemchr(_Tp* __str, _Up __value, size_t __count) {
      |                                                                                                       ^
../../third_party/libc++/src/include/cwchar:235:21: error: no template named '__libcpp_is_trivially_equality_comparable'
  235 |                     __libcpp_is_trivially_equality_comparable<_Tp, _Tp>::value,
      |                     ^
../../third_party/libc++/src/include/cwchar:239:8: error: use of undeclared identifier '__libcpp_is_constant_evaluated'; did you mean '__builtin_is_constant_evaluated'?
  239 |   if (!__libcpp_is_constant_evaluated()) {
      |        ^
../../third_party/libc++/src/include/cwchar:241:44: error: no member named 'addressof' in namespace 'gpu::gles2::std'
  241 |     __builtin_memcpy(&__value_buffer, std::addressof(__value), sizeof(wchar_t));
      |                                       ~~~~~^
../../third_party/libc++/src/include/cwchar:243:44: error: no template named '__copy_cv_t'
  243 |         __builtin_wmemchr(reinterpret_cast<__copy_cv_t<_Tp, wchar_t>*>(__str), __value_buffer, __count));
      |                                            ^
../../third_party/libc++/src/include/cwchar:246:32: error: use of undeclared identifier 'remove_cv_t'
  246 |   else if constexpr (is_same_v<remove_cv_t<_Tp>, wchar_t>)
      |                                ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:17:
In file included from ../../third_party/libc++/src/include/algorithm:1852:
../../third_party/libc++/src/include/__algorithm/find.h:49:14: error: no member named '__invoke' in namespace 'gpu::gles2::std'
   49 |     if (std::__invoke(__proj, *__first) == __value)
      |         ~~~~~^
../../third_party/libc++/src/include/__algorithm/find.h:58:25: error: no template named '__is_identity'
   58 |           __enable_if_t<__is_identity<_Proj>::value && __libcpp_is_trivially_equality_comparable<_Tp, _Up>::value &&
      |                         ^
../../third_party/libc++/src/include/__algorithm/find.h:58:56: error: no template named '__libcpp_is_trivially_equality_comparable'
   58 |           __enable_if_t<__is_identity<_Proj>::value && __libcpp_is_trivially_equality_comparable<_Tp, _Up>::value &&
      |                                                        ^
../../third_party/libc++/src/include/__algorithm/find.h:62:25: error: no member named '__constexpr_memchr' in namespace 'gpu::gles2::std'; did you mean '__constexpr_wmemchr'?
   62 |   if (auto __ret = std::__constexpr_memchr(__first, __value, __last - __first))
      |                    ~~~~~^
../../third_party/libc++/src/include/cwchar:233:58: note: '__constexpr_wmemchr' declared here
  233 | _LIBCPP_HIDE_FROM_ABI _LIBCPP_CONSTEXPR_SINCE_CXX14 _Tp* __constexpr_wmemchr(_Tp* __str, _Up __value, size_t __count) {
      |                                                          ^
In file included from ../../gpu/command_buffer/client/gles2_interface.cc:5:
In file included from ../../gpu/command_buffer/client/gles2_interface.h:53:
In file included from ../../gpu/command_buffer/client/gles2_interface_autogen.h:16:
In file included from ../../base/containers/span.h:17:
In file included from ../../third_party/libc++/src/include/algorithm:1852:
../../third_party/libc++/src/include/__algorithm/find.h:71:25: error: no template named '__is_identity'
   71 |           __enable_if_t<__is_identity<_Proj>::value && __libcpp_is_trivially_equality_comparable<_Tp, _Up>::value &&
      |                         ^
../../third_party/libc++/src/include/__algorithm/find.h:71:56: error: no template named '__libcpp_is_trivially_equality_comparable'
   71 |           __enable_if_t<__is_identity<_Proj>::value && __libcpp_is_trivially_equality_comparable<_Tp, _Up>::value &&
      |                                                        ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated.
build failed	
local:1 remote:0 cache:0 fallback:0 retry:0 skip:48174
reapi: ops: 1(err:0) / r:0(err:0) 0B / w:0(err:0) 0B
fs: ops: 53(err:32) / r:294(err:0) 2.61MiB / w:0(err:0) 0B
```
