# Build Failure Analysis: 2025_03_14_patch_424

## First error

../../gpu/command_buffer/service/gles2_cmd_decoder_autogen.h:4524:31: error: no viable conversion from 'GLuint *' (aka 'unsigned int *') to 'base::span<const GLuint>' (aka 'span<const unsigned int>')

## Category
Rewriter needs to avoid spanifying functions if it requires spanifying excluded code.

## Reason
The rewriter is attempting to spanify the `GenQueriesEXTHelper` function. However, the call site of this function resides in `gles2_cmd_decoder_autogen.h`, which is generated code and thus excluded from spanification. The compiler fails because the rewriter is attempting to pass a `GLuint*` to a function expecting a `base::span<const GLuint>`. Since `gles2_cmd_decoder_autogen.h` is excluded, the `GLuint*` at the call site was not converted to a `base::span`.

## Solution
The rewriter must avoid spanifying functions if it requires spanifying excluded code. The rewriter should check if the call sites to spanified functions are in excluded code, and if so, revert the change. In this case, the rewriter should not spanify `GenQueriesEXTHelper` because it is called from `gles2_cmd_decoder_autogen.h`.

## Note
There were many compilation failures, and these are because the rewriter spanified `gpu/command_buffer/service/gles2_cmd_decoder.cc` and `gpu/command_buffer/service/query_manager.cc` to expect span, but the autogenerated header file is passing in raw pointers. Thus there are many type errors.