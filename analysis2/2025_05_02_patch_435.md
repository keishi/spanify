# Build Failure: 2025_05_02_patch_435

## Chromium Revision

`a3ffac36a0fd4cbdc95cd5ec879816b9634a1d56`

## Code Changes (Diff)

```diff
diff --git a/base/command_line.cc b/base/command_line.cc
index d4d3bc52426d1..84a4abe8542d1 100644
--- a/base/command_line.cc
+++ b/base/command_line.cc
@@ -191,7 +191,8 @@ CommandLine::CommandLine(const FilePath& program) : argv_(1), begin_args_(1) {
   SetProgram(program);
 }
 
-CommandLine::CommandLine(int argc, const CommandLine::CharType* const* argv)
+CommandLine::CommandLine(int argc,
+                         base::span<const CommandLine::CharType* const> argv)
     : argv_(1), begin_args_(1) {
   // SAFETY: required from caller.
   UNSAFE_BUFFERS(InitFromArgv(argc, argv));
@@ -259,7 +260,7 @@ void CommandLine::InitUsingArgvForTesting(int argc, const char* const* argv) {
 #endif  // BUILDFLAG(IS_WIN)
 
 // static
-bool CommandLine::Init(int argc, const char* const* argv) {
+bool CommandLine::Init(int argc, base::span<const char* const> argv) {
   if (current_process_commandline_) {
     // If this is intentional, Reset() must be called first. If we are using
     // the shared build mode, we have to share a single object across multiple
@@ -314,8 +315,9 @@ CommandLine CommandLine::FromString(StringViewType command_line) {
 }
 #endif  // BUILDFLAG(IS_WIN)
 
-void CommandLine::InitFromArgv(int argc,
-                               const CommandLine::CharType* const* argv) {
+void CommandLine::InitFromArgv(
+    int argc,
+    base::span<const CommandLine::CharType* const> argv) {
   StringVector new_argv;
   for (int i = 0; i < argc; ++i) {
     // SAFETY: required from caller.
diff --git a/base/command_line.h b/base/command_line.h
index 0005cb04e5f85..6f2007ab45135 100644
--- a/base/command_line.h
+++ b/base/command_line.h
@@ -72,7 +72,7 @@ class BASE_EXPORT CommandLine {
 
   // Construct a new command line from an argument list.
   // TODO(tsepez): two-arg form should be UNSAFE_BUFFER_USAGE.
-  CommandLine(int argc, const CharType* const* argv);
+  CommandLine(int argc, base::span<const CharType* const> argv);
   explicit CommandLine(const StringVector& argv);
 
   // Allow the copy constructor. A common pattern is to copy of the current
@@ -113,7 +113,7 @@ class BASE_EXPORT CommandLine {
   // already occurred, and true otherwise. Only the caller receiving a 'true'
   // return value should take responsibility for calling Reset().
   // TODO(tsepez): should be UNSAFE_BUFFER_USAGE.
-  static bool Init(int argc, const char* const* argv);
+  static bool Init(int argc, base::span<const char* const> argv);
 
   // Destroys the current process CommandLine singleton. This is necessary if
   // you want to reset the base library to its initial state (for example, in an
@@ -132,7 +132,7 @@ class BASE_EXPORT CommandLine {
 
   // Initialize from an argv vector.
   // TODO(tsepez): two-arg form should be UNSAFE_BUFFER_USAGE.
-  void InitFromArgv(int argc, const CharType* const* argv);
+  void InitFromArgv(int argc, base::span<const CharType* const> argv);
   void InitFromArgv(const StringVector& argv);
 
   // Constructs and returns the represented command line string.
diff --git a/base/command_line_unittest.cc b/base/command_line_unittest.cc
index 23180c4dd1507..644d1df128b81 100644
--- a/base/command_line_unittest.cc
+++ b/base/command_line_unittest.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40284755): Remove this and spanify to fix the errors.
 #pragma allow_unsafe_buffers
@@ -216,7 +218,7 @@ TEST(CommandLineTest, EmptyString) {
   EXPECT_EQ(1U, cl_from_string.argv().size());
   EXPECT_TRUE(cl_from_string.GetArgs().empty());
 #endif
-  CommandLine cl_from_argv(0, nullptr);
+  CommandLine cl_from_argv(0, {});
   EXPECT_TRUE(cl_from_argv.GetCommandLineString().empty());
   EXPECT_TRUE(cl_from_argv.GetProgram().empty());
   EXPECT_EQ(1U, cl_from_argv.argv().size());
@@ -609,9 +611,9 @@ TEST(CommandLineTest, ProgramQuotes) {
 TEST(CommandLineTest, Init) {
   // Call Init without checking output once so we know it's been called
   // whether or not the test runner does so.
-  CommandLine::Init(0, nullptr);
+  CommandLine::Init(0, {});
   CommandLine* initial = CommandLine::ForCurrentProcess();
-  EXPECT_FALSE(CommandLine::Init(0, nullptr));
+  EXPECT_FALSE(CommandLine::Init(0, {}));
   CommandLine* current = CommandLine::ForCurrentProcess();
   EXPECT_EQ(initial, current);
 }
diff --git a/base/i18n/build_utf8_validator_tables.cc b/base/i18n/build_utf8_validator_tables.cc
index b7ddec8306fc9..ea7dc4434bbfd 100644
--- a/base/i18n/build_utf8_validator_tables.cc
+++ b/base/i18n/build_utf8_validator_tables.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40284755): Remove this and spanify to fix the errors.
 #pragma allow_unsafe_buffers
@@ -425,7 +427,7 @@ void PrintStates(const std::vector<State>& states, FILE* stream) {
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   logging::LoggingSettings settings;
   settings.logging_dest =
diff --git a/base/json/json_perftest_decodebench.cc b/base/json/json_perftest_decodebench.cc
index 0b44084617086..5879126ba4d2c 100644
--- a/base/json/json_perftest_decodebench.cc
+++ b/base/json/json_perftest_decodebench.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -33,7 +35,7 @@
 #include "base/logging.h"
 #include "base/time/time.h"
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   if (!base::ThreadTicks::IsSupported()) {
     std::cout << "# base::ThreadTicks is not supported\n";
     return EXIT_FAILURE;
diff --git a/base/process/set_process_title.cc b/base/process/set_process_title.cc
index b6389523952a4..2852d352a3ac5 100644
--- a/base/process/set_process_title.cc
+++ b/base/process/set_process_title.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 
 // Define _GNU_SOURCE to ensure that <errno.h> defines
@@ -46,7 +47,7 @@ namespace base {
 #if BUILDFLAG(IS_POSIX) && !BUILDFLAG(IS_APPLE) && !BUILDFLAG(IS_SOLARIS) && \
     !BUILDFLAG(IS_ANDROID) && !BUILDFLAG(IS_FUCHSIA) && !BUILDFLAG(IS_NACL)
 
-void SetProcessTitleFromCommandLine(const char** main_argv) {
+void SetProcessTitleFromCommandLine(base::span<const char*> main_argv) {
   // Build a single string which consists of all the arguments separated
   // by spaces. We can't actually keep them separate due to the way the
   // setproctitle() function works.
@@ -57,7 +58,7 @@ void SetProcessTitleFromCommandLine(const char** main_argv) {
   DCHECK_EQ(base::PlatformThread::CurrentId(),
             base::PlatformThreadId(getpid()));
 
-  if (main_argv) {
+  if (!main_argv.empty()) {
     setproctitle_init(main_argv);
   }
 
diff --git a/base/process/set_process_title.h b/base/process/set_process_title.h
index 5e92b03f8f4ae..67655a2d95561 100644
--- a/base/process/set_process_title.h
+++ b/base/process/set_process_title.h
@@ -6,6 +6,7 @@
 #define BASE_PROCESS_SET_PROCESS_TITLE_H_
 
 #include "base/base_export.h"
+#include "base/containers/span.h"
 
 namespace base {
 
@@ -23,7 +24,8 @@ namespace base {
 // makes the process name that shows up in "ps" etc. for the child processes
 // show as "exe" instead of "chrome" or something reasonable. This function
 // will try to fix it so the "effective" command line shows up instead.
-BASE_EXPORT void SetProcessTitleFromCommandLine(const char** main_argv);
+BASE_EXPORT void SetProcessTitleFromCommandLine(
+    base::span<const char*> main_argv);
 
 }  // namespace base
 
diff --git a/base/process/set_process_title_linux.cc b/base/process/set_process_title_linux.cc
index dd43006dbeab5..3bdc602f76bbd 100644
--- a/base/process/set_process_title_linux.cc
+++ b/base/process/set_process_title_linux.cc
@@ -50,6 +50,7 @@
 #include <vector>
 
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/files/file_util.h"
 #include "base/no_destructor.h"
 #include "base/numerics/safe_conversions.h"
@@ -139,19 +140,19 @@ void setproctitle(const char* fmt, ...) {
 
 // A version of this built into glibc would not need this function, since
 // it could stash the argv pointer in __libc_start_main(). But we need it.
-void setproctitle_init(const char** main_argv) {
+void setproctitle_init(base::span<const char*> main_argv) {
   static bool init_called = false;
   if (init_called) {
     return;
   }
   init_called = true;
 
-  if (!main_argv) {
+  if (main_argv.empty()) {
     return;
   }
 
   // Verify that the memory layout matches expectation.
-  char** argv = const_cast<char**>(main_argv);
+  base::span<char*> argv = const_cast<char**>(main_argv);
   char* argv_start = argv[0];
   char* p = argv_start;
   for (size_t i = 0; UNSAFE_TODO(argv[i]); ++i) {
diff --git a/base/process/set_process_title_linux.h b/base/process/set_process_title_linux.h
index 72f8de7d46c72..6dc59b30d05bf 100644
--- a/base/process/set_process_title_linux.h
+++ b/base/process/set_process_title_linux.h
@@ -6,6 +6,7 @@
 #define BASE_PROCESS_SET_PROCESS_TITLE_LINUX_H_
 
 #include "base/base_export.h"
+#include "base/containers/span.h"
 
 // Set the process title that will show in "ps" and similar tools. Takes
 // printf-style format string and arguments. After calling setproctitle()
@@ -19,6 +20,6 @@ BASE_EXPORT void setproctitle(const char* fmt, ...);
 
 // Initialize state needed for setproctitle() on Linux. Pass the argv pointer
 // from main() to setproctitle_init() before calling setproctitle().
-BASE_EXPORT void setproctitle_init(const char** main_argv);
+BASE_EXPORT void setproctitle_init(base::span<const char*> main_argv);
 
 #endif  // BASE_PROCESS_SET_PROCESS_TITLE_LINUX_H_
diff --git a/base/test/launcher/unit_test_launcher.cc b/base/test/launcher/unit_test_launcher.cc
index 871e8ff3ea667..de47213d91f9a 100644
--- a/base/test/launcher/unit_test_launcher.cc
+++ b/base/test/launcher/unit_test_launcher.cc
@@ -13,6 +13,7 @@
 #include "base/base_switches.h"
 #include "base/command_line.h"
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/debug/debugger.h"
 #include "base/files/file_util.h"
 #include "base/format_macros.h"
@@ -324,7 +325,7 @@ void MergeTestFilterSwitchHandler::ResolveDuplicate(
 }
 
 int LaunchUnitTests(int argc,
-                    char** argv,
+                    base::span<char*> argv,
                     RunTestSuiteCallback run_test_suite,
                     size_t retry_limit) {
   CommandLine::SetDuplicateSwitchHandler(
@@ -341,7 +342,7 @@ int LaunchUnitTests(int argc,
 }
 
 int LaunchUnitTestsSerially(int argc,
-                            char** argv,
+                            base::span<char*> argv,
                             RunTestSuiteCallback run_test_suite) {
   CommandLine::Init(argc, argv);
   return LaunchUnitTestsInternal(std::move(run_test_suite), 1U,
@@ -350,7 +351,7 @@ int LaunchUnitTestsSerially(int argc,
 }
 
 int LaunchUnitTestsWithOptions(int argc,
-                               char** argv,
+                               base::span<char*> argv,
                                size_t parallel_jobs,
                                int default_batch_limit,
                                bool use_job_objects,
diff --git a/base/test/launcher/unit_test_launcher.h b/base/test/launcher/unit_test_launcher.h
index c6b06a4862e1d..d0920a52dca90 100644
--- a/base/test/launcher/unit_test_launcher.h
+++ b/base/test/launcher/unit_test_launcher.h
@@ -11,6 +11,7 @@
 #include <string_view>
 #include <vector>
 
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/scoped_temp_dir.h"
 #include "base/functional/callback.h"
@@ -29,13 +30,13 @@ using RunTestSuiteCallback = OnceCallback<int(void)>;
 
 // Launches unit tests in given test suite. Returns exit code.
 int LaunchUnitTests(int argc,
-                    char** argv,
+                    base::span<char*> argv,
                     RunTestSuiteCallback run_test_suite,
                     size_t retry_limit = 1U);
 
 // Same as above, but always runs tests serially.
 int LaunchUnitTestsSerially(int argc,
-                            char** argv,
+                            base::span<char*> argv,
                             RunTestSuiteCallback run_test_suite);
 
 // The following is not supported in unit_test_launcher_ios.cc, which is used on
@@ -51,7 +52,7 @@ int LaunchUnitTestsSerially(int argc,
 // as a cue to print additional debugging information about the test system,
 // such as log files or the names of running processes.
 int LaunchUnitTestsWithOptions(int argc,
-                               char** argv,
+                               base::span<char*> argv,
                                size_t parallel_jobs,
                                int default_batch_limit,
                                bool use_job_objects,
diff --git a/base/test/perf_test_suite.cc b/base/test/perf_test_suite.cc
index 8158e9b5cf764..07fcaf4d706de 100644
--- a/base/test/perf_test_suite.cc
+++ b/base/test/perf_test_suite.cc
@@ -5,6 +5,7 @@
 #include "base/test/perf_test_suite.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/debug/debugger.h"
 #include "base/files/file_path.h"
 #include "base/path_service.h"
@@ -21,7 +22,8 @@
 
 namespace base {
 
-PerfTestSuite::PerfTestSuite(int argc, char** argv) : TestSuite(argc, argv) {}
+PerfTestSuite::PerfTestSuite(int argc, base::span<char*> argv)
+    : TestSuite(argc, argv) {}
 
 void PerfTestSuite::Initialize() {
   TestSuite::Initialize();
diff --git a/base/test/perf_test_suite.h b/base/test/perf_test_suite.h
index aa8beb000f2f7..00b3ff193e569 100644
--- a/base/test/perf_test_suite.h
+++ b/base/test/perf_test_suite.h
@@ -5,13 +5,14 @@
 #ifndef BASE_TEST_PERF_TEST_SUITE_H_
 #define BASE_TEST_PERF_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 
 namespace base {
 
 class PerfTestSuite : public TestSuite {
  public:
-  PerfTestSuite(int argc, char** argv);
+  PerfTestSuite(int argc, base::span<char*> argv);
 
   // TODO(crbug.com/40251982): Port all perf tests to Google Benchmark and
   // eliminate gTest dependence from perf tests.
diff --git a/base/test/run_all_perftests.cc b/base/test/run_all_perftests.cc
index db45b5ed2e446..58947866e442a 100644
--- a/base/test/run_all_perftests.cc
+++ b/base/test/run_all_perftests.cc
@@ -2,8 +2,9 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/test/perf_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   return base::PerfTestSuite(argc, argv).Run();
 }
diff --git a/base/test/run_all_unittests.cc b/base/test/run_all_unittests.cc
index 486e3bbce398c..1934b1fe25744 100644
--- a/base/test/run_all_unittests.cc
+++ b/base/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/metrics/persistent_histogram_allocator.h"
 #include "base/test/launcher/unit_test_launcher.h"
@@ -48,7 +49,7 @@ class TimerCheck : public testing::EmptyTestEventListener {
 
 class BaseUnittestSuite : public TestSuite {
  public:
-  BaseUnittestSuite(int argc, char** argv) : TestSuite(argc, argv) {}
+  BaseUnittestSuite(int argc, base::span<char*> argv) : TestSuite(argc, argv) {}
 
  protected:
   void Initialize() override {
@@ -69,7 +70,7 @@ class BaseUnittestSuite : public TestSuite {
 
 }  // namespace base
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
 #if BUILDFLAG(IS_LINUX) || BUILDFLAG(IS_CHROMEOS)
   // For setproctitle unit tests.
   setproctitle_init(const_cast<const char**>(argv));
diff --git a/base/test/test_suite.cc b/base/test/test_suite.cc
index 2486fcd8ffc3d..948f5760b8c3f 100644
--- a/base/test/test_suite.cc
+++ b/base/test/test_suite.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40284755): Remove this and spanify to fix the errors.
 #pragma allow_unsafe_buffers
@@ -342,13 +344,14 @@ std::string GetStackTraceMessage() {
 
 }  // namespace
 
-int RunUnitTestsUsingBaseTestSuite(int argc, char** argv) {
+int RunUnitTestsUsingBaseTestSuite(int argc, base::span<char*> argv) {
   TestSuite test_suite(argc, argv);
   return LaunchUnitTests(argc, argv,
                          BindOnce(&TestSuite::Run, Unretained(&test_suite)));
 }
 
-TestSuite::TestSuite(int argc, char** argv) : argc_(argc), argv_(argv) {
+TestSuite::TestSuite(int argc, base::span<char*> argv)
+    : argc_(argc), argv_(argv) {
   PreInitialize();
 }
 
@@ -507,7 +510,7 @@ void TestSuite::SuppressErrorDialogs() {
 void TestSuite::Initialize() {
   DCHECK(!is_initialized_);
 
-  InitializeFromCommandLine(&argc_, argv_);
+  InitializeFromCommandLine(&argc_, argv_.data());
 
 #if GTEST_HAS_DEATH_TEST
   if (::testing::internal::InDeathTestChild() &&
diff --git a/base/test/test_suite.h b/base/test/test_suite.h
index 071110da733a4..601058984ce72 100644
--- a/base/test/test_suite.h
+++ b/base/test/test_suite.h
@@ -14,7 +14,9 @@
 
 #include "base/at_exit.h"
 #include "base/check.h"
+#include "base/containers/span.h"
 #include "base/memory/raw_ptr.h"
+#include "base/memory/raw_span.h"
 #include "base/tracing_buildflags.h"
 #include "build/build_config.h"
 
@@ -41,14 +43,14 @@ namespace base {
 class XmlUnitTestResultPrinter;
 
 // Instantiates TestSuite, runs it and returns exit code.
-int RunUnitTestsUsingBaseTestSuite(int argc, char** argv);
+int RunUnitTestsUsingBaseTestSuite(int argc, base::span<char*> argv);
 
 class TestSuite {
  public:
   // Match function used by the GetTestCount method.
   typedef bool (*TestMatch)(const testing::TestInfo&);
 
-  TestSuite(int argc, char** argv);
+  TestSuite(int argc, base::span<char*> argv);
 #if BUILDFLAG(IS_WIN)
   TestSuite(int argc, wchar_t** argv);
 #endif  // BUILDFLAG(IS_WIN)
@@ -115,7 +117,7 @@ class TestSuite {
   RAW_PTR_EXCLUSION std::vector<char*> argv_as_pointers_;
   std::vector<std::string> argv_as_strings_;
 #endif
-  raw_ptr<char*> argv_;
+  base::raw_span<char*> argv_;
 };
 
 }  // namespace base
diff --git a/cc/test/cc_test_suite.cc b/cc/test/cc_test_suite.cc
index 5cf61e57d7f39..eb23354446ac9 100644
--- a/cc/test/cc_test_suite.cc
+++ b/cc/test/cc_test_suite.cc
@@ -5,6 +5,7 @@
 #include "cc/test/cc_test_suite.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/test/task_environment.h"
 #include "base/threading/thread_id_name_manager.h"
 #include "cc/base/histograms.h"
@@ -16,7 +17,7 @@ namespace cc {
 
 std::unique_ptr<base::test::TaskEnvironment> CCTestSuite::task_environment_;
 
-CCTestSuite::CCTestSuite(int argc, char** argv)
+CCTestSuite::CCTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 CCTestSuite::~CCTestSuite() = default;
diff --git a/cc/test/cc_test_suite.h b/cc/test/cc_test_suite.h
index 4fa4a1f25b7d6..d0639fa44585a 100644
--- a/cc/test/cc_test_suite.h
+++ b/cc/test/cc_test_suite.h
@@ -7,6 +7,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/test/test_discardable_memory_allocator.h"
 #include "base/test/test_suite.h"
 
@@ -20,7 +21,7 @@ namespace cc {
 
 class CCTestSuite : public base::TestSuite {
  public:
-  CCTestSuite(int argc, char** argv);
+  CCTestSuite(int argc, base::span<char*> argv);
   CCTestSuite(const CCTestSuite&) = delete;
   ~CCTestSuite() override;
 
diff --git a/cc/test/run_all_perftests.cc b/cc/test/run_all_perftests.cc
index a68447a23ebf3..1d63609728855 100644
--- a/cc/test/run_all_perftests.cc
+++ b/cc/test/run_all_perftests.cc
@@ -2,13 +2,14 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 #include "cc/test/cc_test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   cc::CCTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/cc/test/run_all_unittests.cc b/cc/test/run_all_unittests.cc
index a97abd0bd7671..45f048156f447 100644
--- a/cc/test/run_all_unittests.cc
+++ b/cc/test/run_all_unittests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "cc/test/cc_test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   cc::CCTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/chrome/app/chrome_main.cc b/chrome/app/chrome_main.cc
index 4b8c1c89da11e..8cfe0d7175425 100644
--- a/chrome/app/chrome_main.cc
+++ b/chrome/app/chrome_main.cc
@@ -8,6 +8,7 @@
 #include <memory>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/environment.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback_helpers.h"
@@ -110,7 +111,7 @@ DLLEXPORT int __cdecl ChromeMain(HINSTANCE instance,
                                  int64_t preread_begin_ticks,
                                  int64_t preread_end_ticks) {
 #elif BUILDFLAG(IS_POSIX)
-int ChromeMain(int argc, const char** argv) {
+int ChromeMain(int argc, base::span<const char*> argv) {
 #else
 #error Unknown platform.
 #endif
@@ -165,7 +166,7 @@ int ChromeMain(int argc, const char** argv) {
   params.argv = argv;
   base::CommandLine::Init(params.argc, params.argv);
 #endif  // BUILDFLAG(IS_WIN)
-  base::CommandLine::Init(0, nullptr);
+  base::CommandLine::Init(0, {});
   [[maybe_unused]] base::CommandLine* command_line(
       base::CommandLine::ForCurrentProcess());
 
diff --git a/chrome/browser/enterprise/connectors/device_trust/key_management/installer/management_service/chrome_management_service_main.cc b/chrome/browser/enterprise/connectors/device_trust/key_management/installer/management_service/chrome_management_service_main.cc
index 34f93a162f6a4..b386928699a31 100644
--- a/chrome/browser/enterprise/connectors/device_trust/key_management/installer/management_service/chrome_management_service_main.cc
+++ b/chrome/browser/enterprise/connectors/device_trust/key_management/installer/management_service/chrome_management_service_main.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/strings/string_number_conversions.h"
 #include "base/syslog_logging.h"
 #include "base/task/single_thread_task_executor.h"
@@ -16,7 +17,7 @@
 #include "mojo/core/embedder/embedder.h"
 #include "mojo/core/embedder/scoped_ipc_support.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   auto* command_line = base::CommandLine::ForCurrentProcess();
diff --git a/chrome/browser/enterprise/watermark/example_app.cc b/chrome/browser/enterprise/watermark/example_app.cc
index 921cb621be558..f31ccad612998 100644
--- a/chrome/browser/enterprise/watermark/example_app.cc
+++ b/chrome/browser/enterprise/watermark/example_app.cc
@@ -4,12 +4,13 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/test/test_timeouts.h"
 #include "chrome/browser/enterprise/watermark/watermark_example.h"
 #include "ui/views/examples/examples_main_proc.h"
 #include "ui/views/examples/examples_window.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   // The use of base::test::TaskEnvironment in the following function relies on
   // the timeout values from TestTimeouts.
diff --git a/chrome/browser/vr/test/run_all_perftests.cc b/chrome/browser/vr/test/run_all_perftests.cc
index 833fdc1eaf45c..dcaf59f4d4c80 100644
--- a/chrome/browser/vr/test/run_all_perftests.cc
+++ b/chrome/browser/vr/test/run_all_perftests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "chrome/browser/vr/test/vr_gl_test_suite.h"
 #include "ui/gl/gl_display.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   vr::VrGlTestSuite test_suite(argc, argv);
 
   return base::LaunchUnitTestsSerially(
diff --git a/chrome/browser/vr/test/run_all_unittests.cc b/chrome/browser/vr/test/run_all_unittests.cc
index 7b642d6ba6dc9..ed500456620a4 100644
--- a/chrome/browser/vr/test/run_all_unittests.cc
+++ b/chrome/browser/vr/test/run_all_unittests.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "chrome/browser/vr/test/vr_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   vr::VrTestSuite test_suite(argc, argv);
 
   return base::LaunchUnitTests(
diff --git a/chrome/browser/vr/test/vr_gl_test_suite.cc b/chrome/browser/vr/test/vr_gl_test_suite.cc
index 13cef808e35f4..7d829dc13a4fa 100644
--- a/chrome/browser/vr/test/vr_gl_test_suite.cc
+++ b/chrome/browser/vr/test/vr_gl_test_suite.cc
@@ -4,6 +4,7 @@
 
 #include "chrome/browser/vr/test/vr_gl_test_suite.h"
 
+#include "base/containers/span.h"
 #include "ui/gl/gl_display.h"
 #include "ui/gl/gl_implementation.h"
 #include "ui/gl/test/gl_test_support.h"
@@ -15,7 +16,8 @@
 
 namespace vr {
 
-VrGlTestSuite::VrGlTestSuite(int argc, char** argv) : VrTestSuite(argc, argv) {}
+VrGlTestSuite::VrGlTestSuite(int argc, base::span<char*> argv)
+    : VrTestSuite(argc, argv) {}
 
 void VrGlTestSuite::Initialize() {
   VrTestSuite::Initialize();
diff --git a/chrome/browser/vr/test/vr_gl_test_suite.h b/chrome/browser/vr/test/vr_gl_test_suite.h
index 38a873d8e5786..f92e785d70271 100644
--- a/chrome/browser/vr/test/vr_gl_test_suite.h
+++ b/chrome/browser/vr/test/vr_gl_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef CHROME_BROWSER_VR_TEST_VR_GL_TEST_SUITE_H_
 #define CHROME_BROWSER_VR_TEST_VR_GL_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/memory/raw_ptr.h"
 #include "chrome/browser/vr/test/vr_test_suite.h"
 
@@ -16,7 +17,7 @@ namespace vr {
 
 class VrGlTestSuite : public VrTestSuite {
  public:
-  VrGlTestSuite(int argc, char** argv);
+  VrGlTestSuite(int argc, base::span<char*> argv);
   void Initialize() override;
   void Shutdown() override;
 
diff --git a/chrome/browser/vr/test/vr_test_suite.cc b/chrome/browser/vr/test/vr_test_suite.cc
index 4b7da88e41779..52fbcf4363907 100644
--- a/chrome/browser/vr/test/vr_test_suite.cc
+++ b/chrome/browser/vr/test/vr_test_suite.cc
@@ -6,6 +6,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/files/file_util.h"
 #include "base/path_service.h"
 #include "build/build_config.h"
@@ -16,7 +17,8 @@
 
 namespace vr {
 
-VrTestSuite::VrTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+VrTestSuite::VrTestSuite(int argc, base::span<char*> argv)
+    : base::TestSuite(argc, argv) {}
 
 VrTestSuite::~VrTestSuite() = default;
 
diff --git a/chrome/browser/vr/test/vr_test_suite.h b/chrome/browser/vr/test/vr_test_suite.h
index 95ba2c46c761c..74bd417a429c1 100644
--- a/chrome/browser/vr/test/vr_test_suite.h
+++ b/chrome/browser/vr/test/vr_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef CHROME_BROWSER_VR_TEST_VR_TEST_SUITE_H_
 #define CHROME_BROWSER_VR_TEST_VR_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 
 namespace content {
@@ -15,7 +16,7 @@ namespace vr {
 
 class VrTestSuite : public base::TestSuite {
  public:
-  VrTestSuite(int argc, char** argv);
+  VrTestSuite(int argc, base::span<char*> argv);
 
   VrTestSuite(const VrTestSuite&) = delete;
   VrTestSuite& operator=(const VrTestSuite&) = delete;
diff --git a/chrome/browser/web_applications/isolated_web_apps/update_manifest/update_manifest_fuzzer.cc b/chrome/browser/web_applications/isolated_web_apps/update_manifest/update_manifest_fuzzer.cc
index caa4eaedf5eec..e995a6e068b36 100644
--- a/chrome/browser/web_applications/isolated_web_apps/update_manifest/update_manifest_fuzzer.cc
+++ b/chrome/browser/web_applications/isolated_web_apps/update_manifest/update_manifest_fuzzer.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/i18n/icu_util.h"
 #include "base/json/json_reader.h"
 #include "base/logging.h"
@@ -30,7 +31,7 @@ class Environment {
     CHECK(base::i18n::InitializeICU());
     // Parsing URLs requires command line to be available.
     // See https://crbug.com/386688712
-    base::CommandLine::Init(/*argc=*/0, /*argv=*/nullptr);
+    base::CommandLine::Init(/*argc=*/0, /*argv=*/{});
   }
   // Required by ICU integration according to several other fuzzer environments.
   // TODO(pbos): Consider breaking out this fuzzer environment to something
diff --git a/chrome/enterprise_companion/enterprise_companion.cc b/chrome/enterprise_companion/enterprise_companion.cc
index 51a4f8c37191a..bdee325320b75 100644
--- a/chrome/enterprise_companion/enterprise_companion.cc
+++ b/chrome/enterprise_companion/enterprise_companion.cc
@@ -11,6 +11,7 @@
 #include "base/at_exit.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/logging.h"
@@ -140,7 +141,7 @@ std::string OperatingSystemVersion() {
 
 }  // namespace
 
-int EnterpriseCompanionMain(int argc, const char* const* argv) {
+int EnterpriseCompanionMain(int argc, base::span<const char* const> argv) {
   base::CommandLine::Init(argc, argv);
   base::CommandLine* command_line = base::CommandLine::ForCurrentProcess();
   InitLogging();
diff --git a/chrome/enterprise_companion/enterprise_companion.h b/chrome/enterprise_companion/enterprise_companion.h
index 6216ffc7c900a..848b597a8d09c 100644
--- a/chrome/enterprise_companion/enterprise_companion.h
+++ b/chrome/enterprise_companion/enterprise_companion.h
@@ -7,11 +7,12 @@
 
 #include <optional>
 
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 
 namespace enterprise_companion {
 
-int EnterpriseCompanionMain(int argc, const char* const* argv);
+int EnterpriseCompanionMain(int argc, base::span<const char* const> argv);
 
 std::optional<base::FilePath> GetLogFilePath();
 
diff --git a/chrome/enterprise_companion/main.cc b/chrome/enterprise_companion/main.cc
index 6ee0d078e4003..4d6397a3bd9c9 100644
--- a/chrome/enterprise_companion/main.cc
+++ b/chrome/enterprise_companion/main.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "chrome/enterprise_companion/enterprise_companion.h"
 
@@ -35,7 +36,7 @@ void MaybeAllowCheckIsTest() {
 }
 
 #if BUILDFLAG(IS_POSIX)
-int main(int argc, const char* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   MaybeAllowCheckIsTest();
   return enterprise_companion::EnterpriseCompanionMain(argc, argv);
 }
diff --git a/chrome/enterprise_companion/test/run_all_integration_tests.cc b/chrome/enterprise_companion/test/run_all_integration_tests.cc
index 0d39405f3a51c..155517224ad95 100644
--- a/chrome/enterprise_companion/test/run_all_integration_tests.cc
+++ b/chrome/enterprise_companion/test/run_all_integration_tests.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -44,7 +46,7 @@ std::optional<base::FilePath> GetLogFilePath() {
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   base::CommandLine* command_line = base::CommandLine::ForCurrentProcess();
   if (!command_line->HasSwitch(enterprise_companion::kLoggingModuleSwitch)) {
diff --git a/chrome/enterprise_companion/test/run_all_unittests.cc b/chrome/enterprise_companion/test/run_all_unittests.cc
index c453e67b30faa..d8c476298460b 100644
--- a/chrome/enterprise_companion/test/run_all_unittests.cc
+++ b/chrome/enterprise_companion/test/run_all_unittests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/logging.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   logging::InitLogging({.logging_dest = logging::LOG_TO_STDERR});
   logging::SetLogItems(/*enable_process_id=*/true,
                        /*enable_thread_id=*/true,
diff --git a/chrome/enterprise_companion/test/test_crashpad_embedder.cc b/chrome/enterprise_companion/test/test_crashpad_embedder.cc
index 29d3982e9216b..b07a5f2f8f4e9 100644
--- a/chrome/enterprise_companion/test/test_crashpad_embedder.cc
+++ b/chrome/enterprise_companion/test/test_crashpad_embedder.cc
@@ -5,6 +5,7 @@
 #include "base/at_exit.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/notreached.h"
 #include "build/build_config.h"
@@ -20,7 +21,7 @@ namespace enterprise_companion {
 namespace {
 constexpr char kCrashDatabaseSwitch[] = "crash-database-path";
 
-int TestCrashpadEmbedderMain(int argc, const char* const* argv) {
+int TestCrashpadEmbedderMain(int argc, base::span<const char* const> argv) {
   base::CommandLine::Init(argc, argv);
   base::CommandLine* command_line = base::CommandLine::ForCurrentProcess();
   command_line->AppendSwitchASCII(kLoggingModuleSwitch, "*=2");
@@ -46,7 +47,7 @@ int TestCrashpadEmbedderMain(int argc, const char* const* argv) {
 }  // namespace enterprise_companion
 
 #if BUILDFLAG(IS_POSIX)
-int main(int argc, const char* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   return enterprise_companion::TestCrashpadEmbedderMain(argc, argv);
 }
 #elif BUILDFLAG(IS_WIN)
diff --git a/chrome/test/base/browser_perf_tests_main.cc b/chrome/test/base/browser_perf_tests_main.cc
index f4750562a4187..b567d72b19d60 100644
--- a/chrome/test/base/browser_perf_tests_main.cc
+++ b/chrome/test/base/browser_perf_tests_main.cc
@@ -3,10 +3,11 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "chrome/test/base/chrome_test_launcher.h"
 #include "chrome/test/base/chrome_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   // Always run browser perf tests serially - parallel running would be less
diff --git a/chrome/test/base/browser_tests_main.cc b/chrome/test/base/browser_tests_main.cc
index aa544644664a3..8e6a3f8a23820 100644
--- a/chrome/test/base/browser_tests_main.cc
+++ b/chrome/test/base/browser_tests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/test/launcher/test_launcher.h"
 #include "base/test/test_switches.h"
 #include "build/build_config.h"
@@ -16,7 +17,7 @@
 #include "base/win/win_util.h"
 #endif  // BUILDFLAG(IS_WIN)
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   size_t parallel_jobs = base::NumParallelJobs(/*cores_per_job=*/2);
   if (parallel_jobs == 0U) {
diff --git a/chrome/test/base/chrome_test_launcher.cc b/chrome/test/base/chrome_test_launcher.cc
index 7f2d9bb16d2bd..62d44e017736c 100644
--- a/chrome/test/base/chrome_test_launcher.cc
+++ b/chrome/test/base/chrome_test_launcher.cc
@@ -11,6 +11,7 @@
 
 #include "base/base_paths.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/debug/leak_annotations.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
@@ -101,7 +102,7 @@ int ChromeTestSuiteRunner::RunTestSuiteInternal(ChromeTestSuite* test_suite) {
   return test_suite->Run();
 }
 
-int ChromeTestSuiteRunner::RunTestSuite(int argc, char** argv) {
+int ChromeTestSuiteRunner::RunTestSuite(int argc, base::span<char*> argv) {
   ChromeTestSuite test_suite(argc, argv);
   return RunTestSuiteInternal(&test_suite);
 }
@@ -151,7 +152,7 @@ ChromeTestLauncherDelegate::ChromeTestLauncherDelegate(
     : runner_(runner) {}
 ChromeTestLauncherDelegate::~ChromeTestLauncherDelegate() = default;
 
-int ChromeTestLauncherDelegate::RunTestSuite(int argc, char** argv) {
+int ChromeTestLauncherDelegate::RunTestSuite(int argc, base::span<char*> argv) {
   return runner_->RunTestSuite(argc, argv);
 }
 
@@ -276,7 +277,7 @@ void ChromeTestLauncherDelegate::OnDoneRunningTests() {
 int LaunchChromeTests(size_t parallel_jobs,
                       content::TestLauncherDelegate* delegate,
                       int argc,
-                      char** argv) {
+                      base::span<char*> argv) {
   base::test::AllowCheckIsTestForTesting();
 
 #if BUILDFLAG(IS_MAC)
diff --git a/chrome/test/base/chrome_test_launcher.h b/chrome/test/base/chrome_test_launcher.h
index 0e9ebb53f8f50..b5c134c4367b6 100644
--- a/chrome/test/base/chrome_test_launcher.h
+++ b/chrome/test/base/chrome_test_launcher.h
@@ -8,6 +8,7 @@
 #include <memory>
 #include <string>
 
+#include "base/containers/span.h"
 #include "base/memory/raw_ptr.h"
 #include "base/time/time.h"
 #include "build/build_config.h"
@@ -31,7 +32,7 @@ class ChromeTestSuiteRunner {
   ChromeTestSuiteRunner& operator=(const ChromeTestSuiteRunner&) = delete;
   virtual ~ChromeTestSuiteRunner() = default;
 
-  virtual int RunTestSuite(int argc, char** argv);
+  virtual int RunTestSuite(int argc, base::span<char*> argv);
 
  protected:
   static int RunTestSuiteInternal(ChromeTestSuite* test_suite);
@@ -73,7 +74,7 @@ class ChromeTestLauncherDelegate : public content::TestLauncherDelegate {
 
  protected:
   // content::TestLauncherDelegate:
-  int RunTestSuite(int argc, char** argv) override;
+  int RunTestSuite(int argc, base::span<char*> argv) override;
   std::string GetUserDataDirectoryCommandLineSwitch() override;
 #if !BUILDFLAG(IS_ANDROID)
   content::ContentMainDelegate* CreateContentMainDelegate() override;
@@ -97,6 +98,6 @@ class ChromeTestLauncherDelegate : public content::TestLauncherDelegate {
 int LaunchChromeTests(size_t parallel_jobs,
                       content::TestLauncherDelegate* delegate,
                       int argc,
-                      char** argv);
+                      base::span<char*> argv);
 
 #endif  // CHROME_TEST_BASE_CHROME_TEST_LAUNCHER_H_
diff --git a/chrome/test/base/chrome_test_suite.cc b/chrome/test/base/chrome_test_suite.cc
index 8637c35030fee..110381c96e6b2 100644
--- a/chrome/test/base/chrome_test_suite.cc
+++ b/chrome/test/base/chrome_test_suite.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -61,9 +63,8 @@ bool IsCrosPythonProcess() {
 
 }  // namespace
 
-ChromeTestSuite::ChromeTestSuite(int argc, char** argv)
-    : content::ContentTestSuiteBase(argc, argv) {
-}
+ChromeTestSuite::ChromeTestSuite(int argc, base::span<char*> argv)
+    : content::ContentTestSuiteBase(argc, argv) {}
 
 ChromeTestSuite::~ChromeTestSuite() = default;
 
diff --git a/chrome/test/base/chrome_test_suite.h b/chrome/test/base/chrome_test_suite.h
index 87ec679d62756..a88875815d236 100644
--- a/chrome/test/base/chrome_test_suite.h
+++ b/chrome/test/base/chrome_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef CHROME_TEST_BASE_CHROME_TEST_SUITE_H_
 #define CHROME_TEST_BASE_CHROME_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "build/build_config.h"
 #include "content/public/test/content_test_suite_base.h"
@@ -17,7 +18,7 @@
 // See also ChromeUnitTestSuite for additional services created for unit tests.
 class ChromeTestSuite : public content::ContentTestSuiteBase {
  public:
-  ChromeTestSuite(int argc, char** argv);
+  ChromeTestSuite(int argc, base::span<char*> argv);
   ChromeTestSuite(const ChromeTestSuite&) = delete;
   ChromeTestSuite& operator=(const ChromeTestSuite&) = delete;
   ~ChromeTestSuite() override;
diff --git a/chrome/test/base/chrome_unit_test_suite.cc b/chrome/test/base/chrome_unit_test_suite.cc
index ce152c0bf4ef8..a6e1fd0dcf174 100644
--- a/chrome/test/base/chrome_unit_test_suite.cc
+++ b/chrome/test/base/chrome_unit_test_suite.cc
@@ -6,6 +6,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/environment.h"
 #include "base/path_service.h"
 #include "base/power_monitor/power_monitor.h"
@@ -116,7 +117,7 @@ class ChromeUnitTestSuiteInitializer : public testing::EmptyTestEventListener {
 
 }  // namespace
 
-ChromeUnitTestSuite::ChromeUnitTestSuite(int argc, char** argv)
+ChromeUnitTestSuite::ChromeUnitTestSuite(int argc, base::span<char*> argv)
     : ChromeTestSuite(argc, argv) {}
 
 void ChromeUnitTestSuite::Initialize() {
diff --git a/chrome/test/base/chrome_unit_test_suite.h b/chrome/test/base/chrome_unit_test_suite.h
index c67356e3bdb3f..d5aad80dfced7 100644
--- a/chrome/test/base/chrome_unit_test_suite.h
+++ b/chrome/test/base/chrome_unit_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef CHROME_TEST_BASE_CHROME_UNIT_TEST_SUITE_H_
 #define CHROME_TEST_BASE_CHROME_UNIT_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_discardable_memory_allocator.h"
 #include "chrome/test/base/chrome_test_suite.h"
 
@@ -12,7 +13,7 @@
 // needed for browser tests (e.g. a TestingBrowserProcess).
 class ChromeUnitTestSuite : public ChromeTestSuite {
  public:
-  ChromeUnitTestSuite(int argc, char** argv);
+  ChromeUnitTestSuite(int argc, base::span<char*> argv);
   ChromeUnitTestSuite(const ChromeUnitTestSuite&) = delete;
   ChromeUnitTestSuite& operator=(const ChromeUnitTestSuite&) = delete;
   ~ChromeUnitTestSuite() override = default;
diff --git a/chrome/test/base/interactive_ui_tests_main.cc b/chrome/test/base/interactive_ui_tests_main.cc
index 55074a4d10f54..071010399dfd5 100644
--- a/chrome/test/base/interactive_ui_tests_main.cc
+++ b/chrome/test/base/interactive_ui_tests_main.cc
@@ -5,6 +5,7 @@
 #include <memory>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/memory/discardable_memory_allocator.h"
 #include "base/test/launcher/test_launcher.h"
 #include "base/test/test_discardable_memory_allocator.h"
@@ -38,7 +39,8 @@
 
 class InteractiveUITestSuite : public ChromeTestSuite {
  public:
-  InteractiveUITestSuite(int argc, char** argv) : ChromeTestSuite(argc, argv) {}
+  InteractiveUITestSuite(int argc, base::span<char*> argv)
+      : ChromeTestSuite(argc, argv) {}
   ~InteractiveUITestSuite() override = default;
 
  protected:
@@ -144,13 +146,13 @@ class InteractiveUITestLauncherDelegate : public ChromeTestLauncherDelegate {
 
 class InteractiveUITestSuiteRunner : public ChromeTestSuiteRunner {
  public:
-  int RunTestSuite(int argc, char** argv) override {
+  int RunTestSuite(int argc, base::span<char*> argv) override {
     InteractiveUITestSuite test_suite(argc, argv);
     return RunTestSuiteInternal(&test_suite);
   }
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
 #if BUILDFLAG(IS_CHROMEOS) && defined(MEMORY_SANITIZER)
diff --git a/chrome/test/base/run_all_unittests.cc b/chrome/test/base/run_all_unittests.cc
index a505496155ac9..fb6a3925202ee 100644
--- a/chrome/test/base/run_all_unittests.cc
+++ b/chrome/test/base/run_all_unittests.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_io_thread.h"
@@ -49,7 +50,7 @@ CreateContentClients() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::PlatformThread::SetName("MainThread");
 
   content::UnitTestTestSuite test_suite(
diff --git a/chrome/test/chromedriver/server/chromedriver_server.cc b/chrome/test/chromedriver/server/chromedriver_server.cc
index 013ff0fc9eedc..541acb71c6428 100644
--- a/chrome/test/chromedriver/server/chromedriver_server.cc
+++ b/chrome/test/chromedriver/server/chromedriver_server.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -296,7 +298,7 @@ void RunServer(uint16_t port,
 
 }  // namespace
 
-int main(int argc, char *argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   base::AtExitManager at_exit;
diff --git a/chrome/updater/linux/main.cc b/chrome/updater/linux/main.cc
index 88e6c195b7a3b..30b8846924faa 100644
--- a/chrome/updater/linux/main.cc
+++ b/chrome/updater/linux/main.cc
@@ -2,8 +2,9 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "chrome/updater/updater.h"
 
-int main(int argc, const char* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   return updater::UpdaterMain(argc, argv);
 }
diff --git a/chrome/updater/test/integration_tests_helper.cc b/chrome/updater/test/integration_tests_helper.cc
index a552a229bbacb..1fb25315face1 100644
--- a/chrome/updater/test/integration_tests_helper.cc
+++ b/chrome/updater/test/integration_tests_helper.cc
@@ -11,6 +11,7 @@
 #include "base/at_exit.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback.h"
@@ -572,7 +573,7 @@ class TersePrinter : public EmptyTestEventListener {
   void OnTestEnd(const TestInfo& /*test_info*/) override {}
 };
 
-int IntegrationTestsHelperMain(int argc, char** argv) {
+int IntegrationTestsHelperMain(int argc, base::span<char*> argv) {
   base::PlatformThread::SetName("IntegrationTestsHelperMain");
   base::CommandLine::Init(argc, argv);
 
@@ -617,6 +618,6 @@ TEST(TestHelperCommandRunner, Run) {
 // must occur within the scope of a unit test of a gtest program. The test
 // helper defines a unit test "TestHelperCommandRunner.Run", which runs the
 // actual test command. Returns 0 if the test command succeeded.
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   return updater::test::IntegrationTestsHelperMain(argc, argv);
 }
diff --git a/chrome/updater/test/run_all_unittests.cc b/chrome/updater/test/run_all_unittests.cc
index 7b3d83ba0f862..9a2b11eb97dce 100644
--- a/chrome/updater/test/run_all_unittests.cc
+++ b/chrome/updater/test/run_all_unittests.cc
@@ -8,6 +8,7 @@
 #include "base/base_paths.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/logging.h"
@@ -173,13 +174,13 @@ void SkipFallbackNetworkFetcher() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   absl::Cleanup reset_command_line = &base::CommandLine::Reset;
 
   // Change the test timeout defaults if the command line arguments to override
   // them are not present.
-  MaybeIncreaseTestTimeouts(argc, argv);
+  MaybeIncreaseTestTimeouts(argc, argv.data());
 
   // To make setting up network response expectations easier in test, just
   // disable fallback fetcher altogether within this process.
diff --git a/chrome/updater/updater.cc b/chrome/updater/updater.cc
index 31cdf73bbb397..22aec2772e441 100644
--- a/chrome/updater/updater.cc
+++ b/chrome/updater/updater.cc
@@ -10,6 +10,7 @@
 #include "base/at_exit.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback_helpers.h"
@@ -299,7 +300,7 @@ void EnableLoggingByDefault() {
 
 }  // namespace
 
-int UpdaterMain(int argc, const char* const* argv) {
+int UpdaterMain(int argc, base::span<const char* const> argv) {
 #if BUILDFLAG(IS_WIN)
   CHECK(EnableSecureDllLoading());
   EnableProcessHeapMetadataProtection();
diff --git a/chrome/updater/updater.h b/chrome/updater/updater.h
index 06db6550faeca..8a09bc608ea66 100644
--- a/chrome/updater/updater.h
+++ b/chrome/updater/updater.h
@@ -5,9 +5,11 @@
 #ifndef CHROME_UPDATER_UPDATER_H_
 #define CHROME_UPDATER_UPDATER_H_
 
+#include "base/containers/span.h"
+
 namespace updater {
 
-int UpdaterMain(int argc, const char* const* argv);
+int UpdaterMain(int argc, base::span<const char* const> argv);
 
 }  // namespace updater
 
diff --git a/codelabs/cpp101/solutions/factor.cc b/codelabs/cpp101/solutions/factor.cc
index fd7ccbbb71a61..c162bfee65322 100644
--- a/codelabs/cpp101/solutions/factor.cc
+++ b/codelabs/cpp101/solutions/factor.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/logging.h"
 #include "base/run_loop.h"
@@ -47,7 +48,7 @@ void PrintStatusUpdateRepeatedly(base::TimeTicks start_time,
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   TestTimeouts::Initialize();
diff --git a/codelabs/cpp101/solutions/hello_world.cc b/codelabs/cpp101/solutions/hello_world.cc
index 35bf2e5363544..4a955601be7ec 100644
--- a/codelabs/cpp101/solutions/hello_world.cc
+++ b/codelabs/cpp101/solutions/hello_world.cc
@@ -7,9 +7,10 @@
 #include <string>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   CHECK(base::CommandLine::Init(argc, argv));
 
   const base::CommandLine& command_line =
@@ -27,4 +28,4 @@ int main(int argc, char* argv[]) {
 
   CHECK_GT(printf("%s, %s!\n", greeting.c_str(), name.c_str()), 0);
   LOG(INFO) << greeting << ", " << name << "!";
-}
\ No newline at end of file
+}
diff --git a/codelabs/cpp101/solutions/mojo.cc b/codelabs/cpp101/solutions/mojo.cc
index 55a780614821c..3fd6dc503dea9 100644
--- a/codelabs/cpp101/solutions/mojo.cc
+++ b/codelabs/cpp101/solutions/mojo.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/logging.h"
 #include "base/strings/string_number_conversions.h"
@@ -16,7 +17,7 @@
 #include "mojo/core/embedder/embedder.h"
 #include "mojo/public/cpp/bindings/remote.h"
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   TestTimeouts::Initialize();
diff --git a/codelabs/cpp101/solutions/sleep.cc b/codelabs/cpp101/solutions/sleep.cc
index b82310eb622ff..46b19e7af3b26 100644
--- a/codelabs/cpp101/solutions/sleep.cc
+++ b/codelabs/cpp101/solutions/sleep.cc
@@ -4,6 +4,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/logging.h"
 #include "base/run_loop.h"
@@ -13,7 +14,7 @@
 #include "base/test/test_timeouts.h"
 #include "base/time/time.h"
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   TestTimeouts::Initialize();
diff --git a/codelabs/mojo_examples/01-multi-process/browser.cc b/codelabs/mojo_examples/01-multi-process/browser.cc
index 8c9568a08a9bf..5e1aaceff23b5 100644
--- a/codelabs/mojo_examples/01-multi-process/browser.cc
+++ b/codelabs/mojo_examples/01-multi-process/browser.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/process/launch.h"
 #include "base/run_loop.h"
@@ -59,7 +60,7 @@ void CreateProcessRemote(mojo::ScopedMessagePipeHandle pipe) {
   remote->SayHello();
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   LOG(INFO) << "'Browser process' starting up";
   base::CommandLine::Init(argc, argv);
   ProcessBootstrapper bootstrapper;
diff --git a/codelabs/mojo_examples/01-multi-process/renderer.cc b/codelabs/mojo_examples/01-multi-process/renderer.cc
index a247ae3e136e0..92c04d2c311c0 100644
--- a/codelabs/mojo_examples/01-multi-process/renderer.cc
+++ b/codelabs/mojo_examples/01-multi-process/renderer.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/run_loop.h"
 #include "codelabs/mojo_examples/mojom/interface.mojom.h"
@@ -42,7 +43,7 @@ void BindProcessImpl(mojo::ScopedMessagePipeHandle pipe) {
   g_process_impl = new ProcessImpl(std::move(pending_receiver));
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   // Logging the entire command line shows all of the information that the
   // browser seeded the renderer with. Notably, this includes the mojo platform
diff --git a/codelabs/mojo_examples/02-associated-interface-freezing/browser.cc b/codelabs/mojo_examples/02-associated-interface-freezing/browser.cc
index ebf13c9c270be..1372d6504f890 100644
--- a/codelabs/mojo_examples/02-associated-interface-freezing/browser.cc
+++ b/codelabs/mojo_examples/02-associated-interface-freezing/browser.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/process/launch.h"
 #include "base/run_loop.h"
@@ -75,7 +76,7 @@ void CreateProcessRemote(mojo::ScopedMessagePipeHandle pipe) {
   remote_b->DoB();
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   LOG(INFO) << "Browser process starting up";
   base::CommandLine::Init(argc, argv);
 
diff --git a/codelabs/mojo_examples/02-associated-interface-freezing/renderer.cc b/codelabs/mojo_examples/02-associated-interface-freezing/renderer.cc
index 388527c5cc625..df96a647a307c 100644
--- a/codelabs/mojo_examples/02-associated-interface-freezing/renderer.cc
+++ b/codelabs/mojo_examples/02-associated-interface-freezing/renderer.cc
@@ -5,6 +5,7 @@
 #include <memory>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/run_loop.h"
 #include "base/task/sequence_manager/task_queue.h"
 #include "codelabs/mojo_examples/mojo_impls.h"
@@ -83,7 +84,7 @@ class CustomTaskQueue : public base::RefCounted<CustomTaskQueue> {
   std::unique_ptr<base::sequence_manager::TaskQueue::QueueEnabledVoter> voter_;
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   LOG(INFO) << "Renderer: "
             << base::CommandLine::ForCurrentProcess()->GetCommandLineString();
diff --git a/codelabs/mojo_examples/03-channel-associated-interface-freezing/browser.cc b/codelabs/mojo_examples/03-channel-associated-interface-freezing/browser.cc
index 2785463921916..13169a63711a9 100644
--- a/codelabs/mojo_examples/03-channel-associated-interface-freezing/browser.cc
+++ b/codelabs/mojo_examples/03-channel-associated-interface-freezing/browser.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/message_loop/message_pump.h"
 #include "base/notreached.h"
@@ -128,7 +129,7 @@ class BrowserIPCListener : public IPC::Listener {
   std::unique_ptr<IPC::ChannelProxy> channel_proxy_;
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   LOG(INFO) << "Browser process starting up";
   base::CommandLine::Init(argc, argv);
 
diff --git a/codelabs/mojo_examples/03-channel-associated-interface-freezing/renderer.cc b/codelabs/mojo_examples/03-channel-associated-interface-freezing/renderer.cc
index bb3826180439d..3231dc2ee373b 100644
--- a/codelabs/mojo_examples/03-channel-associated-interface-freezing/renderer.cc
+++ b/codelabs/mojo_examples/03-channel-associated-interface-freezing/renderer.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/run_loop.h"
 #include "base/task/sequence_manager/sequence_manager.h"
 #include "base/task/sequence_manager/task_queue.h"
@@ -126,7 +127,7 @@ class RendererIPCListener : public IPC::Listener {
   scoped_refptr<base::SingleThreadTaskRunner> initially_frozen_task_runner_;
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   LOG(INFO) << "Renderer: "
diff --git a/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/browser.cc b/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/browser.cc
index 72722cb5d27ca..9f4f8e2e0cd72 100644
--- a/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/browser.cc
+++ b/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/browser.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/message_loop/message_pump.h"
 #include "base/notreached.h"
@@ -115,7 +116,7 @@ class BrowserIPCListener : public IPC::Listener {
   std::unique_ptr<IPC::ChannelProxy> channel_proxy_;
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   LOG(INFO) << "Browser process starting up";
   base::CommandLine::Init(argc, argv);
 
diff --git a/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/renderer.cc b/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/renderer.cc
index bb6492a5ec036..cc6f689814e20 100644
--- a/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/renderer.cc
+++ b/codelabs/mojo_examples/04-legacy-ipc-with-sepearate-remote/renderer.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/run_loop.h"
 #include "base/task/sequence_manager/sequence_manager.h"
 #include "base/task/sequence_manager/task_queue.h"
@@ -162,7 +163,7 @@ class RendererIPCListener : public IPC::Listener {
   scoped_refptr<base::SingleThreadTaskRunner> initially_frozen_task_runner_;
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   LOG(INFO) << "Renderer: "
diff --git a/components/cronet/run_all_unittests.cc b/components/cronet/run_all_unittests.cc
index 9ede5cf72d481..3762f0d25b9a8 100644
--- a/components/cronet/run_all_unittests.cc
+++ b/components/cronet/run_all_unittests.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 #if defined(CRONET_TESTS_IMPLEMENTATION)
   // cronet_tests[_android] link the Cronet implementation into the test
diff --git a/components/ip_protection/test/run_all_unittests.cc b/components/ip_protection/test/run_all_unittests.cc
index cd8efb24688ed..aec1b23edb6ab 100644
--- a/components/ip_protection/test/run_all_unittests.cc
+++ b/components/ip_protection/test/run_all_unittests.cc
@@ -2,13 +2,14 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "content/public/test/unittest_test_suite.h"
 #include "content/test/content_test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   content::UnitTestTestSuite test_suite(
       new content::ContentTestSuite(argc, argv),
       base::BindRepeating(content::UnitTestTestSuite::CreateTestContentClients),
diff --git a/components/metrics/metrics_log_unittest.cc b/components/metrics/metrics_log_unittest.cc
index a1bf7cf7b4450..0657007a9b8e1 100644
--- a/components/metrics/metrics_log_unittest.cc
+++ b/components/metrics/metrics_log_unittest.cc
@@ -11,6 +11,7 @@
 
 #include "base/base64.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/memory/ptr_util.h"
 #include "base/metrics/bucket_ranges.h"
 #include "base/metrics/sample_vector.h"
@@ -257,7 +258,7 @@ TEST_F(MetricsLogTest, BasicRecord) {
   // Clears existing command line flags and sets mock flags:
   // "--mock-flag-1 --mock-flag-2=unused_value"
   // Hashes of these flags should be populated on the system_profile field.
-  command_line->InitFromArgv(0, nullptr);
+  command_line->InitFromArgv(0, {});
   command_line->AppendSwitch("mock-flag-1");
   command_line->AppendSwitchASCII("mock-flag-2", "unused_value");
 
diff --git a/components/miracle_parameter/common/public/miracle_parameter_unittest.cc b/components/miracle_parameter/common/public/miracle_parameter_unittest.cc
index 8468a8eb01d34..d0f760cbbf7fd 100644
--- a/components/miracle_parameter/common/public/miracle_parameter_unittest.cc
+++ b/components/miracle_parameter/common/public/miracle_parameter_unittest.cc
@@ -5,6 +5,7 @@
 #include "components/miracle_parameter/common/public/miracle_parameter.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/metrics/field_trial.h"
 #include "base/metrics/field_trial_param_associator.h"
@@ -40,7 +41,7 @@ class ScopedNullCommandLineOverride {
   ScopedNullCommandLineOverride& operator=(
       const ScopedNullCommandLineOverride&) = delete;
   ~ScopedNullCommandLineOverride() {
-    base::CommandLine::Init(0, nullptr);
+    base::CommandLine::Init(0, {});
     base::CommandLine::ForCurrentProcess()->InitFromArgv(process_args_);
   }
 
diff --git a/components/test/components_test_suite.cc b/components/test/components_test_suite.cc
index e8ae20df172c8..0e21f86e2f03b 100644
--- a/components/test/components_test_suite.cc
+++ b/components/test/components_test_suite.cc
@@ -9,6 +9,7 @@
 
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
@@ -47,7 +48,8 @@ const char* const kNonWildcardDomainNonPortSchemes[] = {
 
 class ComponentsTestSuite : public base::TestSuite {
  public:
-  ComponentsTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  ComponentsTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
   ComponentsTestSuite(const ComponentsTestSuite&) = delete;
   ComponentsTestSuite& operator=(const ComponentsTestSuite&) = delete;
 
diff --git a/components/test/run_all_perftests.cc b/components/test/run_all_perftests.cc
index a255284cdb64d..3b0b4fdb85ebd 100644
--- a/components/test/run_all_perftests.cc
+++ b/components/test/run_all_perftests.cc
@@ -2,9 +2,10 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "components/test/components_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   return base::LaunchUnitTestsSerially(argc, argv,
-                                       GetLaunchCallback(argc, argv));
+                                       GetLaunchCallback(argc, argv.data()));
 }
diff --git a/components/test/run_all_unittests.cc b/components/test/run_all_unittests.cc
index 19a738bf5295e..e5d0e27d85401 100644
--- a/components/test/run_all_unittests.cc
+++ b/components/test/run_all_unittests.cc
@@ -2,8 +2,10 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "components/test/components_test_suite.h"
 
-int main(int argc, char** argv) {
-  return base::LaunchUnitTests(argc, argv, GetLaunchCallback(argc, argv));
+int main(int argc, base::span<char*> argv) {
+  return base::LaunchUnitTests(argc, argv,
+                               GetLaunchCallback(argc, argv.data()));
 }
diff --git a/components/url_formatter/spoof_checks/top_domains/make_top_domain_list_variables.cc b/components/url_formatter/spoof_checks/top_domains/make_top_domain_list_variables.cc
index 5547841ef2d1d..c0fa0e72b7e27 100644
--- a/components/url_formatter/spoof_checks/top_domains/make_top_domain_list_variables.cc
+++ b/components/url_formatter/spoof_checks/top_domains/make_top_domain_list_variables.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -84,7 +86,7 @@ bool ContainsOnlyDigits(const std::string& text) {
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   const base::CommandLine& command_line =
       *base::CommandLine::ForCurrentProcess();
diff --git a/components/url_formatter/spoof_checks/top_domains/top_domain_generator.cc b/components/url_formatter/spoof_checks/top_domains/top_domain_generator.cc
index 1efcbbfd21cfa..bb9c38bf80d20 100644
--- a/components/url_formatter/spoof_checks/top_domains/top_domain_generator.cc
+++ b/components/url_formatter/spoof_checks/top_domains/top_domain_generator.cc
@@ -16,6 +16,7 @@
 #include <vector>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_util.h"
 #include "base/i18n/icu_util.h"
 #include "base/logging.h"
@@ -84,7 +85,7 @@ std::unique_ptr<TopDomainEntry> MakeEntry(
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   const base::CommandLine& command_line =
       *base::CommandLine::ForCurrentProcess();
diff --git a/components/viz/demo/demo_main.cc b/components/viz/demo/demo_main.cc
index dc70376ee1dfb..a0fcbab997db9 100644
--- a/components/viz/demo/demo_main.cc
+++ b/components/viz/demo/demo_main.cc
@@ -7,6 +7,7 @@
 #include "base/at_exit.h"
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/i18n/icu_util.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/run_loop.h"
@@ -42,7 +43,7 @@ namespace {
 // Initializes and owns the components from base necessary to run the app.
 class InitBase {
  public:
-  InitBase(int argc, char** argv) {
+  InitBase(int argc, base::span<char*> argv) {
     base::CommandLine::Init(argc, argv);
     base::i18n::InitializeICU();
     base::ThreadPoolInstance::CreateAndStartWithDefaultParams("demo");
@@ -210,7 +211,7 @@ static void SetupOzone(base::WaitableEvent* done) {
   done->Signal();
 }
 
-void InitFeatureList(int argc, char** argv) {
+void InitFeatureList(int argc, base::span<char*> argv) {
   base::CommandLine command_line(argc, argv);
   auto feature_list = std::make_unique<base::FeatureList>();
   feature_list->InitFromCommandLine(
@@ -222,7 +223,7 @@ void InitFeatureList(int argc, char** argv) {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
 #if BUILDFLAG(IS_OZONE)
   InitFeatureList(argc, argv);
 #endif
diff --git a/components/viz/test/run_all_perftests.cc b/components/viz/test/run_all_perftests.cc
index e3c55815278cb..17b7459e0d274 100644
--- a/components/viz/test/run_all_perftests.cc
+++ b/components/viz/test/run_all_perftests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "components/viz/test/test_gpu_service_holder.h"
@@ -9,7 +10,7 @@
 #include "mojo/core/embedder/embedder.h"
 #include "skia/ext/event_tracer_impl.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   viz::VizTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/components/viz/test/run_all_unittests.cc b/components/viz/test/run_all_unittests.cc
index 1103279e21bd1..3670ec7195bef 100644
--- a/components/viz/test/run_all_unittests.cc
+++ b/components/viz/test/run_all_unittests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "components/viz/test/viz_test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   viz::VizTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/components/viz/test/viz_test_suite.cc b/components/viz/test/viz_test_suite.cc
index 8902260f1468e..ff57e111b0002 100644
--- a/components/viz/test/viz_test_suite.cc
+++ b/components/viz/test/viz_test_suite.cc
@@ -4,6 +4,7 @@
 
 #include "components/viz/test/viz_test_suite.h"
 
+#include "base/containers/span.h"
 #include "base/threading/thread_id_name_manager.h"
 #include "components/viz/test/paths.h"
 #include "ui/events/platform/platform_event_source.h"
@@ -13,7 +14,7 @@ namespace viz {
 
 std::unique_ptr<base::test::TaskEnvironment> VizTestSuite::task_environment_;
 
-VizTestSuite::VizTestSuite(int argc, char** argv)
+VizTestSuite::VizTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 VizTestSuite::~VizTestSuite() = default;
diff --git a/components/viz/test/viz_test_suite.h b/components/viz/test/viz_test_suite.h
index a8646ec54efa8..2398786282004 100644
--- a/components/viz/test/viz_test_suite.h
+++ b/components/viz/test/viz_test_suite.h
@@ -7,6 +7,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/test/task_environment.h"
 #include "base/test/test_discardable_memory_allocator.h"
 #include "base/test/test_suite.h"
@@ -19,7 +20,7 @@ namespace viz {
 
 class VizTestSuite : public base::TestSuite {
  public:
-  VizTestSuite(int argc, char** argv);
+  VizTestSuite(int argc, base::span<char*> argv);
 
   VizTestSuite(const VizTestSuite&) = delete;
   VizTestSuite& operator=(const VizTestSuite&) = delete;
diff --git a/components/webcrypto/fuzzer_support.cc b/components/webcrypto/fuzzer_support.cc
index 78cb5de457c12..4ea89ffb8d7dc 100644
--- a/components/webcrypto/fuzzer_support.cc
+++ b/components/webcrypto/fuzzer_support.cc
@@ -28,7 +28,7 @@ namespace {
 class InitOnce : public blink::Platform {
  public:
   InitOnce() {
-    base::CommandLine::Init(0, nullptr);
+    base::CommandLine::Init(0, {});
     mojo::core::Init();
     blink::Platform::CreateMainThreadAndInitialize(this);
   }
diff --git a/components/zucchini/zucchini_main.cc b/components/zucchini/zucchini_main.cc
index 6b3815367dd79..8794d2b30f284 100644
--- a/components/zucchini/zucchini_main.cc
+++ b/components/zucchini/zucchini_main.cc
@@ -5,6 +5,7 @@
 #include <iostream>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/process/memory.h"
 #include "build/build_config.h"
@@ -38,7 +39,7 @@ void InitErrorHandling(const base::CommandLine& command_line) {
 
 }  // namespace
 
-int main(int argc, const char* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   // Initialize infrastructure from base.
   base::CommandLine::Init(argc, argv);
   const base::CommandLine& command_line =
diff --git a/content/app/content_main.cc b/content/app/content_main.cc
index ffc5c37742800..11375f76f58b5 100644
--- a/content/app/content_main.cc
+++ b/content/app/content_main.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -249,7 +251,7 @@ NO_STACK_PROTECTOR int RunContentProcess(
 #if !BUILDFLAG(IS_ANDROID)
     // On Android, the command line is initialized when library is loaded.
     int argc = 0;
-    const char** argv = nullptr;
+    base::span<const char*> argv = {};
 
 #if !BUILDFLAG(IS_WIN)
     // argc/argv are ignored on Windows; see command_line.h for details.
diff --git a/content/browser/attribution_reporting/interop/interop_main.cc b/content/browser/attribution_reporting/interop/interop_main.cc
index 749e54ab8c4cb..c8cd251f79e33 100644
--- a/content/browser/attribution_reporting/interop/interop_main.cc
+++ b/content/browser/attribution_reporting/interop/interop_main.cc
@@ -9,6 +9,7 @@
 #include <utility>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/json/json_reader.h"
@@ -28,7 +29,7 @@ const content::aggregation_service::TestHpkeKey kHpkeKey;
 
 class Env : public content::ContentTestSuiteBase {
  public:
-  Env(int argc, char** argv) : ContentTestSuiteBase(argc, argv) {
+  Env(int argc, base::span<char*> argv) : ContentTestSuiteBase(argc, argv) {
     Initialize();
     content::ForceInProcessNetworkService();
     // This initialization depends on the call to `Initialize()`, so we use a
@@ -81,7 +82,7 @@ std::optional<base::Value::Dict> ReadDictFromFile(
 
 // See //content/test/data/attribution_reporting/interop/README.md for details
 // on the input format.
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   const base::CommandLine& cmd_line = *base::CommandLine::ForCurrentProcess();
 
diff --git a/content/public/app/content_main.h b/content/public/app/content_main.h
index 7f9b515297357..2fb123a2a7f75 100644
--- a/content/public/app/content_main.h
+++ b/content/public/app/content_main.h
@@ -9,6 +9,7 @@
 
 #include "base/functional/callback.h"
 #include "base/memory/raw_ptr.h"
+#include "base/memory/raw_span.h"
 #include "build/build_config.h"
 #include "content/common/content_export.h"
 
@@ -51,7 +52,7 @@ struct CONTENT_EXPORT ContentMainParams {
   raw_ptr<sandbox::SandboxInterfaceInfo> sandbox_info = nullptr;
 #elif !BUILDFLAG(IS_ANDROID)
   int argc = 0;
-  raw_ptr<const char*> argv = nullptr;
+  base::raw_span<const char*> argv = nullptr;
 #endif
 
   // Used by BrowserTestBase. If set, BrowserMainLoop runs this task instead of
diff --git a/content/public/test/content_test_suite_base.cc b/content/public/test/content_test_suite_base.cc
index f4b188c5d0a71..dd7f6d650e58b 100644
--- a/content/public/test/content_test_suite_base.cc
+++ b/content/public/test/content_test_suite_base.cc
@@ -9,6 +9,7 @@
 #include "base/check.h"
 #include "base/command_line.h"
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/path_service.h"
 #include "base/test/test_suite.h"
@@ -69,9 +70,8 @@ class SkipManualTests : public testing::EmptyTestEventListener {
 
 }  // namespace
 
-ContentTestSuiteBase::ContentTestSuiteBase(int argc, char** argv)
-    : base::TestSuite(argc, argv) {
-}
+ContentTestSuiteBase::ContentTestSuiteBase(int argc, base::span<char*> argv)
+    : base::TestSuite(argc, argv) {}
 
 void ContentTestSuiteBase::Initialize() {
   base::TestSuite::Initialize();
diff --git a/content/public/test/content_test_suite_base.h b/content/public/test/content_test_suite_base.h
index d9cc8ba9667e2..968b780b1dbe7 100644
--- a/content/public/test/content_test_suite_base.h
+++ b/content/public/test/content_test_suite_base.h
@@ -5,6 +5,7 @@
 #ifndef CONTENT_PUBLIC_TEST_CONTENT_TEST_SUITE_BASE_H_
 #define CONTENT_PUBLIC_TEST_CONTENT_TEST_SUITE_BASE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 
 namespace content {
@@ -33,7 +34,7 @@ class ContentTestSuiteBase : public base::TestSuite {
   static void InitializeResourceBundle();
 
  protected:
-  ContentTestSuiteBase(int argc, char** argv);
+  ContentTestSuiteBase(int argc, base::span<char*> argv);
 
   void Initialize() override;
 };
diff --git a/content/public/test/test_launcher.cc b/content/public/test/test_launcher.cc
index ebdc156f25559..09916e98e8567 100644
--- a/content/public/test/test_launcher.cc
+++ b/content/public/test/test_launcher.cc
@@ -324,7 +324,7 @@ std::string TestLauncherDelegate::GetUserDataDirectoryCommandLineSwitch() {
 int LaunchTestsInternal(TestLauncherDelegate* launcher_delegate,
                         size_t parallel_jobs,
                         int argc,
-                        char** argv) {
+                        base::span<char*> argv) {
   DCHECK(!g_launcher_delegate);
   g_launcher_delegate = launcher_delegate;
 
@@ -420,7 +420,7 @@ int LaunchTestsInternal(TestLauncherDelegate* launcher_delegate,
   }
 
   base::AtExitManager at_exit;
-  testing::InitGoogleTest(&argc, argv);
+  testing::InitGoogleTest(&argc, argv.data());
 
   base::TimeTicks start_time(base::TimeTicks::Now());
 
@@ -461,7 +461,7 @@ int LaunchTestsInternal(TestLauncherDelegate* launcher_delegate,
 int LaunchTests(TestLauncherDelegate* launcher_delegate,
                 size_t parallel_jobs,
                 int argc,
-                char** argv) {
+                base::span<char*> argv) {
   base::test::AllowCheckIsTestForTesting();
 
   base::CommandLine::Init(argc, argv);
diff --git a/content/public/test/test_launcher.h b/content/public/test/test_launcher.h
index 12ba0ac3f1054..20ee347593419 100644
--- a/content/public/test/test_launcher.h
+++ b/content/public/test/test_launcher.h
@@ -8,6 +8,7 @@
 #include <memory>
 #include <string>
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 
 namespace base {
@@ -22,7 +23,7 @@ struct ContentMainParams;
 
 class TestLauncherDelegate {
  public:
-  virtual int RunTestSuite(int argc, char** argv) = 0;
+  virtual int RunTestSuite(int argc, base::span<char*> argv) = 0;
 
   // Returns the command line switch used to specify the user data directory.
   // The default implementation returns an empty string, which means no user
@@ -70,7 +71,7 @@ class TestLauncherDelegate {
 [[nodiscard]] int LaunchTests(TestLauncherDelegate* launcher_delegate,
                               size_t parallel_jobs,
                               int argc,
-                              char** argv);
+                              base::span<char*> argv);
 
 TestLauncherDelegate* GetCurrentTestLauncherDelegate();
 
diff --git a/content/shell/app/shell_main.cc b/content/shell/app/shell_main.cc
index 3b02c735eb17f..9c5acd9ecae5d 100644
--- a/content/shell/app/shell_main.cc
+++ b/content/shell/app/shell_main.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "content/public/app/content_main.h"
 #include "content/shell/app/shell_main_delegate.h"
@@ -92,7 +93,7 @@ extern "C" IOS_INIT_EXPORT int ContentAppMain(int argc, const char** argv) {
 
 #else
 
-int main(int argc, const char** argv) {
+int main(int argc, base::span<const char*> argv) {
   content::ShellMainDelegate delegate;
   content::ContentMainParams params(&delegate);
   params.argc = argc;
diff --git a/content/test/content_test_launcher.cc b/content/test/content_test_launcher.cc
index a29e184f93a59..e62c01083368a 100644
--- a/content/test/content_test_launcher.cc
+++ b/content/test/content_test_launcher.cc
@@ -4,6 +4,7 @@
 
 #include "base/base_paths.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/i18n/icu_util.h"
 #include "base/process/memory.h"
 #include "base/system/sys_info.h"
@@ -29,9 +30,8 @@ namespace content {
 
 class ContentBrowserTestSuite : public ContentTestSuiteBase {
  public:
-  ContentBrowserTestSuite(int argc, char** argv)
-      : ContentTestSuiteBase(argc, argv) {
-  }
+  ContentBrowserTestSuite(int argc, base::span<char*> argv)
+      : ContentTestSuiteBase(argc, argv) {}
 
   ContentBrowserTestSuite(const ContentBrowserTestSuite&) = delete;
   ContentBrowserTestSuite& operator=(const ContentBrowserTestSuite&) = delete;
@@ -61,7 +61,7 @@ class ContentTestLauncherDelegate : public TestLauncherDelegate {
 
   ~ContentTestLauncherDelegate() override {}
 
-  int RunTestSuite(int argc, char** argv) override {
+  int RunTestSuite(int argc, base::span<char*> argv) override {
     return ContentBrowserTestSuite(argc, argv).Run();
   }
 
@@ -82,7 +82,7 @@ class ContentTestLauncherDelegate : public TestLauncherDelegate {
 #if BUILDFLAG(IS_IOS) && BUILDFLAG(IS_IOS_APP_EXTENSION)
 extern "C" int ChildProcessMain(int argc, const char** argv)
 #else
-int main(int argc, char** argv)
+int main(int argc, base::span<char*> argv)
 #endif
 {
   base::CommandLine::Init(argc, argv);
diff --git a/content/test/content_test_suite.cc b/content/test/content_test_suite.cc
index ae7815e279be4..1e1e02df89eac 100644
--- a/content/test/content_test_suite.cc
+++ b/content/test/content_test_suite.cc
@@ -7,6 +7,7 @@
 #include "base/base_paths.h"
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "content/browser/webui/content_web_ui_configs.h"
 #include "content/public/browser/network_service_util.h"
@@ -29,9 +30,8 @@
 
 namespace content {
 
-ContentTestSuite::ContentTestSuite(int argc, char** argv)
-    : ContentTestSuiteBase(argc, argv) {
-}
+ContentTestSuite::ContentTestSuite(int argc, base::span<char*> argv)
+    : ContentTestSuiteBase(argc, argv) {}
 
 ContentTestSuite::~ContentTestSuite() = default;
 
diff --git a/content/test/content_test_suite.h b/content/test/content_test_suite.h
index 4132d9cec4f69..f2bc6f01713c7 100644
--- a/content/test/content_test_suite.h
+++ b/content/test/content_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef CONTENT_TEST_CONTENT_TEST_SUITE_H_
 #define CONTENT_TEST_CONTENT_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_discardable_memory_allocator.h"
 #include "build/build_config.h"
 #include "content/public/test/content_test_suite_base.h"
@@ -17,7 +18,7 @@ namespace content {
 
 class ContentTestSuite : public ContentTestSuiteBase {
  public:
-  ContentTestSuite(int argc, char** argv);
+  ContentTestSuite(int argc, base::span<char*> argv);
 
   ContentTestSuite(const ContentTestSuite&) = delete;
   ContentTestSuite& operator=(const ContentTestSuite&) = delete;
diff --git a/content/test/fuzzer/fuzzer_support.cc b/content/test/fuzzer/fuzzer_support.cc
index 48d2abef6aec5..9cd6e6c676fe8 100644
--- a/content/test/fuzzer/fuzzer_support.cc
+++ b/content/test/fuzzer/fuzzer_support.cc
@@ -6,6 +6,7 @@
 
 #include <string>
 
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/i18n/icu_util.h"
 #include "base/location.h"
@@ -39,7 +40,7 @@ void RenderViewTestAdapter::SetUp() {
 }
 
 Env::Env() {
-  base::CommandLine::Init(0, nullptr);
+  base::CommandLine::Init(0, {});
   base::FeatureList::InitInstance(std::string(), std::string());
   base::i18n::InitializeICU();
   TestTimeouts::Initialize();
diff --git a/content/test/run_all_unittests.cc b/content/test/run_all_unittests.cc
index 9f25147fd09d7..9ece3ecb5907d 100644
--- a/content/test/run_all_unittests.cc
+++ b/content/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/values.h"
@@ -9,7 +10,7 @@
 #include "content/public/test/unittest_test_suite.h"
 #include "content/test/content_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   content::UnitTestTestSuite test_suite(
       new content::ContentTestSuite(argc, argv),
       base::BindRepeating(content::UnitTestTestSuite::CreateTestContentClients),
diff --git a/content/zygote/zygote_linux.cc b/content/zygote/zygote_linux.cc
index c222c132aa6e4..fbe2b3912627b 100644
--- a/content/zygote/zygote_linux.cc
+++ b/content/zygote/zygote_linux.cc
@@ -610,13 +610,13 @@ base::ProcessId Zygote::ReadArgsAndFork(base::PickleIterator iter,
 
     // Reset the process-wide command line to our new command line.
     base::CommandLine::Reset();
-    base::CommandLine::Init(0, nullptr);
+    base::CommandLine::Init(0, {});
     base::CommandLine::ForCurrentProcess()->InitFromArgv(args);
 
     // Update the process title. The argv was already cached by the call to
     // SetProcessTitleFromCommandLine in ChromeMain, so we can pass NULL here
     // (we don't have the original argv at this point).
-    base::SetProcessTitleFromCommandLine(nullptr);
+    base::SetProcessTitleFromCommandLine({});
   } else if (child_pid < 0) {
     LOG(ERROR) << "Zygote could not fork: process_type " << process_type
                << " numfds " << numfds << " child_pid " << child_pid;
diff --git a/dbus/test_server.cc b/dbus/test_server.cc
index 4aca831dafddb..abb83f8932327 100644
--- a/dbus/test_server.cc
+++ b/dbus/test_server.cc
@@ -4,13 +4,14 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/test/test_timeouts.h"
 #include "base/time/time.h"
 #include "dbus/bus.h"
 #include "dbus/test_service.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::CommandLine::Init(argc, argv);
   TestTimeouts::Initialize();
diff --git a/device/test/run_all_unittests.cc b/device/test/run_all_unittests.cc
index 5c14a7a30960c..6cdcc8a68b8bd 100644
--- a/device/test/run_all_unittests.cc
+++ b/device/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/files/file.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
@@ -17,7 +18,8 @@ namespace {
 
 class DeviceTestSuite : public base::TestSuite {
  public:
-  DeviceTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  DeviceTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
   DeviceTestSuite(const DeviceTestSuite&) = delete;
   DeviceTestSuite& operator=(const DeviceTestSuite&) = delete;
@@ -59,7 +61,7 @@ class DeviceTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   DeviceTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/extensions/browser/api/declarative_net_request/filter_list_converter/main.cc b/extensions/browser/api/declarative_net_request/filter_list_converter/main.cc
index 65239b3785860..b1fca9073c6ef 100644
--- a/extensions/browser/api/declarative_net_request/filter_list_converter/main.cc
+++ b/extensions/browser/api/declarative_net_request/filter_list_converter/main.cc
@@ -5,6 +5,7 @@
 #include <vector>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/logging.h"
@@ -46,7 +47,7 @@ void PrintHelp() {
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   base::CommandLine& command_line = *base::CommandLine::ForCurrentProcess();
 
diff --git a/extensions/shell/app/shell_main.cc b/extensions/shell/app/shell_main.cc
index e6e85d77abb47..b269df9a19142 100644
--- a/extensions/shell/app/shell_main.cc
+++ b/extensions/shell/app/shell_main.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "content/public/app/content_main.h"
 #include "extensions/shell/app/shell_main_delegate.h"
@@ -24,7 +25,7 @@ int APIENTRY wWinMain(HINSTANCE instance, HINSTANCE, wchar_t*, int) {
   return content::ContentMain(std::move(params));
 }
 #else
-int main(int argc, const char** argv) {
+int main(int argc, base::span<const char*> argv) {
   extensions::ShellMainDelegate delegate;
   content::ContentMainParams params(&delegate);
 
diff --git a/extensions/shell/test/shell_test_launcher_delegate.cc b/extensions/shell/test/shell_test_launcher_delegate.cc
index 913f75f8c2766..fd5d390e7a1f0 100644
--- a/extensions/shell/test/shell_test_launcher_delegate.cc
+++ b/extensions/shell/test/shell_test_launcher_delegate.cc
@@ -5,6 +5,7 @@
 #include "extensions/shell/test/shell_test_launcher_delegate.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "content/public/test/content_test_suite_base.h"
 #include "content/shell/common/shell_switches.h"
 #include "extensions/shell/test/test_shell_main_delegate.h"
@@ -13,14 +14,15 @@ namespace extensions {
 
 class AppShellTestSuite : public content::ContentTestSuiteBase {
  public:
-  AppShellTestSuite(int argc, char** argv)
+  AppShellTestSuite(int argc, base::span<char*> argv)
       : content::ContentTestSuiteBase(argc, argv) {}
   AppShellTestSuite(const AppShellTestSuite&) = delete;
   AppShellTestSuite& operator=(const AppShellTestSuite&) = delete;
   ~AppShellTestSuite() override = default;
 };
 
-int AppShellTestLauncherDelegate::RunTestSuite(int argc, char** argv) {
+int AppShellTestLauncherDelegate::RunTestSuite(int argc,
+                                               base::span<char*> argv) {
   AppShellTestSuite test_suite(argc, argv);
   // Browser tests are expected not to tear-down various globals.
   test_suite.DisableCheckForLeakedGlobals();
diff --git a/extensions/shell/test/shell_test_launcher_delegate.h b/extensions/shell/test/shell_test_launcher_delegate.h
index aa867e7e15888..570973a87dc08 100644
--- a/extensions/shell/test/shell_test_launcher_delegate.h
+++ b/extensions/shell/test/shell_test_launcher_delegate.h
@@ -5,13 +5,14 @@
 #ifndef EXTENSIONS_SHELL_TEST_SHELL_TEST_LAUNCHER_DELEGATE_H_
 #define EXTENSIONS_SHELL_TEST_SHELL_TEST_LAUNCHER_DELEGATE_H_
 
+#include "base/containers/span.h"
 #include "content/public/test/test_launcher.h"
 
 namespace extensions {
 
 class AppShellTestLauncherDelegate : public content::TestLauncherDelegate {
  public:
-  int RunTestSuite(int argc, char** argv) override;
+  int RunTestSuite(int argc, base::span<char*> argv) override;
   std::string GetUserDataDirectoryCommandLineSwitch() override;
   content::ContentMainDelegate* CreateContentMainDelegate() override;
 };
diff --git a/extensions/shell/test/shell_tests_main.cc b/extensions/shell/test/shell_tests_main.cc
index 99ae99170f85d..4e305ab272703 100644
--- a/extensions/shell/test/shell_tests_main.cc
+++ b/extensions/shell/test/shell_tests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/test/launcher/test_launcher.h"
 #include "build/build_config.h"
 #include "extensions/shell/test/shell_test_launcher_delegate.h"
@@ -12,7 +13,7 @@
 #include "base/win/win_util.h"
 #endif  // BUILDFLAG(IS_WIN)
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   size_t parallel_jobs = base::NumParallelJobs(/*cores_per_job=*/2);
   if (parallel_jobs == 0U)
diff --git a/extensions/test/extensions_unittests_main.cc b/extensions/test/extensions_unittests_main.cc
index 2b7d855db7b9c..85a765722df47 100644
--- a/extensions/test/extensions_unittests_main.cc
+++ b/extensions/test/extensions_unittests_main.cc
@@ -5,6 +5,7 @@
 #include <memory>
 
 #include "base/base_paths.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
 #include "base/test/launcher/unit_test_launcher.h"
@@ -48,7 +49,7 @@ class ExtensionsContentClient : public content::ContentClient {
 // The test suite for extensions_unittests.
 class ExtensionsTestSuite : public content::ContentTestSuiteBase {
  public:
-  ExtensionsTestSuite(int argc, char** argv);
+  ExtensionsTestSuite(int argc, base::span<char*> argv);
   ExtensionsTestSuite(const ExtensionsTestSuite&) = delete;
   ExtensionsTestSuite& operator=(const ExtensionsTestSuite&) = delete;
   ~ExtensionsTestSuite() override;
@@ -61,7 +62,7 @@ class ExtensionsTestSuite : public content::ContentTestSuiteBase {
   std::unique_ptr<extensions::TestExtensionsClient> client_;
 };
 
-ExtensionsTestSuite::ExtensionsTestSuite(int argc, char** argv)
+ExtensionsTestSuite::ExtensionsTestSuite(int argc, base::span<char*> argv)
     : content::ContentTestSuiteBase(argc, argv) {}
 
 ExtensionsTestSuite::~ExtensionsTestSuite() = default;
@@ -107,7 +108,7 @@ void ExtensionsTestSuite::Shutdown() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   content::UnitTestTestSuite test_suite(
       new ExtensionsTestSuite(argc, argv),
       base::BindRepeating(
diff --git a/gin/shell/gin_main.cc b/gin/shell/gin_main.cc
index 686ecba7d1200..25a0c3b6403d5 100644
--- a/gin/shell/gin_main.cc
+++ b/gin/shell/gin_main.cc
@@ -4,6 +4,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/files/file_util.h"
 #include "base/functional/bind.h"
@@ -63,7 +64,7 @@ class GinShellRunnerDelegate : public ShellRunnerDelegate {
 }  // namespace
 }  // namespace gin
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager at_exit;
   base::CommandLine::Init(argc, argv);
   base::i18n::InitializeICU();
diff --git a/gin/test/run_all_unittests.cc b/gin/test/run_all_unittests.cc
index 93984a1d7d5d7..493dd5851f790 100644
--- a/gin/test/run_all_unittests.cc
+++ b/gin/test/run_all_unittests.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 
   return base::LaunchUnitTests(
diff --git a/google_apis/run_all_unittests.cc b/google_apis/run_all_unittests.cc
index e16985d0a9d11..5d68170c6f3cd 100644
--- a/google_apis/run_all_unittests.cc
+++ b/google_apis/run_all_unittests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/gpu/command_buffer/common/unittest_main.cc b/gpu/command_buffer/common/unittest_main.cc
index ca9736c4fac63..c3496c8ebc1da 100644
--- a/gpu/command_buffer/common/unittest_main.cc
+++ b/gpu/command_buffer/common/unittest_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_io_thread.h"
@@ -14,7 +15,7 @@ namespace {
 
 class GpuTestSuite : public base::TestSuite {
  public:
-  GpuTestSuite(int argc, char** argv);
+  GpuTestSuite(int argc, base::span<char*> argv);
 
   GpuTestSuite(const GpuTestSuite&) = delete;
   GpuTestSuite& operator=(const GpuTestSuite&) = delete;
@@ -22,14 +23,14 @@ class GpuTestSuite : public base::TestSuite {
   ~GpuTestSuite() override;
 };
 
-GpuTestSuite::GpuTestSuite(int argc, char** argv)
+GpuTestSuite::GpuTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 GpuTestSuite::~GpuTestSuite() = default;
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   GpuTestSuite test_suite(argc, argv);
 
diff --git a/gpu/command_buffer/service/gles2_cmd_decoder_unittest_base.cc b/gpu/command_buffer/service/gles2_cmd_decoder_unittest_base.cc
index 5842ff4ee2fe1..b08957cd9df7c 100644
--- a/gpu/command_buffer/service/gles2_cmd_decoder_unittest_base.cc
+++ b/gpu/command_buffer/service/gles2_cmd_decoder_unittest_base.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/351564777): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -2354,7 +2356,7 @@ bool GLES2DecoderPassthroughTestBase::ShouldYield() {
 }
 
 void GLES2DecoderPassthroughTestBase::SetUp() {
-  base::CommandLine::Init(0, nullptr);
+  base::CommandLine::Init(0, {});
   auto* command_line = base::CommandLine::ForCurrentProcess();
   command_line->AppendSwitchASCII(switches::kUseGL,
                                   gl::kGLImplementationANGLEName);
diff --git a/gpu/command_buffer/tests/gl_tests_main.cc b/gpu/command_buffer/tests/gl_tests_main.cc
index 54e7f50e7bcfe..f394ff638a4f2 100644
--- a/gpu/command_buffer/tests/gl_tests_main.cc
+++ b/gpu/command_buffer/tests/gl_tests_main.cc
@@ -4,6 +4,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/message_loop/message_pump.h"
 #include "base/task/single_thread_task_executor.h"
@@ -23,7 +24,8 @@ namespace {
 
 class GlTestsSuite : public base::TestSuite {
  public:
-  GlTestsSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  GlTestsSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
  protected:
   void Initialize() override {
@@ -38,13 +40,13 @@ class GlTestsSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   mojo::core::Init();
 
   // GoogleMock alters the command line, so ensure we initialize it
   // before passing it into the test suite
-  testing::InitGoogleMock(&argc, argv);
+  testing::InitGoogleMock(&argc, argv.data());
   GlTestsSuite gl_tests_suite(argc, argv);
 #if BUILDFLAG(IS_MAC)
   base::apple::ScopedNSAutoreleasePool pool;
diff --git a/gpu/config/gpu_driver_bug_list_unittest.cc b/gpu/config/gpu_driver_bug_list_unittest.cc
index 1a5dc6cd0467f..f149687ef473d 100644
--- a/gpu/config/gpu_driver_bug_list_unittest.cc
+++ b/gpu/config/gpu_driver_bug_list_unittest.cc
@@ -7,6 +7,7 @@
 #include <vector>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "gpu/config/gpu_driver_bug_workaround_type.h"
 #include "gpu/config/gpu_info.h"
@@ -45,7 +46,7 @@ TEST_F(GpuDriverBugListTest, CurrentListForImagination) {
 #endif  // BUILDFLAG(IS_ANDROID)
 
 TEST_F(GpuDriverBugListTest, AppendSingleWorkaround) {
-  base::CommandLine command_line(0, nullptr);
+  base::CommandLine command_line(0, {});
   command_line.AppendSwitch(GpuDriverBugWorkaroundTypeToString(
       DISABLE_CHROMIUM_FRAMEBUFFER_MULTISAMPLE));
   std::set<int> workarounds;
@@ -59,7 +60,7 @@ TEST_F(GpuDriverBugListTest, AppendSingleWorkaround) {
 }
 
 TEST_F(GpuDriverBugListTest, AppendForceGPUWorkaround) {
-  base::CommandLine command_line(0, nullptr);
+  base::CommandLine command_line(0, {});
   command_line.AppendSwitch(
       GpuDriverBugWorkaroundTypeToString(FORCE_HIGH_PERFORMANCE_GPU));
   std::set<int> workarounds;
diff --git a/gpu/dawn_end2end_tests_main.cc b/gpu/dawn_end2end_tests_main.cc
index 4f120b9537078..5036f49d442e5 100644
--- a/gpu/dawn_end2end_tests_main.cc
+++ b/gpu/dawn_end2end_tests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback_helpers.h"
 #include "base/task/single_thread_task_executor.h"
@@ -24,14 +25,14 @@ int RunHelper(base::TestSuite* test_suite) {
 // Forward declared here to avoid pulling in the Dawn headers.
 void InitDawnEnd2EndTestEnvironment(int argc, char** argv);
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   // Environment initialization is done before test initialization
   // so tests can be instantiated for each available GPU adapter.
-  InitDawnEnd2EndTestEnvironment(argc, argv);
+  InitDawnEnd2EndTestEnvironment(argc, argv.data());
 
-  testing::InitGoogleMock(&argc, argv);
+  testing::InitGoogleMock(&argc, argv.data());
   base::TestSuite test_suite(argc, argv);
   int rt = base::LaunchUnitTestsWithOptions(
       argc, argv,
diff --git a/gpu/dawn_perf_tests_main.cc b/gpu/dawn_perf_tests_main.cc
index f44be688281dc..ed6a0f1ef4ca1 100644
--- a/gpu/dawn_perf_tests_main.cc
+++ b/gpu/dawn_perf_tests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/task/single_thread_task_executor.h"
@@ -22,9 +23,9 @@ int RunHelper(base::TestSuite* test_suite) {
 // Forward declared here to avoid pulling in the Dawn headers.
 void InitDawnPerfTestEnvironment(int argc, char** argv);
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
-  InitDawnPerfTestEnvironment(argc, argv);
+  InitDawnPerfTestEnvironment(argc, argv.data());
 
   base::TestSuite test_suite(argc, argv);
   int rt = base::LaunchUnitTestsSerially(
diff --git a/gpu/dawn_unittests_main.cc b/gpu/dawn_unittests_main.cc
index 3da8b89a39328..614a2df893115 100644
--- a/gpu/dawn_unittests_main.cc
+++ b/gpu/dawn_unittests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/task/single_thread_task_executor.h"
@@ -23,10 +24,10 @@ int RunHelper(base::TestSuite* test_suite) {
 // Forward declared here to avoid pulling in the Dawn headers.
 void InitDawnValidationTestEnvironment(int argc, char** argv);
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
-  InitDawnValidationTestEnvironment(argc, argv);
-  testing::InitGoogleMock(&argc, argv);
+  InitDawnValidationTestEnvironment(argc, argv.data());
+  testing::InitGoogleMock(&argc, argv.data());
   base::TestSuite test_suite(argc, argv);
   int rt = base::LaunchUnitTestsSerially(
       argc, argv, base::BindOnce(&RunHelper, base::Unretained(&test_suite)));
diff --git a/gpu/perftests/run_all_tests.cc b/gpu/perftests/run_all_tests.cc
index bd9ca92aec4b5..5d827465bfc7a 100644
--- a/gpu/perftests/run_all_tests.cc
+++ b/gpu/perftests/run_all_tests.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/functional/bind.h"
 #include "base/message_loop/message_pump_type.h"
@@ -35,7 +36,7 @@ static int RunHelper(base::TestSuite* test_suite) {
   return test_suite->Run();
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
   base::CommandLine::Init(argc, argv);
 
diff --git a/gpu/swiftshader_tests_main.cc b/gpu/swiftshader_tests_main.cc
index 6d3361db09dc9..26e5541431dc4 100644
--- a/gpu/swiftshader_tests_main.cc
+++ b/gpu/swiftshader_tests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback_helpers.h"
 #include "base/task/single_thread_task_executor.h"
@@ -26,9 +27,9 @@ class SwiftShaderTestEnvironment : public testing::Environment {
   void TearDown() override {}
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
-  testing::InitGoogleMock(&argc, argv);
+  testing::InitGoogleMock(&argc, argv.data());
   testing::AddGlobalTestEnvironment(new SwiftShaderTestEnvironment());
   base::TestSuite test_suite(argc, argv);
   int rt = base::LaunchUnitTestsWithOptions(
diff --git a/gpu/vulkan/tests/vulkan_tests_main.cc b/gpu/vulkan/tests/vulkan_tests_main.cc
index ea4d53aa5f14c..2aa38587db209 100644
--- a/gpu/vulkan/tests/vulkan_tests_main.cc
+++ b/gpu/vulkan/tests/vulkan_tests_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/task_environment.h"
@@ -19,7 +20,8 @@ namespace {
 
 class VulkanTestSuite : public base::TestSuite {
  public:
-  VulkanTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  VulkanTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
  protected:
   void Initialize() override {
@@ -48,10 +50,10 @@ class VulkanTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   VulkanTestSuite test_suite(argc, argv);
   base::CommandLine::Init(argc, argv);
-  testing::InitGoogleMock(&argc, argv);
+  testing::InitGoogleMock(&argc, argv.data());
   return base::LaunchUnitTestsSerially(
       argc, argv,
       base::BindOnce(&VulkanTestSuite::Run, base::Unretained(&test_suite)));
diff --git a/headless/app/headless_shell_main.cc b/headless/app/headless_shell_main.cc
index f8287680cfea4..3e8057695f7d0 100644
--- a/headless/app/headless_shell_main.cc
+++ b/headless/app/headless_shell_main.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "headless/public/headless_shell.h"
 
@@ -13,7 +14,7 @@
 #include "sandbox/mac/seatbelt_exec.h"
 #endif
 
-int main(int argc, const char** argv) {
+int main(int argc, base::span<const char*> argv) {
   content::ContentMainParams params(nullptr);
 #if BUILDFLAG(IS_WIN)
   sandbox::SandboxInterfaceInfo sandbox_info = {nullptr};
diff --git a/headless/test/headless_test_launcher.cc b/headless/test/headless_test_launcher.cc
index fc35eb68ade8e..95fbb3fa6ebed 100644
--- a/headless/test/headless_test_launcher.cc
+++ b/headless/test/headless_test_launcher.cc
@@ -5,6 +5,7 @@
 #include <memory>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback_helpers.h"
 #include "base/test/allow_check_is_test_for_testing.h"
@@ -35,7 +36,7 @@ class HeadlessTestLauncherDelegate : public content::TestLauncherDelegate {
   ~HeadlessTestLauncherDelegate() override = default;
 
   // content::TestLauncherDelegate implementation:
-  int RunTestSuite(int argc, char** argv) override {
+  int RunTestSuite(int argc, base::span<char*> argv) override {
     base::TestSuite test_suite(argc, argv);
     // Browser tests are expected not to tear-down various globals.
     test_suite.DisableCheckForLeakedGlobals();
@@ -52,7 +53,7 @@ class HeadlessTestLauncherDelegate : public content::TestLauncherDelegate {
 }  // namespace
 }  // namespace headless
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::test::AllowCheckIsTestForTesting();
   base::CommandLine::Init(argc, argv);
   size_t parallel_jobs = base::NumParallelJobs(/*cores_per_job=*/2);
diff --git a/ipc/run_all_perftests.cc b/ipc/run_all_perftests.cc
index 7feab8b66fde1..397d753c197bb 100644
--- a/ipc/run_all_perftests.cc
+++ b/ipc/run_all_perftests.cc
@@ -5,6 +5,7 @@
 // Copied from mojo/core/test/run_all_perftests.cc.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/test/perf_test_suite.h"
 #include "base/test/test_io_thread.h"
 #include "build/build_config.h"
@@ -13,7 +14,7 @@
 #include "mojo/core/test/multiprocess_test_helper.h"
 #include "mojo/core/test/test_support_impl.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::PerfTestSuite test(argc, argv);
 
   mojo::core::test::MultiprocessTestHelper::InitForMultiprocessTest();
diff --git a/ipc/run_all_unittests.cc b/ipc/run_all_unittests.cc
index 1a8c8bc20b6bf..61ab64072aac5 100644
--- a/ipc/run_all_unittests.cc
+++ b/ipc/run_all_unittests.cc
@@ -4,6 +4,7 @@
 
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/multiprocess_test.h"
@@ -18,9 +19,9 @@
 #include "third_party/ipcz/src/test/test_child_launcher.h"
 #endif
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
 #if BUILDFLAG(ENABLE_IPCZ_MULTIPROCESS_TESTS)
-  ipcz::test::TestChildLauncher::Initialize(argc, argv);
+  ipcz::test::TestChildLauncher::Initialize(argc, argv.data());
 #endif
 
   base::TestSuite test_suite(argc, argv);
diff --git a/media/base/run_all_perftests.cc b/media/base/run_all_perftests.cc
index 39aee4a72a80d..324ef0e4df4cb 100644
--- a/media/base/run_all_perftests.cc
+++ b/media/base/run_all_perftests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
@@ -10,7 +11,7 @@
 
 class TestSuiteNoAtExit : public base::TestSuite {
  public:
-  TestSuiteNoAtExit(int argc, char** argv) : TestSuite(argc, argv) {}
+  TestSuiteNoAtExit(int argc, base::span<char*> argv) : TestSuite(argc, argv) {}
   ~TestSuiteNoAtExit() override = default;
 
  protected:
@@ -26,7 +27,7 @@ void TestSuiteNoAtExit::Initialize() {
   media::InitializeMediaLibrary();
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   TestSuiteNoAtExit test_suite(argc, argv);
 
   // Always run the perf tests serially, to avoid distorting
diff --git a/media/capture/run_all_unittests.cc b/media/capture/run_all_unittests.cc
index 9b32da1613e6b..c73fa30e87788 100644
--- a/media/capture/run_all_unittests.cc
+++ b/media/capture/run_all_unittests.cc
@@ -6,6 +6,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/logging.h"
 #include "base/message_loop/message_pump_type.h"
@@ -42,7 +43,7 @@ class MojoEnabledTestEnvironment final : public testing::Environment {
   std::unique_ptr<mojo::core::ScopedIPCSupport> mojo_ipc_support_;
 };
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
   testing::AddGlobalTestEnvironment(new MojoEnabledTestEnvironment());
   return base::LaunchUnitTests(
diff --git a/media/cdm/library_cdm/clear_key_cdm/cdm_video_decoder.cc b/media/cdm/library_cdm/clear_key_cdm/cdm_video_decoder.cc
index 9a016d2e5f00a..29d023915f067 100644
--- a/media/cdm/library_cdm/clear_key_cdm/cdm_video_decoder.cc
+++ b/media/cdm/library_cdm/clear_key_cdm/cdm_video_decoder.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -160,7 +162,7 @@ void SetupGlobalEnvironmentIfNeeded() {
     // shell32 API which might not work in the sandbox. See crbug.com/1242710.
     base::CommandLine::InitUsingArgvForTesting(0, nullptr);
 #else
-    base::CommandLine::Init(0, nullptr);
+    base::CommandLine::Init(0, {});
 #endif
   }
 }
diff --git a/media/gpu/chromeos/image_processor_test.cc b/media/gpu/chromeos/image_processor_test.cc
index fd26fbb65b433..6f160d582fefc 100644
--- a/media/gpu/chromeos/image_processor_test.cc
+++ b/media/gpu/chromeos/image_processor_test.cc
@@ -2,7 +2,6 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
-
 #include "media/gpu/chromeos/image_processor.h"
 
 #include <sys/mman.h>
@@ -15,6 +14,7 @@
 
 #include "base/bits.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/hash/md5.h"
@@ -803,7 +803,7 @@ static int HandleForcedBackendArgument(const std::string& arg,
   return 0;
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   // Print the help message if requested. This needs to be done before
@@ -860,7 +860,7 @@ int main(int argc, char** argv) {
     }
   }
 
-  testing::InitGoogleTest(&argc, argv);
+  testing::InitGoogleTest(&argc, argv.data());
 
   auto* const test_environment = new media::test::VideoTestEnvironment;
   media::g_env = reinterpret_cast<media::test::VideoTestEnvironment*>(
diff --git a/media/gpu/test/video_decode_accelerator_perf_tests.cc b/media/gpu/test/video_decode_accelerator_perf_tests.cc
index 9b2370dbc58da..3b68751468c32 100644
--- a/media/gpu/test/video_decode_accelerator_perf_tests.cc
+++ b/media/gpu/test/video_decode_accelerator_perf_tests.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -449,7 +451,7 @@ TEST_F(VideoDecoderTest, MeasureUncappedPerformance_TenConcurrentDecoders) {
 }  // namespace test
 }  // namespace media
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   // Set the default test data path.
   media::test::VideoBitstream::SetTestDataPath(media::GetTestDataPath());
 
@@ -527,7 +529,7 @@ int main(int argc, char** argv) {
     return EXIT_FAILURE;
   }
 
-  testing::InitGoogleTest(&argc, argv);
+  testing::InitGoogleTest(&argc, argv.data());
 
   // Add the command line flag for HEVC testing which will be checked by the
   // video decoder to allow clear HEVC decoding.
diff --git a/media/gpu/test/video_decode_accelerator_test_suite.cc b/media/gpu/test/video_decode_accelerator_test_suite.cc
index 8f5feb25397cb..91b1de5b7f4de 100644
--- a/media/gpu/test/video_decode_accelerator_test_suite.cc
+++ b/media/gpu/test/video_decode_accelerator_test_suite.cc
@@ -3,11 +3,12 @@
 // found in the LICENSE file.
 
 #include "media/gpu/test/video_decode_accelerator_test_suite.h"
-#include "base/test/task_environment.h"
 
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/strings/string_number_conversions.h"
+#include "base/test/task_environment.h"
 #include "build/build_config.h"
 #include "media/base/media_switches.h"
 #include "media/base/test_data_util.h"
@@ -94,7 +95,7 @@ std::unique_ptr<base::test::TaskEnvironment>
 // static
 VideoDecodeAcceleratorTestSuite* VideoDecodeAcceleratorTestSuite::Create(
     int argc,
-    char** argv) {
+    base::span<char*> argv) {
   // Set the default test data path.
   media::test::VideoBitstream::SetTestDataPath(media::GetTestDataPath());
 
@@ -260,7 +261,7 @@ VideoDecodeAcceleratorTestSuite* VideoDecodeAcceleratorTestSuite::Create(
 
 VideoDecodeAcceleratorTestSuite::VideoDecodeAcceleratorTestSuite(
     int argc,
-    char** argv,
+    base::span<char*> argv,
     const base::FilePath& video_path,
     const base::FilePath& video_metadata_path,
     VideoPlayerTestEnvironment::ValidatorType validator_type,
diff --git a/media/gpu/test/video_decode_accelerator_test_suite.h b/media/gpu/test/video_decode_accelerator_test_suite.h
index f0d6514c927b1..d29b571efb5fe 100644
--- a/media/gpu/test/video_decode_accelerator_test_suite.h
+++ b/media/gpu/test/video_decode_accelerator_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef MEDIA_GPU_TEST_VIDEO_DECODE_ACCELERATOR_TEST_SUITE_H_
 #define MEDIA_GPU_TEST_VIDEO_DECODE_ACCELERATOR_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_discardable_memory_allocator.h"
 #include "base/test/test_suite.h"
 #include "media/gpu/test/video_player/video_player_test_environment.h"
@@ -20,7 +21,8 @@ namespace test {
 
 class VideoDecodeAcceleratorTestSuite : public base::TestSuite {
  public:
-  static VideoDecodeAcceleratorTestSuite* Create(int argc, char** argv);
+  static VideoDecodeAcceleratorTestSuite* Create(int argc,
+                                                 base::span<char*> argv);
 
   VideoDecodeAcceleratorTestSuite(const VideoDecodeAcceleratorTestSuite&) =
       delete;
@@ -66,7 +68,7 @@ class VideoDecodeAcceleratorTestSuite : public base::TestSuite {
  private:
   VideoDecodeAcceleratorTestSuite(
       int argc,
-      char** argv,
+      base::span<char*> argv,
       const base::FilePath& video_path,
       const base::FilePath& video_metadata_path,
       VideoPlayerTestEnvironment::ValidatorType validator_type,
diff --git a/media/gpu/test/video_decode_accelerator_tests.cc b/media/gpu/test/video_decode_accelerator_tests.cc
index 0bdc7466979a1..bfb7bcb85a1c3 100644
--- a/media/gpu/test/video_decode_accelerator_tests.cc
+++ b/media/gpu/test/video_decode_accelerator_tests.cc
@@ -8,6 +8,7 @@
 #include "base/base_switches.h"
 #include "base/command_line.h"
 #include "base/containers/contains.h"
+#include "base/containers/span.h"
 #include "base/cpu.h"
 #include "base/files/file_util.h"
 #include "base/functional/callback_helpers.h"
@@ -658,7 +659,7 @@ TEST_F(VideoDecoderTest, InitializeWithNonSupportedConfig) {
 }  // namespace test
 }  // namespace media
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   media::test::g_env =
       media::test::VideoDecodeAcceleratorTestSuite::Create(argc, argv);
   if (!media::test::g_env || !media::test::g_env->ValidVideoTestEnv()) {
diff --git a/media/gpu/test/video_encode_accelerator_perf_tests.cc b/media/gpu/test/video_encode_accelerator_perf_tests.cc
index 14c0c5cb9290d..60b8724db5642 100644
--- a/media/gpu/test/video_encode_accelerator_perf_tests.cc
+++ b/media/gpu/test/video_encode_accelerator_perf_tests.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -978,7 +980,7 @@ TEST_F(VideoEncoderTest, MeasureProducedBitstreamQuality) {
 }  // namespace test
 }  // namespace media
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   // Set the default test data path.
   media::test::RawVideo::SetTestDataPath(media::GetTestDataPath());
 
@@ -1106,7 +1108,7 @@ int main(int argc, char** argv) {
     return EXIT_FAILURE;
   }
 
-  testing::InitGoogleTest(&argc, argv);
+  testing::InitGoogleTest(&argc, argv.data());
 
   // Set up our test environment.
   media::test::VideoEncoderTestEnvironment* test_environment =
diff --git a/media/gpu/test/video_encode_accelerator_tests.cc b/media/gpu/test/video_encode_accelerator_tests.cc
index 7a4fd46c8771a..176de2644b9e0 100644
--- a/media/gpu/test/video_encode_accelerator_tests.cc
+++ b/media/gpu/test/video_encode_accelerator_tests.cc
@@ -7,6 +7,7 @@
 #include <optional>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/strings/string_number_conversions.h"
@@ -926,7 +927,7 @@ TEST_F(VideoEncoderTest, FlushAtEndOfStream_NV12Dmabuf_EnableDropFrame) {
 }  // namespace test
 }  // namespace media
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   // Set the default test data path.
   media::test::RawVideo::SetTestDataPath(media::GetTestDataPath());
 
@@ -1054,7 +1055,7 @@ int main(int argc, char** argv) {
 #endif  // defined(ARCH_CPU_X86_FAMILY) && BUILDFLAG(IS_CHROMEOS)
   disabled_features.push_back(media::kGlobalVaapiLock);
 
-  testing::InitGoogleTest(&argc, argv);
+  testing::InitGoogleTest(&argc, argv.data());
 
   // Set up our test environment.
   media::test::VideoEncoderTestEnvironment* test_environment =
diff --git a/media/gpu/vaapi/test/decode.cc b/media/gpu/vaapi/test/decode.cc
index 3903447ce3f13..7b3c1d2852759 100644
--- a/media/gpu/vaapi/test/decode.cc
+++ b/media/gpu/vaapi/test/decode.cc
@@ -11,6 +11,7 @@
 #include <string>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/memory_mapped_file.h"
 #include "base/logging.h"
 #include "base/strings/string_number_conversions.h"
@@ -195,7 +196,7 @@ std::optional<SharedVASurface::FetchPolicy> GetFetchPolicy(
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   logging::LoggingSettings settings;
diff --git a/media/gpu/vaapi/test/fake_libva_driver/fake_drv_video_unittest.cc b/media/gpu/vaapi/test/fake_libva_driver/fake_drv_video_unittest.cc
index 16474c9b4f1c3..4d7a611548911 100644
--- a/media/gpu/vaapi/test/fake_libva_driver/fake_drv_video_unittest.cc
+++ b/media/gpu/vaapi/test/fake_libva_driver/fake_drv_video_unittest.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -722,7 +724,7 @@ TEST_F(FakeDriverTest, DestroyContextCrashesForInvalidContextID) {
   EXPECT_DEATH(vaDestroyContext(display_, /*context=*/0), "");
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 
   // We stub out the ContextDelegate so that the driver doesn't fail assertions
diff --git a/media/gpu/vaapi/vaapi_unittest.cc b/media/gpu/vaapi/vaapi_unittest.cc
index bd67c6c1d4d19..936d4737cc145 100644
--- a/media/gpu/vaapi/vaapi_unittest.cc
+++ b/media/gpu/vaapi/vaapi_unittest.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -1023,7 +1025,7 @@ INSTANTIATE_TEST_SUITE_P(
 
 }  // namespace media
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 
   // PreSandboxInitialization() loads and opens the driver, queries its
diff --git a/media/test/run_all_unittests.cc b/media/test/run_all_unittests.cc
index 13ad0c6fee580..4bd6cb2a36073 100644
--- a/media/test/run_all_unittests.cc
+++ b/media/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_discardable_memory_allocator.h"
@@ -19,7 +20,7 @@
 
 class TestSuiteNoAtExit : public base::TestSuite {
  public:
-  TestSuiteNoAtExit(int argc, char** argv) : TestSuite(argc, argv) {}
+  TestSuiteNoAtExit(int argc, base::span<char*> argv) : TestSuite(argc, argv) {}
   ~TestSuiteNoAtExit() override = default;
 
  protected:
@@ -45,7 +46,7 @@ void TestSuiteNoAtExit::Initialize() {
   base::DiscardableMemoryAllocator::SetInstance(&discardable_memory_allocator_);
 }
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   mojo::core::Init();
   TestSuiteNoAtExit test_suite(argc, argv);
 
diff --git a/mojo/core/test/mojo_test_suite_base.cc b/mojo/core/test/mojo_test_suite_base.cc
index 4343e777cbe22..c730796bfd350 100644
--- a/mojo/core/test/mojo_test_suite_base.cc
+++ b/mojo/core/test/mojo_test_suite_base.cc
@@ -7,6 +7,7 @@
 #include "base/base_switches.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/strings/string_util.h"
 #include "base/test/scoped_feature_list.h"
@@ -67,7 +68,7 @@ class MojoSupportForEachTest : public testing::EmptyTestEventListener {
 
 }  // namespace
 
-MojoTestSuiteBase::MojoTestSuiteBase(int argc, char** argv)
+MojoTestSuiteBase::MojoTestSuiteBase(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 #if BUILDFLAG(IS_WIN)
diff --git a/mojo/core/test/mojo_test_suite_base.h b/mojo/core/test/mojo_test_suite_base.h
index d957d23646384..d4adda21a1191 100644
--- a/mojo/core/test/mojo_test_suite_base.h
+++ b/mojo/core/test/mojo_test_suite_base.h
@@ -7,6 +7,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 #include "build/build_config.h"
 
@@ -20,7 +21,7 @@ class ScopedMojoSupport;
 
 class MojoTestSuiteBase : public base::TestSuite {
  public:
-  MojoTestSuiteBase(int argc, char** argv);
+  MojoTestSuiteBase(int argc, base::span<char*> argv);
 #if BUILDFLAG(IS_WIN)
   MojoTestSuiteBase(int argc, wchar_t** argv);
 #endif  // BUILDFLAG(IS_WIN)
diff --git a/mojo/core/test/run_all_perftests.cc b/mojo/core/test/run_all_perftests.cc
index 887fa6fbb6259..11a32ec08f07e 100644
--- a/mojo/core/test/run_all_perftests.cc
+++ b/mojo/core/test/run_all_perftests.cc
@@ -5,12 +5,13 @@
 #include "base/base_switches.h"
 #include "base/check.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/test/perf_test_suite.h"
 #include "mojo/core/test/scoped_mojo_support.h"
 #include "mojo/public/tests/test_support_private.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   CHECK(base::CommandLine::Init(argc, argv));
   const auto& cmd = *base::CommandLine::ForCurrentProcess();
   auto features = std::make_unique<base::FeatureList>();
diff --git a/mojo/core/test/run_all_unittests.cc b/mojo/core/test/run_all_unittests.cc
index 0ba519db887c2..d3a38a982d322 100644
--- a/mojo/core/test/run_all_unittests.cc
+++ b/mojo/core/test/run_all_unittests.cc
@@ -4,13 +4,14 @@
 
 #include <signal.h>
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "build/build_config.h"
 #include "mojo/core/test/mojo_test_suite_base.h"
 #include "testing/gtest/include/gtest/gtest.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
 #if !BUILDFLAG(IS_ANDROID)
   // Silence death test thread warnings on Linux. We can afford to run our death
   // tests a little more slowly (< 10 ms per death test on a Z620).
diff --git a/net/spdy/fuzzing/hpack_example_generator.cc b/net/spdy/fuzzing/hpack_example_generator.cc
index b82fc7e1693f6..8fc38c907cf32 100644
--- a/net/spdy/fuzzing/hpack_example_generator.cc
+++ b/net/spdy/fuzzing/hpack_example_generator.cc
@@ -30,7 +30,7 @@ using std::map;
 // Generates a configurable number of header sets (using HpackFuzzUtil), and
 // sequentially encodes each header set with an HpackEncoder. Encoded header
 // sets are written to the output file in length-prefixed blocks.
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
 
   base::CommandLine::Init(argc, argv);
diff --git a/net/test/net_test_suite.cc b/net/test/net_test_suite.cc
index e2860b72ea3ad..4bc99ea22cf05 100644
--- a/net/test/net_test_suite.cc
+++ b/net/test/net_test_suite.cc
@@ -5,6 +5,7 @@
 #include "net/test/net_test_suite.h"
 
 #include "base/check_op.h"
+#include "base/containers/span.h"
 #include "net/base/network_change_notifier.h"
 #include "net/http/http_stream_factory.h"
 #include "net/quic/platform/impl/quic_test_flags_utils.h"
@@ -36,7 +37,7 @@ class NetUnitTestEventListener : public testing::EmptyTestEventListener {
 NetTestSuite* g_current_net_test_suite = nullptr;
 }  // namespace
 
-NetTestSuite::NetTestSuite(int argc, char** argv)
+NetTestSuite::NetTestSuite(int argc, base::span<char*> argv)
     : TestSuite(argc, argv) {
   DCHECK(!g_current_net_test_suite);
   g_current_net_test_suite = this;
diff --git a/net/test/net_test_suite.h b/net/test/net_test_suite.h
index e4dd00880271b..63d201bc6e943 100644
--- a/net/test/net_test_suite.h
+++ b/net/test/net_test_suite.h
@@ -7,6 +7,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/memory/scoped_refptr.h"
 #include "base/test/test_suite.h"
 #include "build/build_config.h"
@@ -18,7 +19,7 @@ class NetworkChangeNotifier;
 
 class NetTestSuite : public base::TestSuite {
  public:
-  NetTestSuite(int argc, char** argv);
+  NetTestSuite(int argc, base::span<char*> argv);
   ~NetTestSuite() override;
 
   void Initialize() override;
diff --git a/net/test/run_all_unittests.cc b/net/test/run_all_unittests.cc
index f738c3eca8d54..b4d0360110df8 100644
--- a/net/test/run_all_unittests.cc
+++ b/net/test/run_all_unittests.cc
@@ -5,6 +5,7 @@
 #include <iostream>
 
 #include "base/build_time.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "build/build_config.h"
@@ -44,7 +45,7 @@ bool VerifyBuildIsTimely() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   if (!VerifyBuildIsTimely())
     return 1;
 
diff --git a/pdf/test/run_all_unittests.cc b/pdf/test/run_all_unittests.cc
index b12d46d6085f8..2a4ceb7edfefe 100644
--- a/pdf/test/run_all_unittests.cc
+++ b/pdf/test/run_all_unittests.cc
@@ -5,6 +5,7 @@
 #include <memory>
 
 #include "base/base_paths.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/functional/callback.h"
@@ -111,7 +112,7 @@ class PdfTestSuite final : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   PdfTestSuite test_suite(argc, argv);
   return base::LaunchUnitTests(
       argc, argv,
diff --git a/remoting/base/run_all_unittests.cc b/remoting/base/run_all_unittests.cc
index 21af80609a708..0498d2968ff2a 100644
--- a/remoting/base/run_all_unittests.cc
+++ b/remoting/base/run_all_unittests.cc
@@ -4,6 +4,7 @@
 
 #include "base/base_switches.h"
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/path_service.h"
@@ -20,7 +21,7 @@
 #include "remoting/base/chromeos_remoting_test_suite.h"
 #endif  // BUILDFLAG(IS_CHROMEOS)
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
 #if BUILDFLAG(IS_CHROMEOS)
   remoting::ChromeOSRemotingTestSuite test_suite(argc, argv);
 #else
diff --git a/remoting/client/cli/remoting_client_main.cc b/remoting/client/cli/remoting_client_main.cc
index a0e3a0e019ff7..58518e8df2488 100644
--- a/remoting/client/cli/remoting_client_main.cc
+++ b/remoting/client/cli/remoting_client_main.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/linux_util.h"
 #include "base/logging.h"
 #include "base/message_loop/message_pump_type.h"
@@ -21,7 +22,7 @@
 #include "services/network/public/cpp/shared_url_loader_factory.h"
 #include "services/network/transitional_url_loader_factory_owner.h"
 
-int main(int argc, char const* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   base::AtExitManager exitManager;
   base::CommandLine::Init(argc, argv);
 
diff --git a/remoting/host/crash/crash_uploader_main.cc b/remoting/host/crash/crash_uploader_main.cc
index ad22d8c2cc2fa..ae66b76485e1e 100644
--- a/remoting/host/crash/crash_uploader_main.cc
+++ b/remoting/host/crash/crash_uploader_main.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/logging.h"
 #include "base/memory/scoped_refptr.h"
 #include "base/message_loop/message_pump_type.h"
@@ -25,7 +26,7 @@ namespace {
 constexpr char kTimeoutSwitchName[] = "timeout";
 }
 
-int CrashUploaderMain(int argc, char** argv) {
+int CrashUploaderMain(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
 
   base::SingleThreadTaskExecutor task_executor(base::MessagePumpType::IO);
diff --git a/remoting/host/host_main.cc b/remoting/host/host_main.cc
index a0012bba0ade2..9e7fe8a604910 100644
--- a/remoting/host/host_main.cc
+++ b/remoting/host/host_main.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -172,7 +174,7 @@ MainRoutineFn SelectMainRoutine(const std::string& process_type) {
 
 }  // namespace
 
-int HostMain(int argc, char** argv) {
+int HostMain(int argc, base::span<char*> argv) {
 #if BUILDFLAG(IS_APPLE)
   // Needed so we don't leak objects when threads are created.
   base::apple::ScopedNSAutoreleasePool pool;
diff --git a/remoting/host/it2me/it2me_native_messaging_host_main.cc b/remoting/host/it2me/it2me_native_messaging_host_main.cc
index 1a9ddba419222..01268422feef3 100644
--- a/remoting/host/it2me/it2me_native_messaging_host_main.cc
+++ b/remoting/host/it2me/it2me_native_messaging_host_main.cc
@@ -8,6 +8,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/i18n/icu_util.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/run_loop.h"
@@ -74,7 +75,7 @@ bool CurrentProcessHasUiAccess() {
 
 // Creates a It2MeNativeMessagingHost instance, attaches it to stdin/stdout and
 // runs the task executor until It2MeNativeMessagingHost signals shutdown.
-int It2MeNativeMessagingHostMain(int argc, char** argv) {
+int It2MeNativeMessagingHostMain(int argc, base::span<char*> argv) {
 #if (BUILDFLAG(IS_LINUX) || BUILDFLAG(IS_CHROMEOS)) && defined(REMOTING_USE_X11)
   // Initialize Xlib for multi-threaded use, allowing non-Chromium code to
   // use X11 safely (such as the WebRTC capturer, GTK ...)
diff --git a/remoting/host/linux/dbus_interfaces/gen_dbus_interface.cc b/remoting/host/linux/dbus_interfaces/gen_dbus_interface.cc
index 939862c690079..2fde031e45960 100644
--- a/remoting/host/linux/dbus_interfaces/gen_dbus_interface.cc
+++ b/remoting/host/linux/dbus_interfaces/gen_dbus_interface.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/40285824): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -83,7 +85,7 @@ void WriteParameters(std::ostream& output, GDBusArgInfo** args) {
   output << "      \")\"" << std::endl;
 }
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   base::FilePath input_path =
       base::CommandLine::ForCurrentProcess()->GetSwitchValuePath("input");
diff --git a/remoting/host/remote_open_url/remote_open_url_main.cc b/remoting/host/remote_open_url/remote_open_url_main.cc
index 29ee547d72832..529d8083ec948 100644
--- a/remoting/host/remote_open_url/remote_open_url_main.cc
+++ b/remoting/host/remote_open_url/remote_open_url_main.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -30,7 +32,7 @@
 
 namespace remoting {
 
-int RemoteOpenUrlMain(int argc, char** argv) {
+int RemoteOpenUrlMain(int argc, base::span<char*> argv) {
   if (argc > 2) {
     printf("Usage: %s [URL]\n", argv[0]);
     return -1;
diff --git a/remoting/host/setup/me2me_native_messaging_host_main.cc b/remoting/host/setup/me2me_native_messaging_host_main.cc
index b24d266e01acb..06433041fb9a6 100644
--- a/remoting/host/setup/me2me_native_messaging_host_main.cc
+++ b/remoting/host/setup/me2me_native_messaging_host_main.cc
@@ -11,6 +11,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file.h"
 #include "base/i18n/icu_util.h"
 #include "base/memory/scoped_refptr.h"
@@ -62,7 +63,7 @@ using remoting::protocol::PairingRegistry;
 
 namespace remoting {
 
-int Me2MeNativeMessagingHostMain(int argc, char** argv) {
+int Me2MeNativeMessagingHostMain(int argc, base::span<char*> argv) {
   // This object instance is required by Chrome code (such as
   // SingleThreadTaskExecutor).
   base::AtExitManager exit_manager;
diff --git a/remoting/host/setup/start_host_as_root.cc b/remoting/host/setup/start_host_as_root.cc
index 59ed6ca74c33e..edc1789c7f145 100644
--- a/remoting/host/setup/start_host_as_root.cc
+++ b/remoting/host/setup/start_host_as_root.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -74,7 +76,7 @@ bool CheckChromotingGroupMembership(const char* user_name,
   return true;
 }
 
-int StartHostAsRoot(int argc, char** argv) {
+int StartHostAsRoot(int argc, base::span<char*> argv) {
   DCHECK(getuid() == 0);
 
   base::CommandLine command_line(argc, argv);
diff --git a/remoting/host/setup/start_host_as_root.h b/remoting/host/setup/start_host_as_root.h
index 77530e184bc96..2681ce04fbd58 100644
--- a/remoting/host/setup/start_host_as_root.h
+++ b/remoting/host/setup/start_host_as_root.h
@@ -5,9 +5,11 @@
 #ifndef REMOTING_HOST_SETUP_START_HOST_AS_ROOT_H_
 #define REMOTING_HOST_SETUP_START_HOST_AS_ROOT_H_
 
+#include "base/containers/span.h"
+
 namespace remoting {
 
-int StartHostAsRoot(int argc, char** argv);
+int StartHostAsRoot(int argc, base::span<char*> argv);
 
 }  // namespace remoting
 
diff --git a/remoting/host/setup/start_host_main.cc b/remoting/host/setup/start_host_main.cc
index e70f00fa8afd8..dca979adf2590 100644
--- a/remoting/host/setup/start_host_main.cc
+++ b/remoting/host/setup/start_host_main.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/390223051): Remove C-library calls to fix the errors.
 #pragma allow_unsafe_libc_calls
@@ -368,7 +370,7 @@ bool InitializeCloudMachineParams(HostStarter::Params& params,
 
 }  // namespace
 
-int StartHostMain(int argc, char** argv) {
+int StartHostMain(int argc, base::span<char*> argv) {
 #if BUILDFLAG(IS_LINUX)
   // Minimize the amount of code that runs as root on Posix systems.
   if (getuid() == 0) {
diff --git a/remoting/host/webauthn/remote_webauthn_main.cc b/remoting/host/webauthn/remote_webauthn_main.cc
index 8c5d920e79ee2..1ec0e66031307 100644
--- a/remoting/host/webauthn/remote_webauthn_main.cc
+++ b/remoting/host/webauthn/remote_webauthn_main.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file.h"
 #include "base/logging.h"
 #include "base/memory/scoped_refptr.h"
@@ -34,7 +35,7 @@
 
 namespace remoting {
 
-int RemoteWebAuthnMain(int argc, char** argv) {
+int RemoteWebAuthnMain(int argc, base::span<char*> argv) {
   base::AtExitManager exit_manager;
   base::SingleThreadTaskExecutor task_executor(base::MessagePumpType::IO);
   base::ThreadPoolInstance::Create("RemoteWebAuthn");
diff --git a/remoting/test/capability_test_stub_main.cc b/remoting/test/capability_test_stub_main.cc
index 5536019867cee..d65a31b1aa2dd 100644
--- a/remoting/test/capability_test_stub_main.cc
+++ b/remoting/test/capability_test_stub_main.cc
@@ -5,6 +5,7 @@
 #include <iostream>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/notreached.h"
 #include "remoting/host/base/host_exit_codes.h"
 
@@ -54,7 +55,7 @@ int EvaluateCapabilityLocally(const std::string& type) {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   const base::CommandLine* command_line =
diff --git a/remoting/test/it2me_cli_host_main.cc b/remoting/test/it2me_cli_host_main.cc
index e3ebb94716d60..cc6740a3ffd38 100644
--- a/remoting/test/it2me_cli_host_main.cc
+++ b/remoting/test/it2me_cli_host_main.cc
@@ -4,6 +4,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/message_loop/message_pump_type.h"
 #include "base/task/single_thread_task_executor.h"
 #include "base/task/thread_pool/thread_pool_instance.h"
@@ -16,7 +17,7 @@
 #include "base/linux_util.h"
 #endif  // BUILDFLAG(IS_LINUX) || BUILDFLAG(IS_CHROMEOS)
 
-int main(int argc, char const* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   base::AtExitManager exitManager;
   base::CommandLine::Init(argc, argv);
 
diff --git a/remoting/test/it2me_standalone_host_main.cc b/remoting/test/it2me_standalone_host_main.cc
index b27b216d03d22..02c7d60dddb4d 100644
--- a/remoting/test/it2me_standalone_host_main.cc
+++ b/remoting/test/it2me_standalone_host_main.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "remoting/host/resources.h"
 #include "remoting/test/it2me_standalone_host.h"
@@ -18,7 +19,7 @@
 #include "ui/gfx/x/connection.h"
 #endif  // BUILDFLAG(IS_LINUX) || BUILDFLAG(IS_CHROMEOS)
 
-int main(int argc, const char** argv) {
+int main(int argc, base::span<const char*> argv) {
   base::AtExitManager at_exit_manager;
   base::CommandLine::Init(argc, argv);
   remoting::test::It2MeStandaloneHost host;
diff --git a/remoting/test/session_authz_playground_main.cc b/remoting/test/session_authz_playground_main.cc
index a905d8dbd6994..cfacd372d9554 100644
--- a/remoting/test/session_authz_playground_main.cc
+++ b/remoting/test/session_authz_playground_main.cc
@@ -4,12 +4,13 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/task/single_thread_task_executor.h"
 #include "base/task/thread_pool/thread_pool_instance.h"
 #include "mojo/core/embedder/embedder.h"
 #include "remoting/test/session_authz_playground.h"
 
-int main(int argc, char const* argv[]) {
+int main(int argc, base::span<const char*> argv) {
   base::AtExitManager exitManager;
   base::CommandLine::Init(argc, argv);
   base::SingleThreadTaskExecutor io_task_executor(base::MessagePumpType::IO);
diff --git a/sandbox/linux/tests/main.cc b/sandbox/linux/tests/main.cc
index e4a9114c78fb6..b35b0a6fecddc 100644
--- a/sandbox/linux/tests/main.cc
+++ b/sandbox/linux/tests/main.cc
@@ -7,6 +7,7 @@
 #include "base/at_exit.h"
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/functional/bind.h"
@@ -49,7 +50,7 @@ void UnitTestAssertHandler(const char* file,
 }
 #endif
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   std::string client_func;
 #if defined(SANDBOX_USES_BASE_TEST_SUITE)
diff --git a/sandbox/policy/linux/sandbox_linux.cc b/sandbox/policy/linux/sandbox_linux.cc
index 427604b2b8a00..a8d3867703f11 100644
--- a/sandbox/policy/linux/sandbox_linux.cc
+++ b/sandbox/policy/linux/sandbox_linux.cc
@@ -19,6 +19,7 @@
 #include <vector>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/feature_list.h"
 #include "base/files/scoped_file.h"
 #include "base/functional/bind.h"
@@ -137,7 +138,7 @@ bool UpdateProcessTypeAndEnableSandbox(
   base::CommandLine::StringVector exec =
       base::CommandLine::ForCurrentProcess()->GetArgs();
   base::CommandLine::Reset();
-  base::CommandLine::Init(0, nullptr);
+  base::CommandLine::Init(0, {});
   base::CommandLine::ForCurrentProcess()->InitFromArgv(exec);
 
   base::CommandLine* command_line = base::CommandLine::ForCurrentProcess();
@@ -156,7 +157,7 @@ bool UpdateProcessTypeAndEnableSandbox(
   // Update the process title. The argv was already cached by the call to
   // SetProcessTitleFromCommandLine in content_main_runner.cc, so we can pass
   // NULL here (we don't have the original argv at this point).
-  base::SetProcessTitleFromCommandLine(nullptr);
+  base::SetProcessTitleFromCommandLine({});
 
   return SandboxSeccompBPF::StartSandboxWithExternalPolicy(
       std::make_unique<BrokerProcessPolicy>(policy.allowed_command_set),
diff --git a/services/data_decoder/public/cpp/json_sanitizer_fuzztests.cc b/services/data_decoder/public/cpp/json_sanitizer_fuzztests.cc
index 38163ce18ff4c..2a5a926c263b1 100644
--- a/services/data_decoder/public/cpp/json_sanitizer_fuzztests.cc
+++ b/services/data_decoder/public/cpp/json_sanitizer_fuzztests.cc
@@ -9,6 +9,7 @@
 
 #include "base/check_op.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/json/json_reader.h"
 #include "base/run_loop.h"
 #include "base/test/bind.h"
@@ -28,7 +29,7 @@ void SanitizerAndBaseJsonReaderDecoderMatch(std::string_view input) {
 #if BUILDFLAG(IS_WIN)
     base::CommandLine::InitUsingArgvForTesting(0, nullptr);
 #else
-    CHECK(base::CommandLine::Init(0, nullptr));
+    CHECK(base::CommandLine::Init(0, {}));
 #endif
     TestTimeouts::Initialize();
     // Note that the documentation says not to call this in tests and to use
diff --git a/services/service_manager/public/cpp/service_executable/main.cc b/services/service_manager/public/cpp/service_executable/main.cc
index ed6ef1a5fe547..da9a3b28f0067 100644
--- a/services/service_manager/public/cpp/service_executable/main.cc
+++ b/services/service_manager/public/cpp/service_executable/main.cc
@@ -6,6 +6,7 @@
 #include "base/base_switches.h"
 #include "base/command_line.h"
 #include "base/containers/contains.h"
+#include "base/containers/span.h"
 #include "base/debug/debugger.h"
 #include "base/debug/stack_trace.h"
 #include "base/files/file_path.h"
@@ -64,7 +65,7 @@ void WaitForDebuggerIfNecessary() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::AtExitManager at_exit;
   base::CommandLine::Init(argc, argv);
 
diff --git a/services/test/run_all_unittests.cc b/services/test/run_all_unittests.cc
index dd0e89ce181cb..fa08c4d8f6fcc 100644
--- a/services/test/run_all_unittests.cc
+++ b/services/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/files/file.h"
 #include "base/functional/bind.h"
 #include "base/i18n/icu_util.h"
@@ -26,7 +27,8 @@ namespace {
 
 class ServiceTestSuite : public base::TestSuite {
  public:
-  ServiceTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  ServiceTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
   ServiceTestSuite(const ServiceTestSuite&) = delete;
   ServiceTestSuite& operator=(const ServiceTestSuite&) = delete;
@@ -75,7 +77,7 @@ class ServiceTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   ServiceTestSuite test_suite(argc, argv);
 
   mojo::core::Configuration mojo_config;
diff --git a/sql/test/run_all_unittests.cc b/sql/test/run_all_unittests.cc
index 94e9d5234e927..e3e8e097a3a5b 100644
--- a/sql/test/run_all_unittests.cc
+++ b/sql/test/run_all_unittests.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "sql/test/sql_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   sql::SQLTestSuite test_suite(argc, argv);
 
   return base::LaunchUnitTests(
diff --git a/sql/test/sql_test_suite.cc b/sql/test/sql_test_suite.cc
index da1acc1b6041a..9ae228f931ef8 100644
--- a/sql/test/sql_test_suite.cc
+++ b/sql/test/sql_test_suite.cc
@@ -4,12 +4,13 @@
 
 #include "sql/test/sql_test_suite.h"
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 #include "sql/test/paths.h"
 
 namespace sql {
 
-SQLTestSuite::SQLTestSuite(int argc, char** argv)
+SQLTestSuite::SQLTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 SQLTestSuite::~SQLTestSuite() = default;
diff --git a/sql/test/sql_test_suite.h b/sql/test/sql_test_suite.h
index f3e566fc7d1b8..3b862a1e300cc 100644
--- a/sql/test/sql_test_suite.h
+++ b/sql/test/sql_test_suite.h
@@ -5,13 +5,14 @@
 #ifndef SQL_TEST_SQL_TEST_SUITE_H_
 #define SQL_TEST_SQL_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 
 namespace sql {
 
 class SQLTestSuite : public base::TestSuite {
  public:
-  SQLTestSuite(int argc, char** argv);
+  SQLTestSuite(int argc, base::span<char*> argv);
   SQLTestSuite(const SQLTestSuite&) = delete;
   SQLTestSuite& operator=(const SQLTestSuite&) = delete;
   ~SQLTestSuite() override;
diff --git a/storage/common/run_all_unittests.cc b/storage/common/run_all_unittests.cc
index e788da7134818..e6b0f053f6465 100644
--- a/storage/common/run_all_unittests.cc
+++ b/storage/common/run_all_unittests.cc
@@ -2,13 +2,14 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 #include "build/build_config.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   int result = 0;
   {
     base::TestSuite test_suite(argc, argv);
diff --git a/testing/libfuzzer/fuzzers/paint_vector_icon_fuzztest.cc b/testing/libfuzzer/fuzzers/paint_vector_icon_fuzztest.cc
index 68f5554a050a2..73743a0a4e482 100644
--- a/testing/libfuzzer/fuzzers/paint_vector_icon_fuzztest.cc
+++ b/testing/libfuzzer/fuzzers/paint_vector_icon_fuzztest.cc
@@ -5,6 +5,7 @@
 #include <vector>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "skia/ext/switches.h"
 #include "third_party/fuzztest/src/fuzztest/fuzztest.h"
 #include "third_party/skia/include/core/SkColor.h"
@@ -96,7 +97,7 @@ class PaintVectorIconFuzzTest {
   PaintVectorIconFuzzTest() {
     // `Init()` ignores its arguments on Windows, so init with nothing and add
     // switches later.
-    CHECK(base::CommandLine::Init(0, nullptr));
+    CHECK(base::CommandLine::Init(0, {}));
 
     // Set command-line arguments correctly to avoid check failures down the
     // line.
diff --git a/testing/libfuzzer/fuzztest_wrapper.cpp b/testing/libfuzzer/fuzztest_wrapper.cpp
index fed72cd6b8172..2f538b36a6607 100644
--- a/testing/libfuzzer/fuzztest_wrapper.cpp
+++ b/testing/libfuzzer/fuzztest_wrapper.cpp
@@ -9,6 +9,7 @@
 #include <iostream>
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/files/file_util.h"
 #include "base/path_service.h"
@@ -55,7 +56,7 @@ void HandleReplayMode(auto& args) {
 
 #endif  // BUILDFLAG(USE_CENTIPEDE)
 
-int main(int argc, const char* const* argv) {
+int main(int argc, base::span<const char* const> argv) {
   base::CommandLine::Init(argc, argv);
   base::FilePath fuzzer_path;
   if (!base::PathService::Get(base::DIR_EXE, &fuzzer_path)) {
diff --git a/testing/rust_gtest_interop/rust_gtest_interop_unittest_main.cc b/testing/rust_gtest_interop/rust_gtest_interop_unittest_main.cc
index 81233faff88ab..4542bb2bfce44 100644
--- a/testing/rust_gtest_interop/rust_gtest_interop_unittest_main.cc
+++ b/testing/rust_gtest_interop/rust_gtest_interop_unittest_main.cc
@@ -87,7 +87,7 @@ int main(int argc, char** argv) {
   // Note: With the iOS test launcher, this does not return, so we do the check
   // for which tests ran in the TestSuite.
   int result = base::LaunchUnitTests(
-      my_argv.size() - 1u, my_argv.data(),
+      my_argv.size() - 1u, my_argv,
       base::BindOnce(&InteropTestSuite::Run, base::Unretained(&test_suite)));
   // If the tests ran in a child process, we'll verify here.
   if (!result && IsSubprocess()) {
diff --git a/third_party/blink/common/test/run_all_unittests.cc b/third_party/blink/common/test/run_all_unittests.cc
index 4a2307cb3bdd2..d2bac328068a7 100644
--- a/third_party/blink/common/test/run_all_unittests.cc
+++ b/third_party/blink/common/test/run_all_unittests.cc
@@ -6,13 +6,14 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 #include "v8/include/libplatform/libplatform.h"
 #include "v8/include/v8.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/third_party/blink/renderer/controller/tests/run_all_perftests.cc b/third_party/blink/renderer/controller/tests/run_all_perftests.cc
index 881e84388393b..9b703f88ee384 100644
--- a/third_party/blink/renderer/controller/tests/run_all_perftests.cc
+++ b/third_party/blink/renderer/controller/tests/run_all_perftests.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 #include "content/public/test/blink_test_environment.h"
 #include "third_party/blink/renderer/controller/tests/thread_state_test_environment.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   ::testing::AddGlobalTestEnvironment(
       new content::BlinkTestEnvironmentWithIsolate);
   ::testing::AddGlobalTestEnvironment(new ThreadStateTestEnvironment);
diff --git a/third_party/blink/renderer/controller/tests/run_all_tests.cc b/third_party/blink/renderer/controller/tests/run_all_tests.cc
index 54e362f66e0d5..bf49c61a04b90 100644
--- a/third_party/blink/renderer/controller/tests/run_all_tests.cc
+++ b/third_party/blink/renderer/controller/tests/run_all_tests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
@@ -9,7 +10,7 @@
 #include "third_party/blink/renderer/controller/tests/thread_state_test_environment.h"
 #include "third_party/blink/renderer/platform/testing/task_environment.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   ::testing::AddGlobalTestEnvironment(new content::BlinkTestEnvironment);
   ::testing::AddGlobalTestEnvironment(new ThreadStateTestEnvironment);
 
diff --git a/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.cc b/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.cc
index a5d402c6693e2..c5ba1d96b7c3f 100644
--- a/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.cc
+++ b/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.cc
@@ -5,6 +5,7 @@
 #include "third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/i18n/icu_util.h"
 #include "base/test/test_timeouts.h"
 #include "content/public/test/blink_test_environment.h"
@@ -13,9 +14,10 @@
 namespace blink {
 
 BlinkFuzzerTestSupport::BlinkFuzzerTestSupport()
-    : BlinkFuzzerTestSupport(0, nullptr) {}
+    : BlinkFuzzerTestSupport(0, {}) {}
 
-BlinkFuzzerTestSupport::BlinkFuzzerTestSupport(int argc, char** argv) {
+BlinkFuzzerTestSupport::BlinkFuzzerTestSupport(int argc,
+                                               base::span<char*> argv) {
   // Note: we don't tear anything down here after an iteration of the fuzzer
   // is complete, this is for efficiency. We rerun the fuzzer with the same
   // environment as the previous iteration.
diff --git a/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.h b/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.h
index 1318c3baefda9..347bfb6f040a8 100644
--- a/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.h
+++ b/third_party/blink/renderer/platform/testing/blink_fuzzer_test_support.h
@@ -8,6 +8,7 @@
 #include <memory>
 
 #include "base/at_exit.h"
+#include "base/containers/span.h"
 #include "third_party/blink/renderer/platform/wtf/allocator/allocator.h"
 #include "v8/include/v8-forward.h"
 
@@ -27,7 +28,7 @@ class BlinkFuzzerTestSupport {
   BlinkFuzzerTestSupport();
 
   // Use this constructor in LLVMFuzzerInitialize only if argv is necessary.
-  BlinkFuzzerTestSupport(int argc, char** argv);
+  BlinkFuzzerTestSupport(int argc, base::span<char*> argv);
   ~BlinkFuzzerTestSupport();
 
  private:
diff --git a/third_party/blink/renderer/platform/testing/blink_perf_test_suite.cc b/third_party/blink/renderer/platform/testing/blink_perf_test_suite.cc
index 03e7338bfd3d2..6ec650c5822e7 100644
--- a/third_party/blink/renderer/platform/testing/blink_perf_test_suite.cc
+++ b/third_party/blink/renderer/platform/testing/blink_perf_test_suite.cc
@@ -5,6 +5,7 @@
 #include "third_party/blink/renderer/platform/testing/blink_perf_test_suite.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/debug/debugger.h"
 #include "base/files/file_path.h"
 #include "base/path_service.h"
@@ -18,7 +19,7 @@
 
 namespace blink {
 
-BlinkPerfTestSuite::BlinkPerfTestSuite(int argc, char** argv)
+BlinkPerfTestSuite::BlinkPerfTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv), env(argc, argv) {}
 
 void BlinkPerfTestSuite::Initialize() {
diff --git a/third_party/blink/renderer/platform/testing/blink_perf_test_suite.h b/third_party/blink/renderer/platform/testing/blink_perf_test_suite.h
index e549e7e6867ff..2af8c08e94811 100644
--- a/third_party/blink/renderer/platform/testing/blink_perf_test_suite.h
+++ b/third_party/blink/renderer/platform/testing/blink_perf_test_suite.h
@@ -5,6 +5,7 @@
 #ifndef THIRD_PARTY_BLINK_RENDERER_PLATFORM_TESTING_BLINK_PERF_TEST_SUITE_H_
 #define THIRD_PARTY_BLINK_RENDERER_PLATFORM_TESTING_BLINK_PERF_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 #include "third_party/blink/renderer/platform/testing/testing_platform_support.h"
 
@@ -14,7 +15,7 @@ class BlinkPerfTestSuite : public base::TestSuite {
   STACK_ALLOCATED();
 
  public:
-  BlinkPerfTestSuite(int argc, char** argv);
+  BlinkPerfTestSuite(int argc, base::span<char*> argv);
 
   void Initialize() override;
   void Shutdown() override;
diff --git a/third_party/blink/renderer/platform/testing/image_decode_bench.cc b/third_party/blink/renderer/platform/testing/image_decode_bench.cc
index 82059044ac660..741c4c25d3aa8 100644
--- a/third_party/blink/renderer/platform/testing/image_decode_bench.cc
+++ b/third_party/blink/renderer/platform/testing/image_decode_bench.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/351564777): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -84,7 +86,7 @@ void DecodeImageData(SharedBuffer* data, ImageMeta* image) {
 
 }  // namespace
 
-void ImageDecodeBenchMain(int argc, char* argv[]) {
+void ImageDecodeBenchMain(int argc, base::span<char*> argv) {
   int option, iterations = 1;
 
   auto usage_exit = [&] {
@@ -140,7 +142,7 @@ void ImageDecodeBenchMain(int argc, char* argv[]) {
 
 }  // namespace blink
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::SingleThreadTaskExecutor main_task_executor;
   mojo::core::Init();
   base::CommandLine::Init(argc, argv);
diff --git a/third_party/blink/renderer/platform/testing/image_decode_to_nia.cc b/third_party/blink/renderer/platform/testing/image_decode_to_nia.cc
index dc6b5d5c6bdeb..2f2c7218d7f98 100644
--- a/third_party/blink/renderer/platform/testing/image_decode_to_nia.cc
+++ b/third_party/blink/renderer/platform/testing/image_decode_to_nia.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/351564777): Remove this and convert code to safer constructs.
 #pragma allow_unsafe_buffers
@@ -148,7 +150,7 @@ void write_nia_footer(int repetition_count, size_t frame_count) {
   fwrite(data, 1, 8, stdout);
 }
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   base::SingleThreadTaskExecutor main_task_executor;
   base::CommandLine::Init(argc, argv);
   std::unique_ptr<blink::Platform> platform =
diff --git a/third_party/blink/renderer/platform/testing/run_all_perf_tests.cc b/third_party/blink/renderer/platform/testing/run_all_perf_tests.cc
index 3c6098740702e..16e3646d525fd 100644
--- a/third_party/blink/renderer/platform/testing/run_all_perf_tests.cc
+++ b/third_party/blink/renderer/platform/testing/run_all_perf_tests.cc
@@ -2,12 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
-#include "third_party/blink/renderer/platform/testing/blink_perf_test_suite.h"
-
+#include "base/containers/span.h"
 #include "gin/array_buffer.h"
 #include "gin/public/isolate_holder.h"
+#include "third_party/blink/renderer/platform/testing/blink_perf_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   gin::IsolateHolder::Initialize(gin::IsolateHolder::kStrictMode,
                                  gin::ArrayBufferAllocator::SharedInstance());
   return blink::BlinkPerfTestSuite(argc, argv).Run();
diff --git a/third_party/blink/renderer/platform/testing/run_all_tests.cc b/third_party/blink/renderer/platform/testing/run_all_tests.cc
index 231fb8959aa22..36b2999bba8bb 100644
--- a/third_party/blink/renderer/platform/testing/run_all_tests.cc
+++ b/third_party/blink/renderer/platform/testing/run_all_tests.cc
@@ -29,6 +29,8 @@
  */
 
 #include <memory>
+
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/task_environment.h"
@@ -59,7 +61,7 @@ int runTestSuite(base::TestSuite* testSuite) {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   blink::ScopedUnittestsEnvironmentSetup testEnvironmentSetup(argc, argv);
   int result = 0;
 
diff --git a/third_party/blink/renderer/platform/testing/testing_platform_support.cc b/third_party/blink/renderer/platform/testing/testing_platform_support.cc
index afdd4c6379656..82c2dd57a35f7 100644
--- a/third_party/blink/renderer/platform/testing/testing_platform_support.cc
+++ b/third_party/blink/renderer/platform/testing/testing_platform_support.cc
@@ -35,6 +35,7 @@
 
 #include "base/base_switches.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/memory/discardable_memory_allocator.h"
 #include "base/run_loop.h"
 #include "base/test/icu_test_util.h"
@@ -297,8 +298,9 @@ base::TimeTicks TestingPlatformSupport::NowTicks() const {
   return base::TimeTicks::Now();
 }
 
-ScopedUnittestsEnvironmentSetup::ScopedUnittestsEnvironmentSetup(int argc,
-                                                                 char** argv) {
+ScopedUnittestsEnvironmentSetup::ScopedUnittestsEnvironmentSetup(
+    int argc,
+    base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   base::test::InitializeICUForTesting();
diff --git a/third_party/blink/renderer/platform/testing/testing_platform_support.h b/third_party/blink/renderer/platform/testing/testing_platform_support.h
index 49a3a83dc39f2..bdf055d6347e3 100644
--- a/third_party/blink/renderer/platform/testing/testing_platform_support.h
+++ b/third_party/blink/renderer/platform/testing/testing_platform_support.h
@@ -36,6 +36,7 @@
 
 #include "base/auto_reset.h"
 #include "base/check_op.h"
+#include "base/containers/span.h"
 #include "base/functional/callback.h"
 #include "base/memory/raw_ptr.h"
 #include "base/memory/scoped_refptr.h"
@@ -163,7 +164,7 @@ class ScopedUnittestsEnvironmentSetup final {
   STACK_ALLOCATED();
 
  public:
-  ScopedUnittestsEnvironmentSetup(int argc, char** argv);
+  ScopedUnittestsEnvironmentSetup(int argc, base::span<char*> argv);
   ScopedUnittestsEnvironmentSetup(const ScopedUnittestsEnvironmentSetup&) =
       delete;
   ScopedUnittestsEnvironmentSetup& operator=(
diff --git a/tools/aggregation_service/aggregation_service_tool_network_initializer.cc b/tools/aggregation_service/aggregation_service_tool_network_initializer.cc
index 6de1a9494d2db..c461c4a7a680c 100644
--- a/tools/aggregation_service/aggregation_service_tool_network_initializer.cc
+++ b/tools/aggregation_service/aggregation_service_tool_network_initializer.cc
@@ -5,6 +5,7 @@
 #include "tools/aggregation_service/aggregation_service_tool_network_initializer.h"
 
 #include "base/check.h"
+#include "base/containers/span.h"
 #include "content/public/browser/network_service_instance.h"
 #include "content/public/test/content_test_suite_base.h"
 #include "mojo/core/embedder/embedder.h"
@@ -18,7 +19,7 @@
 namespace aggregation_service {
 
 ToolNetworkInitializer::ToolNetworkInitializer()
-    : content::ContentTestSuiteBase(/*argc=*/0, /*argv=*/nullptr) {
+    : content::ContentTestSuiteBase(/*argc=*/0, /*argv=*/{}) {
   ContentTestSuiteBase::Initialize();
 
   // Initialize the network state as this tool runs independently from the
diff --git a/ui/accessibility/run_all_unittests.cc b/ui/accessibility/run_all_unittests.cc
index 51896c4c36379..6e18c9c00e524 100644
--- a/ui/accessibility/run_all_unittests.cc
+++ b/ui/accessibility/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
@@ -13,7 +14,8 @@ namespace {
 
 class AccessibilityTestSuite : public base::TestSuite {
  public:
-  AccessibilityTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  AccessibilityTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
  protected:
   // base::TestSuite
@@ -26,7 +28,7 @@ class AccessibilityTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   mojo::core::Init();
 
   AccessibilityTestSuite test_suite(argc, argv);
diff --git a/ui/aura/demo/demo_main.cc b/ui/aura/demo/demo_main.cc
index 09dd428b3a09e..5dd2ede385e51 100644
--- a/ui/aura/demo/demo_main.cc
+++ b/ui/aura/demo/demo_main.cc
@@ -6,6 +6,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/functional/callback.h"
 #include "base/i18n/icu_util.h"
 #include "base/memory/ptr_util.h"
@@ -247,7 +248,7 @@ int DemoMain() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   // Disabling Direct Composition works around the limitation that
diff --git a/ui/aura/test/run_all_unittests.cc b/ui/aura/test/run_all_unittests.cc
index 2f6b8f411d9b4..4da02e2e0d06f 100644
--- a/ui/aura/test/run_all_unittests.cc
+++ b/ui/aura/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
@@ -22,7 +23,8 @@ AuraTestSuite* g_test_suite = nullptr;
 
 class AuraTestSuite : public base::TestSuite {
  public:
-  AuraTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  AuraTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
   AuraTestSuite(const AuraTestSuite&) = delete;
   AuraTestSuite& operator=(const AuraTestSuite&) = delete;
@@ -67,7 +69,7 @@ EnvReinstaller::~EnvReinstaller() {
 }  // namespace test
 }  // namespace aura
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   AuraTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/ui/base/test/run_all_unittests.cc b/ui/base/test/run_all_unittests.cc
index 98e5c163c4a31..ec404d15d846c 100644
--- a/ui/base/test/run_all_unittests.cc
+++ b/ui/base/test/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
@@ -25,7 +26,7 @@ namespace {
 
 class UIBaseTestSuite : public base::TestSuite {
  public:
-  UIBaseTestSuite(int argc, char** argv);
+  UIBaseTestSuite(int argc, base::span<char*> argv);
 
   UIBaseTestSuite(const UIBaseTestSuite&) = delete;
   UIBaseTestSuite& operator=(const UIBaseTestSuite&) = delete;
@@ -36,7 +37,7 @@ class UIBaseTestSuite : public base::TestSuite {
   void Shutdown() override;
 };
 
-UIBaseTestSuite::UIBaseTestSuite(int argc, char** argv)
+UIBaseTestSuite::UIBaseTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 void UIBaseTestSuite::Initialize() {
@@ -113,7 +114,7 @@ void UIBaseTestSuite::Shutdown() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   UIBaseTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/ui/compositor/run_all_unittests.cc b/ui/compositor/run_all_unittests.cc
index 80d494db9a785..dda6f1bf1dddb 100644
--- a/ui/compositor/run_all_unittests.cc
+++ b/ui/compositor/run_all_unittests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "mojo/core/embedder/embedder.h"
 #include "ui/compositor/test/test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   ui::test::CompositorTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/ui/compositor/test/test_suite.cc b/ui/compositor/test/test_suite.cc
index 84c48150d7523..7b0b1609cd313 100644
--- a/ui/compositor/test/test_suite.cc
+++ b/ui/compositor/test/test_suite.cc
@@ -5,6 +5,7 @@
 #include "ui/compositor/test/test_suite.h"
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "ui/compositor/compositor.h"
 #include "ui/compositor/compositor_switches.h"
@@ -32,7 +33,7 @@
 namespace ui {
 namespace test {
 
-CompositorTestSuite::CompositorTestSuite(int argc, char** argv)
+CompositorTestSuite::CompositorTestSuite(int argc, base::span<char*> argv)
     : TestSuite(argc, argv) {}
 
 CompositorTestSuite::~CompositorTestSuite() {}
diff --git a/ui/compositor/test/test_suite.h b/ui/compositor/test/test_suite.h
index 91a043bc38165..9cfe1a9f28011 100644
--- a/ui/compositor/test/test_suite.h
+++ b/ui/compositor/test/test_suite.h
@@ -5,6 +5,7 @@
 #ifndef UI_COMPOSITOR_TEST_TEST_SUITE_H_
 #define UI_COMPOSITOR_TEST_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/test/test_suite.h"
 #include "build/build_config.h"
 
@@ -17,7 +18,7 @@ namespace test {
 
 class CompositorTestSuite : public base::TestSuite {
  public:
-  CompositorTestSuite(int argc, char** argv);
+  CompositorTestSuite(int argc, base::span<char*> argv);
 
   CompositorTestSuite(const CompositorTestSuite&) = delete;
   CompositorTestSuite& operator=(const CompositorTestSuite&) = delete;
diff --git a/ui/gfx/test/run_all_unittests.cc b/ui/gfx/test/run_all_unittests.cc
index 80bcbbdad4568..d390e03994204 100644
--- a/ui/gfx/test/run_all_unittests.cc
+++ b/ui/gfx/test/run_all_unittests.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
 #include "base/test/launcher/unit_test_launcher.h"
@@ -30,8 +31,8 @@ namespace {
 
 class GfxTestSuite : public base::TestSuite {
  public:
-  GfxTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {
-  }
+  GfxTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
   GfxTestSuite(const GfxTestSuite&) = delete;
   GfxTestSuite& operator=(const GfxTestSuite&) = delete;
@@ -74,7 +75,7 @@ class GfxTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   GfxTestSuite test_suite(argc, argv);
 
 #if BUILDFLAG(USE_BLINK)
diff --git a/ui/gl/test/run_all_unittests.cc b/ui/gl/test/run_all_unittests.cc
index 1dca3154fdf1f..8eace128de528 100644
--- a/ui/gl/test/run_all_unittests.cc
+++ b/ui/gl/test/run_all_unittests.cc
@@ -4,6 +4,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/task_environment.h"
@@ -24,8 +25,7 @@
 namespace {
 class GlTestSuite : public base::TestSuite {
  public:
-  GlTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {
-  }
+  GlTestSuite(int argc, base::span<char*> argv) : base::TestSuite(argc, argv) {}
 
   GlTestSuite(const GlTestSuite&) = delete;
   GlTestSuite& operator=(const GlTestSuite&) = delete;
@@ -67,7 +67,7 @@ class GlTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
 #if BUILDFLAG(IS_OZONE)
   mojo::core::Init();
 #endif
diff --git a/ui/message_center/test/run_all_unittests.cc b/ui/message_center/test/run_all_unittests.cc
index 26ef75567fb2c..220842742cdf6 100644
--- a/ui/message_center/test/run_all_unittests.cc
+++ b/ui/message_center/test/run_all_unittests.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
 #include "base/test/launcher/unit_test_launcher.h"
@@ -20,7 +21,8 @@ namespace {
 
 class MessageCenterTestSuite : public base::TestSuite {
  public:
-  MessageCenterTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  MessageCenterTestSuite(int argc, base::span<char*> argv)
+      : base::TestSuite(argc, argv) {}
 
   MessageCenterTestSuite(const MessageCenterTestSuite&) = delete;
   MessageCenterTestSuite& operator=(const MessageCenterTestSuite&) = delete;
@@ -52,7 +54,7 @@ class MessageCenterTestSuite : public base::TestSuite {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   mojo::core::Init();
 
   MessageCenterTestSuite test_suite(argc, argv);
diff --git a/ui/ozone/demo/ozone_demo.cc b/ui/ozone/demo/ozone_demo.cc
index 2893017496dd3..1a1a4705ea676 100644
--- a/ui/ozone/demo/ozone_demo.cc
+++ b/ui/ozone/demo/ozone_demo.cc
@@ -7,6 +7,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/debug/stack_trace.h"
 #include "base/functional/callback_helpers.h"
 #include "base/logging.h"
@@ -27,7 +28,7 @@
 
 const char kHelp[] = "help";
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   base::AtExitManager exit_manager;
 
diff --git a/ui/ozone/demo/skia/skia_demo.cc b/ui/ozone/demo/skia/skia_demo.cc
index 243df12e6787f..de4a852e11764 100644
--- a/ui/ozone/demo/skia/skia_demo.cc
+++ b/ui/ozone/demo/skia/skia_demo.cc
@@ -7,6 +7,7 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/debug/stack_trace.h"
 #include "base/functional/callback_helpers.h"
 #include "base/logging.h"
@@ -24,7 +25,7 @@
 #include "ui/ozone/demo/window_manager.h"
 #include "ui/ozone/public/ozone_platform.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
   base::AtExitManager exit_manager;
 
diff --git a/ui/ozone/test/ozone_integration_tests_main.cc b/ui/ozone/test/ozone_integration_tests_main.cc
index bb37781713400..1093656f45877 100644
--- a/ui/ozone/test/ozone_integration_tests_main.cc
+++ b/ui/ozone/test/ozone_integration_tests_main.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 #include "mojo/core/embedder/configuration.h"
 #include "mojo/core/embedder/embedder.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
   mojo::core::Init(mojo::core::Configuration());
 
diff --git a/ui/shell_dialogs/run_all_unittests.cc b/ui/shell_dialogs/run_all_unittests.cc
index b7534449d514d..fd3357f32bc6b 100644
--- a/ui/shell_dialogs/run_all_unittests.cc
+++ b/ui/shell_dialogs/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
 #include "base/test/launcher/unit_test_launcher.h"
@@ -19,7 +20,7 @@ namespace {
 
 class ShellDialogsTestSuite : public base::TestSuite {
  public:
-  ShellDialogsTestSuite(int argc, char** argv);
+  ShellDialogsTestSuite(int argc, base::span<char*> argv);
 
   ShellDialogsTestSuite(const ShellDialogsTestSuite&) = delete;
   ShellDialogsTestSuite& operator=(const ShellDialogsTestSuite&) = delete;
@@ -30,7 +31,7 @@ class ShellDialogsTestSuite : public base::TestSuite {
   void Shutdown() override;
 };
 
-ShellDialogsTestSuite::ShellDialogsTestSuite(int argc, char** argv)
+ShellDialogsTestSuite::ShellDialogsTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv) {}
 
 void ShellDialogsTestSuite::Initialize() {
@@ -56,7 +57,7 @@ void ShellDialogsTestSuite::Shutdown() {
 
 }  // namespace
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   ShellDialogsTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/ui/snapshot/test/run_all_unittests.cc b/ui/snapshot/test/run_all_unittests.cc
index a800cfbf24d34..10f4f34a17be5 100644
--- a/ui/snapshot/test/run_all_unittests.cc
+++ b/ui/snapshot/test/run_all_unittests.cc
@@ -2,13 +2,14 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 #include "mojo/core/embedder/embedder.h"
 #include "ui/compositor/test/test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   mojo::core::Init();
 
 #if defined(USE_AURA)
diff --git a/ui/tests/run_all_unittests.cc b/ui/tests/run_all_unittests.cc
index a811f6fcbc6ff..b31c965528948 100644
--- a/ui/tests/run_all_unittests.cc
+++ b/ui/tests/run_all_unittests.cc
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
@@ -20,7 +21,7 @@ namespace {
 
 class UITestSuite : public base::TestSuite {
  public:
-  UITestSuite(int argc, char** argv);
+  UITestSuite(int argc, base::span<char*> argv);
 
   UITestSuite(const UITestSuite&) = delete;
   UITestSuite& operator=(const UITestSuite&) = delete;
@@ -31,7 +32,8 @@ class UITestSuite : public base::TestSuite {
   void Shutdown() override;
 };
 
-UITestSuite::UITestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+UITestSuite::UITestSuite(int argc, base::span<char*> argv)
+    : base::TestSuite(argc, argv) {}
 
 void UITestSuite::Initialize() {
   base::TestSuite::Initialize();
@@ -64,7 +66,7 @@ void UITestSuite::Shutdown() {
 
 }  // namespace
 
-int main(int argc, char* argv[]) {
+int main(int argc, base::span<char*> argv) {
   UITestSuite test_suite(argc, argv);
   return base::LaunchUnitTests(
       argc, argv,
diff --git a/ui/views/examples/examples_main.cc b/ui/views/examples/examples_main.cc
index 7ea0a65dff5db..d89d155fe4378 100644
--- a/ui/views/examples/examples_main.cc
+++ b/ui/views/examples/examples_main.cc
@@ -4,10 +4,11 @@
 
 #include "base/at_exit.h"
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/test/test_timeouts.h"
 #include "ui/views/examples/examples_main_proc.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   // The use of base::test::TaskEnvironment in the following function relies on
diff --git a/ui/views/examples/examples_unittest_main.cc b/ui/views/examples/examples_unittest_main.cc
index 4b6115b074f7f..d955d4eb32e40 100644
--- a/ui/views/examples/examples_unittest_main.cc
+++ b/ui/views/examples/examples_unittest_main.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
   return base::LaunchUnitTests(
       argc, argv,
diff --git a/ui/views/examples/examples_with_content_main.cc b/ui/views/examples/examples_with_content_main.cc
index a7512da483e57..c889ce3d78370 100644
--- a/ui/views/examples/examples_with_content_main.cc
+++ b/ui/views/examples/examples_with_content_main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
@@ -65,7 +66,7 @@ int APIENTRY wWinMain(HINSTANCE instance, HINSTANCE, wchar_t*, int) {
   content::InitializeSandboxInfo(&sandbox_info);
   ui::ViewsContentClient views_content_client(instance, &sandbox_info);
 #else
-int main(int argc, const char** argv) {
+int main(int argc, base::span<const char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   ui::ColorProviderManager::Get().AppendColorProviderInitializer(
diff --git a/ui/views/run_all_unittests_main.cc b/ui/views/run_all_unittests_main.cc
index 12a160c7457b9..884b582b4e1ae 100644
--- a/ui/views/run_all_unittests_main.cc
+++ b/ui/views/run_all_unittests_main.cc
@@ -2,10 +2,11 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "mojo/core/embedder/embedder.h"
 #include "ui/views/views_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   mojo::core::Init();
   return views::ViewsTestSuite(argc, argv).RunTests();
 }
diff --git a/ui/views/views_perftests.cc b/ui/views/views_perftests.cc
index 7cbbf70e64b54..8952ef72ebbcc 100644
--- a/ui/views/views_perftests.cc
+++ b/ui/views/views_perftests.cc
@@ -2,12 +2,13 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "mojo/core/embedder/embedder.h"
 #include "ui/views/views_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   views::ViewsTestSuite test_suite(argc, argv);
   mojo::core::Init();
   return base::LaunchUnitTestsSerially(
diff --git a/ui/views/views_test_suite.cc b/ui/views/views_test_suite.cc
index e0381f405b6d1..1893a47965b98 100644
--- a/ui/views/views_test_suite.cc
+++ b/ui/views/views_test_suite.cc
@@ -5,6 +5,7 @@
 #include "ui/views/views_test_suite.h"
 
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/memory/discardable_memory_allocator.h"
 #include "base/path_service.h"
@@ -30,7 +31,7 @@
 
 namespace views {
 
-ViewsTestSuite::ViewsTestSuite(int argc, char** argv)
+ViewsTestSuite::ViewsTestSuite(int argc, base::span<char*> argv)
     : base::TestSuite(argc, argv), argc_(argc), argv_(argv) {}
 
 ViewsTestSuite::~ViewsTestSuite() = default;
diff --git a/ui/views/views_test_suite.h b/ui/views/views_test_suite.h
index 33cdad18f1542..d6d6105db7d2d 100644
--- a/ui/views/views_test_suite.h
+++ b/ui/views/views_test_suite.h
@@ -5,7 +5,9 @@
 #ifndef UI_VIEWS_VIEWS_TEST_SUITE_H_
 #define UI_VIEWS_VIEWS_TEST_SUITE_H_
 
+#include "base/containers/span.h"
 #include "base/memory/raw_ptr.h"
+#include "base/memory/raw_span.h"
 #include "base/test/test_discardable_memory_allocator.h"
 #include "base/test/test_suite.h"
 #include "build/build_config.h"
@@ -22,7 +24,7 @@ namespace views {
 
 class ViewsTestSuite : public base::TestSuite {
  public:
-  ViewsTestSuite(int argc, char** argv);
+  ViewsTestSuite(int argc, base::span<char*> argv);
 
   ViewsTestSuite(const ViewsTestSuite&) = delete;
   ViewsTestSuite& operator=(const ViewsTestSuite&) = delete;
@@ -49,7 +51,7 @@ class ViewsTestSuite : public base::TestSuite {
 #endif
 
   int argc_;
-  raw_ptr<char*> argv_;
+  base::raw_span<char*> argv_;
   base::TestDiscardableMemoryAllocator discardable_memory_allocator_;
 };
 
diff --git a/ui/views_content_client/views_content_client.cc b/ui/views_content_client/views_content_client.cc
index 89ce12ad1c957..f3c9d420aab70 100644
--- a/ui/views_content_client/views_content_client.cc
+++ b/ui/views_content_client/views_content_client.cc
@@ -6,6 +6,7 @@
 
 #include <utility>
 
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "content/public/app/content_main.h"
 #include "ui/views_content_client/views_content_main_delegate.h"
@@ -18,9 +19,8 @@ ViewsContentClient::ViewsContentClient(
     : instance_(instance), sandbox_info_(sandbox_info) {
 }
 #else
-ViewsContentClient::ViewsContentClient(int argc, const char** argv)
-    : argc_(argc), argv_(argv) {
-}
+ViewsContentClient::ViewsContentClient(int argc, base::span<const char*> argv)
+    : argc_(argc), argv_(argv) {}
 #endif
 
 ViewsContentClient::~ViewsContentClient() {
diff --git a/ui/views_content_client/views_content_client.h b/ui/views_content_client/views_content_client.h
index 923d64fd1e132..d523dfd9f0dc9 100644
--- a/ui/views_content_client/views_content_client.h
+++ b/ui/views_content_client/views_content_client.h
@@ -7,8 +7,10 @@
 
 #include <utility>
 
+#include "base/containers/span.h"
 #include "base/functional/callback.h"
 #include "base/memory/raw_ptr.h"
+#include "base/memory/raw_span.h"
 #include "build/build_config.h"
 #include "ui/gfx/native_widget_types.h"
 #include "ui/views_content_client/views_content_client_export.h"
@@ -56,7 +58,7 @@ class VIEWS_CONTENT_CLIENT_EXPORT ViewsContentClient {
   ViewsContentClient(HINSTANCE instance,
                      sandbox::SandboxInterfaceInfo* sandbox_info);
 #else
-  ViewsContentClient(int argc, const char** argv);
+  ViewsContentClient(int argc, base::span<const char*> argv);
 #endif
 
   ViewsContentClient(const ViewsContentClient&) = delete;
@@ -100,7 +102,7 @@ class VIEWS_CONTENT_CLIENT_EXPORT ViewsContentClient {
   raw_ptr<sandbox::SandboxInterfaceInfo> sandbox_info_;
 #else
   int argc_;
-  raw_ptr<const char*> argv_;
+  base::raw_span<const char*> argv_;
 #endif
   OnPreMainMessageLoopRunCallback on_pre_main_message_loop_run_callback_;
   base::OnceClosure on_resources_loaded_callback_;
diff --git a/ui/webui/examples/app/main.cc b/ui/webui/examples/app/main.cc
index 1f29286a58852..40a9f8d2c3a22 100644
--- a/ui/webui/examples/app/main.cc
+++ b/ui/webui/examples/app/main.cc
@@ -3,6 +3,7 @@
 // found in the LICENSE file.
 
 #include "base/command_line.h"
+#include "base/containers/span.h"
 #include "build/build_config.h"
 #include "content/public/app/content_main.h"
 #include "ui/webui/examples/app/main_delegate.h"
@@ -49,7 +50,7 @@ int main(int argc, const char** argv) {
   return content::ContentMain(std::move(params));
 }
 #else
-int main(int argc, const char** argv) {
+int main(int argc, base::span<const char*> argv) {
   base::CommandLine::Init(argc, argv);
 
   webui_examples::MainDelegate delegate;
diff --git a/ui/wm/test/run_all_unittests.cc b/ui/wm/test/run_all_unittests.cc
index 014f033b1786c..4a73a5e8e31df 100644
--- a/ui/wm/test/run_all_unittests.cc
+++ b/ui/wm/test/run_all_unittests.cc
@@ -5,6 +5,7 @@
 #include <memory>
 
 #include "base/compiler_specific.h"
+#include "base/containers/span.h"
 #include "base/files/file_path.h"
 #include "base/functional/bind.h"
 #include "base/path_service.h"
@@ -21,7 +22,7 @@
 
 class WMTestSuite : public base::TestSuite {
  public:
-  WMTestSuite(int argc, char** argv) : base::TestSuite(argc, argv) {}
+  WMTestSuite(int argc, base::span<char*> argv) : base::TestSuite(argc, argv) {}
 
   WMTestSuite(const WMTestSuite&) = delete;
   WMTestSuite& operator=(const WMTestSuite&) = delete;
@@ -60,7 +61,7 @@ class WMTestSuite : public base::TestSuite {
   base::TestDiscardableMemoryAllocator discardable_memory_allocator_;
 };
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   WMTestSuite test_suite(argc, argv);
 
   mojo::core::Init();
diff --git a/url/run_all_perftests.cc b/url/run_all_perftests.cc
index f11fd29ac000b..e94470c0e6d58 100644
--- a/url/run_all_perftests.cc
+++ b/url/run_all_perftests.cc
@@ -2,11 +2,12 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/perf_test_suite.h"
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::PerfTestSuite test_suite(argc, argv);
   return base::LaunchUnitTestsSerially(
       argc, argv,
diff --git a/url/run_all_unittests.cc b/url/run_all_unittests.cc
index 91f5613401e36..ce515774f79db 100644
--- a/url/run_all_unittests.cc
+++ b/url/run_all_unittests.cc
@@ -4,6 +4,7 @@
 
 #include <memory>
 
+#include "base/containers/span.h"
 #include "base/functional/bind.h"
 #include "base/test/launcher/unit_test_launcher.h"
 #include "base/test/test_io_thread.h"
@@ -14,7 +15,7 @@
 #include "mojo/core/embedder/embedder.h"  // nogncheck
 #endif
 
-int main(int argc, char** argv) {
+int main(int argc, base::span<char*> argv) {
   base::TestSuite test_suite(argc, argv);
 
 #if !BUILDFLAG(IS_IOS)
```

## Build Failure Log

```

 0.00s Error: need to run `siso login`: failed to run helper: need to run `gcert`: required key not available
real	0m0.143s
user	0m0.099s
sys	0m0.055s
ninja: Entering directory `out/linux'
init credentials failed 1.231944ms 
```
