# Build Failure Analysis: 2025_05_02_patch_979

## First error

Overlapping replacements: ./services/device/usb/usb_descriptors_unittest.cc at offset 9693, length 25: "(kDeviceDescriptor.size() * sizeof(decltype(kDeviceDescriptor)::value_type))" and offset 9699, length 0: ".data()"

## Category
Overlapping replacements between RewriteArraySizeof and AppendDataCall.

## Reason
The rewriter attempts to apply two replacements that overlap. The first replacement is generated by RewriteArraySizeof. It replaces `sizeof(kDeviceDescriptor)` with `(kDeviceDescriptor.size() * sizeof(decltype(kDeviceDescriptor)::value_type))`. The second replacement is generated by AppendDataCall. It attempts to add `.data()` to `kDeviceDescriptor` in a call to `InvokeCallback`.

## Solution
The rewriter should avoid generating overlapping replacements. In this case, either the size information should be obtained without using `sizeof` or the `.data()` call should not be added when the size is calculated using `.size()`.