# Build Failure: 2025_05_02_patch_1184

## Chromium Revision

`a3ffac36a0fd4cbdc95cd5ec879816b9634a1d56`

## Code Changes (Diff)

```diff
diff --git a/chrome/browser/custom_handlers/protocol_handler_registry_browsertest.cc b/chrome/browser/custom_handlers/protocol_handler_registry_browsertest.cc
index cb48f1f032345..28a085e7f5673 100644
--- a/chrome/browser/custom_handlers/protocol_handler_registry_browsertest.cc
+++ b/chrome/browser/custom_handlers/protocol_handler_registry_browsertest.cc
@@ -51,7 +51,7 @@ std::string EncodeUrl(const std::string& not_encoded) {
   url::RawCanonOutputT<char> encoded;
   url::EncodeURIComponent(not_encoded, &encoded);
 
-  return {encoded.data(), encoded.length()};
+  return {encoded.data().data(), encoded.length()};
 }
 
 class ProtocolHandlerChangeWaiter : public ProtocolHandlerRegistry::Observer {
diff --git a/content/browser/webauth/webauth_request_security_checker.cc b/content/browser/webauth/webauth_request_security_checker.cc
index 69ad1f9fa1106..381eae8ca4d63 100644
--- a/content/browser/webauth/webauth_request_security_checker.cc
+++ b/content/browser/webauth/webauth_request_security_checker.cc
@@ -102,7 +102,7 @@ WebAuthRequestSecurityChecker::RemoteValidation::Create(
   url::CanonicalizeHostVerbose(relying_party_id.data(),
                                url::Component(0, relying_party_id.size()),
                                &canon_output, &host_info);
-  const std::string_view canonicalized_domain(canon_output.data(),
+  const std::string_view canonicalized_domain(canon_output.data().data(),
                                               canon_output.length());
   if (host_info.family != url::CanonHostInfo::Family::NEUTRAL ||
       !net::IsCanonicalizedHostCompliant(canonicalized_domain)) {
diff --git a/third_party/blink/renderer/platform/link_hash.cc b/third_party/blink/renderer/platform/link_hash.cc
index 55a28ab518dd7..c942845e90c90 100644
--- a/third_party/blink/renderer/platform/link_hash.cc
+++ b/third_party/blink/renderer/platform/link_hash.cc
@@ -68,7 +68,7 @@ LinkHash VisitedLinkHash(const KURL& base, const AtomicString& relative) {
     return 0;
 
   return Platform::Current()->VisitedLinkHash(
-      std::string_view(buffer.data(), buffer.length()));
+      std::string_view(buffer.data().data(), buffer.length()));
 }
 
 LinkHash PartitionedVisitedLinkFingerprint(
@@ -87,7 +87,8 @@ LinkHash PartitionedVisitedLinkFingerprint(
   if (!ResolveRelative(base_link_url, relative_link_url.GetString(), &buffer)) {
     return 0;
   }
-  std::string_view link_url = std::string_view(buffer.data(), buffer.length());
+  std::string_view link_url =
+      std::string_view(buffer.data().data(), buffer.length());
 
   return Platform::Current()->PartitionedVisitedLinkFingerprint(
       link_url, top_level_site, WebSecurityOrigin(frame_origin));
diff --git a/url/url_canon.h b/url/url_canon.h
index 99e5ef40de5fd..0c3848fbd56fb 100644
--- a/url/url_canon.h
+++ b/url/url_canon.h
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "base/containers/span.h"
+
 #ifdef UNSAFE_BUFFERS_BUILD
 // TODO(crbug.com/350788890): Remove this and spanify to fix the errors.
 #pragma allow_unsafe_buffers
@@ -89,7 +91,7 @@ class CanonOutputT {
   // be NULL-terminated. Call length() to get the
   // length.
   const T* data() const { return buffer_; }
-  T* data() { return buffer_; }
+  base::span<T> data() { return buffer_; }
 
   // Shortens the URL to the new length. Used for "backing up" when processing
   // relative paths. This can also be used if an external function writes a lot
diff --git a/url/url_canon_unittest.cc b/url/url_canon_unittest.cc
index 364fa6fc6adb8..b500d0bd913fa 100644
--- a/url/url_canon_unittest.cc
+++ b/url/url_canon_unittest.cc
@@ -3023,33 +3023,33 @@ TEST_F(URLCanonTest, IDNToASCII) {
   // Basic ASCII test.
   std::u16string str = u"hello";
   EXPECT_TRUE(IDNToASCII(str, &output));
-  EXPECT_EQ(u"hello", std::u16string(output.data()));
+  EXPECT_EQ(u"hello", std::u16string(output.data().data()));
   output.set_length(0);
 
   // Mixed ASCII/non-ASCII.
   str = u"hellö";
   EXPECT_TRUE(IDNToASCII(str, &output));
-  EXPECT_EQ(u"xn--hell-8qa", std::u16string(output.data()));
+  EXPECT_EQ(u"xn--hell-8qa", std::u16string(output.data().data()));
   output.set_length(0);
 
   // All non-ASCII.
   str = u"你好";
   EXPECT_TRUE(IDNToASCII(str, &output));
-  EXPECT_EQ(u"xn--6qq79v", std::u16string(output.data()));
+  EXPECT_EQ(u"xn--6qq79v", std::u16string(output.data().data()));
   output.set_length(0);
 
   // Characters that need mapping (the resulting Punycode is the encoding for
   // "1⁄4").
   str = u"¼";
   EXPECT_TRUE(IDNToASCII(str, &output));
-  EXPECT_EQ(u"xn--14-c6t", std::u16string(output.data()));
+  EXPECT_EQ(u"xn--14-c6t", std::u16string(output.data().data()));
   output.set_length(0);
 
   // String to encode already starts with "xn--", and all ASCII. Should not
   // modify the string.
   str = u"xn--hell-8qa";
   EXPECT_TRUE(IDNToASCII(str, &output));
-  EXPECT_EQ(u"xn--hell-8qa", std::u16string(output.data()));
+  EXPECT_EQ(u"xn--hell-8qa", std::u16string(output.data().data()));
   output.set_length(0);
 
   // String to encode already starts with "xn--", and mixed ASCII/non-ASCII.
diff --git a/url/url_idna_icu.cc b/url/url_idna_icu.cc
index 049b58ebf4d45..9487deeaccc91 100644
--- a/url/url_idna_icu.cc
+++ b/url/url_idna_icu.cc
@@ -90,7 +90,7 @@ bool IDNToASCII(std::u16string_view src, CanonOutputW* output) {
     UIDNAInfo info = UIDNA_INFO_INITIALIZER;
     int output_length = uidna_nameToASCII(
         uidna, src.data(), base::checked_cast<int32_t>(src.size()),
-        output->data(), output->capacity(), &info, &err);
+        output->data().data(), output->capacity(), &info, &err);
 
     // Ignore various errors for web compatibility. The options are specified
     // by the WHATWG URL Standard. See
diff --git a/url/url_util_unittest.cc b/url/url_util_unittest.cc
index 69d58e81785af..0711f46c29782 100644
--- a/url/url_util_unittest.cc
+++ b/url/url_util_unittest.cc
@@ -320,21 +320,21 @@ TEST_F(URLUtilTest, DecodeURLEscapeSequences) {
     DecodeURLEscapeSequences(decode_case.input,
                              DecodeURLMode::kUTF8OrIsomorphic, &output);
     EXPECT_EQ(decode_case.output, base::UTF16ToUTF8(std::u16string(
-                                      output.data(), output.length())));
+                                      output.data().data(), output.length())));
 
     RawCanonOutputT<char16_t> output_utf8;
     DecodeURLEscapeSequences(decode_case.input, DecodeURLMode::kUTF8,
                              &output_utf8);
     EXPECT_EQ(decode_case.output,
-              base::UTF16ToUTF8(
-                  std::u16string(output_utf8.data(), output_utf8.length())));
+              base::UTF16ToUTF8(std::u16string(output_utf8.data().data(),
+                                               output_utf8.length())));
   }
 
   // Our decode should decode %00
   const char zero_input[] = "%00";
   RawCanonOutputT<char16_t> zero_output;
   DecodeURLEscapeSequences(zero_input, DecodeURLMode::kUTF8, &zero_output);
-  EXPECT_NE("%00", base::UTF16ToUTF8(std::u16string(zero_output.data(),
+  EXPECT_NE("%00", base::UTF16ToUTF8(std::u16string(zero_output.data().data(),
                                                     zero_output.length())));
 
   // Test the error behavior for invalid UTF-8.
@@ -360,13 +360,13 @@ TEST_F(URLUtilTest, DecodeURLEscapeSequences) {
     DecodeURLEscapeSequences(utf8_decode_case.input,
                              DecodeURLMode::kUTF8OrIsomorphic, &output_iso);
     EXPECT_EQ(std::u16string(utf8_decode_case.expected_iso.data()),
-              std::u16string(output_iso.data(), output_iso.length()));
+              std::u16string(output_iso.data().data(), output_iso.length()));
 
     RawCanonOutputT<char16_t> output_utf8;
     DecodeURLEscapeSequences(utf8_decode_case.input, DecodeURLMode::kUTF8,
                              &output_utf8);
     EXPECT_EQ(std::u16string(utf8_decode_case.expected_utf8.data()),
-              std::u16string(output_utf8.data(), output_utf8.length()));
+              std::u16string(output_utf8.data().data(), output_utf8.length()));
   }
 }
 
@@ -397,7 +397,7 @@ TEST_F(URLUtilTest, TestEncodeURIComponent) {
   for (const auto& encode_case : encode_cases) {
     RawCanonOutputT<char> buffer;
     EncodeURIComponent(encode_case.input, &buffer);
-    std::string output(buffer.data(), buffer.length());
+    std::string output(buffer.data().data(), buffer.length());
     EXPECT_EQ(encode_case.output, output);
   }
 }
```

## Build Failure Log

```

1m01.05s Build Failure: 1 done 1 failed 50161 remaining - 0.02/s
 1 steps failed: exit=1
see ./out/linux/siso_output for full command line and output
 or ./out/linux/siso.INFO
use ./out/linux/siso_failed_commands.sh to re-run failed commands
real	1m1.350s
user	2m56.845s
sys	1m31.911s
ninja: Entering directory `out/linux'
init credentials done 52.602805ms
reapi instance: projects/rbe-chrome-untrusted/instances/default_instance
loading fs state done 1.089382934s
loading/recompacting deps log done 1.645055412s
load siso config done 119.317391ms
load build.ninja done 1.146967306s
schedule pending:0+ready:1 (node:324309 edge:2)
build start: Ready 1 Pending 1
rebuild manifest finished	
schedule pending:0+ready:1 (node:324309 edge:9)
schedule pending:79392+ready:9263 (node:324309 edge:88660)
 1.43s schedule pending:109791+ready:13477 (node:324309 edge:123268)
build start: Ready 13477 Pending 109791
FAILED: bb4881ac-7c0d-4930-a831-f8d8916652e9 "./obj/url/url/url_canon_host.o" CXX obj/url/url/url_canon_host.o
err: exit=1
../../third_party/llvm-build/Release+Asserts/bin/clang++ -MMD -MF obj/url/url/url_canon_host.o.d -DIS_URL_IMPL -DDCHECK_ALWAYS_ON=1 -DUSE_UDEV -DUSE_AURA=1 -DUSE_GLIB=1 -DUSE_OZONE=1 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_GNU_SOURCE -DCR_CLANG_REVISION=\"llvmorg-21-init-9266-g09006611-2\" -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0 -DCR_LIBCXX_REVISION=f034fd5662d033c281ab6a9b45164066ddd18809 -DCR_SYSROOT_KEY=20250129T203412Z-1 -DNDEBUG -DNVALGRIND -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DGLIB_VERSION_MAX_ALLOWED=GLIB_VERSION_2_56 -DGLIB_VERSION_MIN_REQUIRED=GLIB_VERSION_2_56 -DU_USING_ICU_NAMESPACE=0 -DU_ENABLE_DYLOAD=0 -DUSE_CHROMIUM_ICU=1 -DU_ENABLE_TRACING=1 -DU_ENABLE_RESOURCE_TRACING=0 -DU_STATIC_IMPLEMENTATION -DICU_UTIL_DATA_IMPL=ICU_UTIL_DATA_FILE -I../.. -Igen -I../../buildtools/third_party/libc++ -I../../third_party/perfetto/include -Igen/third_party/perfetto/build_config -Igen/third_party/perfetto -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/protobuf/src -I../../third_party/ced/src -I../../third_party/icu/source/common -I../../third_party/icu/source/i18n -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi -Wunreachable-code-aggressive -Wthread-safety -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return -Wno-nontrivial-memcall -Wshadow -Werror -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-strict-aliasing -fstack-protector -funwind-tables -fPIC -pthread -fcolor-diagnostics -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../../tools/clang/crashreports -mllvm -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -Wa,--crel,--allow-experimental-crel -fextend-variable-liveness=none -fcomplete-member-pointers -m64 -msse3 -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=. -no-canonical-prefixes -Xclang --warning-suppression-mappings=../../build/config/warning_suppression.txt -ftrivial-auto-var-init=pattern -O2 -fdata-sections -ffunction-sections -fno-unique-section-names -fno-math-errno -fno-omit-frame-pointer -g0 -fvisibility=hidden -Wheader-hygiene -Wstring-conversion -Wtautological-overlap-compare -Wexit-time-destructors -isystem../../build/linux/debian_bullseye_amd64-sysroot/usr/include/glib-2.0 -isystem../../build/linux/debian_bullseye_amd64-sysroot/usr/lib/x86_64-linux-gnu/glib-2.0/include -Wno-invalid-offsetof -Wenum-compare-conditional -Wno-nullability-completeness -std=c++20 -Wno-trigraphs -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystem../../third_party/libc++/src/include -isystem../../third_party/libc++abi/src/include --sysroot=../../build/linux/debian_bullseye_amd64-sysroot -fvisibility-inlines-hidden  -c ../../url/url_canon_host.cc -o obj/url/url/url_canon_host.o
build step: cxx "./obj/url/url/url_canon_host.o"
siso_rule: clang/cxx
stderr:
../../url/url_canon_host.cc:342:5: error: no matching function for call to 'AppendInvalidNarrowString'
  342 |     AppendInvalidNarrowString(wide_output.data(), 0, wide_output.length(),
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~
../../url/url_canon_internal.h:462:6: note: candidate function not viable: no known conversion from 'base::span<char16_t>' to 'const char *' for 1st argument
  462 | void AppendInvalidNarrowString(const char* spec,
      |      ^                         ~~~~~~~~~~~~~~~~
../../url/url_canon_internal.h:466:6: note: candidate function not viable: no known conversion from 'base::span<char16_t>' to 'const char16_t *' for 1st argument
  466 | void AppendInvalidNarrowString(const char16_t* spec,
      |      ^                         ~~~~~~~~~~~~~~~~~~~~
../../url/url_canon_host.cc:409:5: error: no matching function for call to 'AppendInvalidNarrowString'
  409 |     AppendInvalidNarrowString(utf8.data(), 0, utf8.length(), output);
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~
../../url/url_canon_internal.h:462:6: note: candidate function not viable: no known conversion from 'base::span<char>' to 'const char *' for 1st argument
  462 | void AppendInvalidNarrowString(const char* spec,
      |      ^                         ~~~~~~~~~~~~~~~~
../../url/url_canon_internal.h:466:6: note: candidate function not viable: no known conversion from 'base::span<char>' to 'const char16_t *' for 1st argument
  466 | void AppendInvalidNarrowString(const char16_t* spec,
      |      ^                         ~~~~~~~~~~~~~~~~~~~~
../../url/url_canon_host.cc:562:7: error: no matching function for call to 'CanonicalizeIPAddress'
  562 |       CanonicalizeIPAddress(output.data(),
      |       ^~~~~~~~~~~~~~~~~~~~~
../../url/url_canon.h:586:6: note: candidate function not viable: no known conversion from 'base::span<char>' to 'const char *' for 1st argument
  586 | void CanonicalizeIPAddress(const char* spec,
      |      ^                     ~~~~~~~~~~~~~~~~
../../url/url_canon.h:591:6: note: candidate function not viable: no known conversion from 'base::span<char>' to 'const char16_t *' for 1st argument
  591 | void CanonicalizeIPAddress(const char16_t* spec,
      |      ^                     ~~~~~~~~~~~~~~~~~~~~
../../url/url_canon_host.cc:567:7: error: no matching function for call to 'CanonicalizeIPv6Address'
  567 |       CanonicalizeIPv6Address(output.data(),
      |       ^~~~~~~~~~~~~~~~~~~~~~~
../../url/url_canon.h:598:6: note: candidate function not viable: no known conversion from 'base::span<char>' to 'const char *' for 1st argument
  598 | void CanonicalizeIPv6Address(const char* spec,
      |      ^                       ~~~~~~~~~~~~~~~~
../../url/url_canon.h:604:6: note: candidate function not viable: no known conversion from 'base::span<char>' to 'const char16_t *' for 1st argument
  604 | void CanonicalizeIPv6Address(const char16_t* spec,
      |      ^                       ~~~~~~~~~~~~~~~~~~~~
../../url/url_canon.h:94:33: error: no viable conversion from returned value of type 'char *' to function return type 'base::span<char>'
   94 |   base::span<T> data() { return buffer_; }
      |                                 ^~~~~~~
../../url/url_canon_host.cc:562:36: note: in instantiation of member function 'url::CanonOutputT<char>::data' requested here
  562 |       CanonicalizeIPAddress(output.data(),
      |                                    ^
../../url/url_canon_host.cc:611:3: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoHost<char, unsigned char, url::CanonMode::kSpecialURL>' requested here
  611 |   DoHost<char, unsigned char, CanonMode::kSpecialURL>(spec, host, output,
      |   ^
../../base/containers/span.h:1031:13: note: candidate constructor not viable: no known conversion from 'char *' to 'const span<char> &' for 1st argument
 1031 |   constexpr span(const span& other) noexcept = default;
      |             ^    ~~~~~~~~~~~~~~~~~
../../base/containers/span.h:1041:13: note: candidate constructor not viable: no known conversion from 'char *' to 'span<char> &&' for 1st argument
 1041 |   constexpr span(span&& other) noexcept = default;
      |             ^    ~~~~~~~~~~~~
../../base/containers/span.h:997:13: note: candidate template ignored: could not match 'std::type_identity_t<element_type>[N]' (aka 'char[N]') against 'char *'
  997 |   constexpr span(
      |             ^
../../base/containers/span.h:1006:13: note: candidate template ignored: constraints not satisfied [with R = char *&]
 1006 |   constexpr span(R&& range LIFETIME_BOUND)
      |             ^
../../base/containers/span.h:1004:14: note: because 'internal::CompatibleRange<element_type, char *&>' evaluated to false
 1004 |     requires(internal::CompatibleRange<element_type, R>)
      |              ^
../../base/containers/span.h:359:5: note: because 'char *&' does not satisfy 'contiguous_range'
  359 |     std::ranges::contiguous_range<R> && std::ranges::sized_range<R> &&
      |     ^
../../third_party/libc++/src/include/__ranges/concepts.h:115:28: note: because 'char *&' does not satisfy 'random_access_range'
  115 | concept contiguous_range = random_access_range<_Tp> && contiguous_iterator<iterator_t<_Tp>> && requires(_Tp& __t) {
      |                            ^
../../third_party/libc++/src/include/__ranges/concepts.h:112:31: note: because 'char *&' does not satisfy 'bidirectional_range'
  112 | concept random_access_range = bidirectional_range<_Tp> && random_access_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:109:31: note: because 'char *&' does not satisfy 'forward_range'
  109 | concept bidirectional_range = forward_range<_Tp> && bidirectional_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:106:25: note: because 'char *&' does not satisfy 'input_range'
  106 | concept forward_range = input_range<_Tp> && forward_iterator<iterator_t<_Tp>>;
      |                         ^
../../third_party/libc++/src/include/__ranges/concepts.h:53:23: note: because 'char *&' does not satisfy 'range'
   53 | concept input_range = range<_Tp> && input_iterator<iterator_t<_Tp>>;
      |                       ^
../../third_party/libc++/src/include/__ranges/concepts.h:48:3: note: because 'ranges::begin(__t)' would be invalid: call to deleted function call operator in type 'const __begin::__fn'
   48 |   ranges::begin(__t); // sometimes equality-preserving
      |   ^
../../base/containers/span.h:1016:13: note: candidate template ignored: constraints not satisfied [with R = char *&]
 1016 |   constexpr span(R&& range)
      |             ^
../../base/containers/span.h:1013:14: note: because 'internal::CompatibleRange<element_type, char *&>' evaluated to false
 1013 |     requires(internal::CompatibleRange<element_type, R> &&
      |              ^
../../base/containers/span.h:359:5: note: because 'char *&' does not satisfy 'contiguous_range'
  359 |     std::ranges::contiguous_range<R> && std::ranges::sized_range<R> &&
      |     ^
../../third_party/libc++/src/include/__ranges/concepts.h:115:28: note: because 'char *&' does not satisfy 'random_access_range'
  115 | concept contiguous_range = random_access_range<_Tp> && contiguous_iterator<iterator_t<_Tp>> && requires(_Tp& __t) {
      |                            ^
../../third_party/libc++/src/include/__ranges/concepts.h:112:31: note: because 'char *&' does not satisfy 'bidirectional_range'
  112 | concept random_access_range = bidirectional_range<_Tp> && random_access_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:109:31: note: because 'char *&' does not satisfy 'forward_range'
  109 | concept bidirectional_range = forward_range<_Tp> && bidirectional_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:106:25: note: because 'char *&' does not satisfy 'input_range'
  106 | concept forward_range = input_range<_Tp> && forward_iterator<iterator_t<_Tp>>;
      |                         ^
../../third_party/libc++/src/include/__ranges/concepts.h:53:23: note: because 'char *&' does not satisfy 'range'
   53 | concept input_range = range<_Tp> && input_iterator<iterator_t<_Tp>>;
      |                       ^
../../third_party/libc++/src/include/__ranges/concepts.h:48:3: note: because 'ranges::begin(__t)' would be invalid: call to deleted function call operator in type 'const __begin::__fn'
   48 |   ranges::begin(__t); // sometimes equality-preserving
      |   ^
../../base/containers/span.h:1037:13: note: candidate template ignored: could not match 'span<OtherElementType, OtherExtent, OtherInternalPtrType>' against 'char *'
 1037 |   constexpr span(
      |             ^
../../base/containers/span.h:1024:13: note: candidate constructor not viable: constraints not satisfied
 1024 |   constexpr span(std::initializer_list<value_type> il LIFETIME_BOUND)
      |             ^
../../base/containers/span.h:1025:14: note: because 'std::is_const_v<element_type>' evaluated to false
 1025 |     requires(std::is_const_v<element_type>)
      |              ^
../../url/url_canon_host.cc:416:10: error: no matching function for call to 'DoIDNHost'
  416 |   return DoIDNHost<canon_mode>(utf16.data(), utf16.length(), output) &&
      |          ^~~~~~~~~~~~~~~~~~~~~
../../url/url_canon_host.cc:467:12: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoComplexHost<url::CanonMode::kFileURL>' requested here
  467 |     return DoComplexHost<canon_mode>(&spec[host.begin],
      |            ^
../../url/url_canon_host.cc:548:15: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoHostSubstring<char, unsigned char, url::CanonMode::kFileURL>' requested here
  548 |     success = DoHostSubstring<CHAR, UCHAR, canon_mode>(spec, host, &output);
      |               ^
../../url/url_canon_host.cc:633:3: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoHost<char, unsigned char, url::CanonMode::kFileURL>' requested here
  633 |   DoHost<char, unsigned char, CanonMode::kFileURL>(spec, host, output,
      |   ^
../../url/url_canon_host.cc:300:6: note: candidate function template not viable: no known conversion from 'base::span<char16_t>' to 'const char16_t *' for 1st argument
  300 | bool DoIDNHost(const char16_t* src, size_t src_len, CanonOutput* output) {
      |      ^         ~~~~~~~~~~~~~~~~~~~
In file included from ../../url/url_canon_host.cc:11:
../../url/url_canon.h:94:33: error: no viable conversion from returned value of type 'char16_t *' to function return type 'base::span<char16_t>'
   94 |   base::span<T> data() { return buffer_; }
      |                                 ^~~~~~~
../../url/url_canon_host.cc:416:38: note: in instantiation of member function 'url::CanonOutputT<char16_t>::data' requested here
  416 |   return DoIDNHost<canon_mode>(utf16.data(), utf16.length(), output) &&
      |                                      ^
../../url/url_canon_host.cc:467:12: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoComplexHost<url::CanonMode::kFileURL>' requested here
  467 |     return DoComplexHost<canon_mode>(&spec[host.begin],
      |            ^
../../url/url_canon_host.cc:548:15: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoHostSubstring<char, unsigned char, url::CanonMode::kFileURL>' requested here
  548 |     success = DoHostSubstring<CHAR, UCHAR, canon_mode>(spec, host, &output);
      |               ^
../../url/url_canon_host.cc:633:3: note: in instantiation of function template specialization 'url::(anonymous namespace)::DoHost<char, unsigned char, url::CanonMode::kFileURL>' requested here
  633 |   DoHost<char, unsigned char, CanonMode::kFileURL>(spec, host, output,
      |   ^
../../base/containers/span.h:1031:13: note: candidate constructor not viable: no known conversion from 'char16_t *' to 'const span<char16_t> &' for 1st argument
 1031 |   constexpr span(const span& other) noexcept = default;
      |             ^    ~~~~~~~~~~~~~~~~~
../../base/containers/span.h:1041:13: note: candidate constructor not viable: no known conversion from 'char16_t *' to 'span<char16_t> &&' for 1st argument
 1041 |   constexpr span(span&& other) noexcept = default;
      |             ^    ~~~~~~~~~~~~
../../base/containers/span.h:997:13: note: candidate template ignored: could not match 'std::type_identity_t<element_type>[N]' (aka 'char16_t[N]') against 'char16_t *'
  997 |   constexpr span(
      |             ^
../../base/containers/span.h:1006:13: note: candidate template ignored: constraints not satisfied [with R = char16_t *&]
 1006 |   constexpr span(R&& range LIFETIME_BOUND)
      |             ^
../../base/containers/span.h:1004:14: note: because 'internal::CompatibleRange<element_type, char16_t *&>' evaluated to false
 1004 |     requires(internal::CompatibleRange<element_type, R>)
      |              ^
../../base/containers/span.h:359:5: note: because 'char16_t *&' does not satisfy 'contiguous_range'
  359 |     std::ranges::contiguous_range<R> && std::ranges::sized_range<R> &&
      |     ^
../../third_party/libc++/src/include/__ranges/concepts.h:115:28: note: because 'char16_t *&' does not satisfy 'random_access_range'
  115 | concept contiguous_range = random_access_range<_Tp> && contiguous_iterator<iterator_t<_Tp>> && requires(_Tp& __t) {
      |                            ^
../../third_party/libc++/src/include/__ranges/concepts.h:112:31: note: because 'char16_t *&' does not satisfy 'bidirectional_range'
  112 | concept random_access_range = bidirectional_range<_Tp> && random_access_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:109:31: note: because 'char16_t *&' does not satisfy 'forward_range'
  109 | concept bidirectional_range = forward_range<_Tp> && bidirectional_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:106:25: note: because 'char16_t *&' does not satisfy 'input_range'
  106 | concept forward_range = input_range<_Tp> && forward_iterator<iterator_t<_Tp>>;
      |                         ^
../../third_party/libc++/src/include/__ranges/concepts.h:53:23: note: because 'char16_t *&' does not satisfy 'range'
   53 | concept input_range = range<_Tp> && input_iterator<iterator_t<_Tp>>;
      |                       ^
../../third_party/libc++/src/include/__ranges/concepts.h:48:3: note: because 'ranges::begin(__t)' would be invalid: call to deleted function call operator in type 'const __begin::__fn'
   48 |   ranges::begin(__t); // sometimes equality-preserving
      |   ^
../../base/containers/span.h:1016:13: note: candidate template ignored: constraints not satisfied [with R = char16_t *&]
 1016 |   constexpr span(R&& range)
      |             ^
../../base/containers/span.h:1013:14: note: because 'internal::CompatibleRange<element_type, char16_t *&>' evaluated to false
 1013 |     requires(internal::CompatibleRange<element_type, R> &&
      |              ^
../../base/containers/span.h:359:5: note: because 'char16_t *&' does not satisfy 'contiguous_range'
  359 |     std::ranges::contiguous_range<R> && std::ranges::sized_range<R> &&
      |     ^
../../third_party/libc++/src/include/__ranges/concepts.h:115:28: note: because 'char16_t *&' does not satisfy 'random_access_range'
  115 | concept contiguous_range = random_access_range<_Tp> && contiguous_iterator<iterator_t<_Tp>> && requires(_Tp& __t) {
      |                            ^
../../third_party/libc++/src/include/__ranges/concepts.h:112:31: note: because 'char16_t *&' does not satisfy 'bidirectional_range'
  112 | concept random_access_range = bidirectional_range<_Tp> && random_access_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:109:31: note: because 'char16_t *&' does not satisfy 'forward_range'
  109 | concept bidirectional_range = forward_range<_Tp> && bidirectional_iterator<iterator_t<_Tp>>;
      |                               ^
../../third_party/libc++/src/include/__ranges/concepts.h:106:25: note: because 'char16_t *&' does not satisfy 'input_range'
  106 | concept forward_range = input_range<_Tp> && forward_iterator<iterator_t<_Tp>>;
      |                         ^
../../third_party/libc++/src/include/__ranges/concepts.h:53:23: note: because 'char16_t *&' does not satisfy 'range'
   53 | concept input_range = range<_Tp> && input_iterator<iterator_t<_Tp>>;
      |                       ^
../../third_party/libc++/src/include/__ranges/concepts.h:48:3: note: because 'ranges::begin(__t)' would be invalid: call to deleted function call operator in type 'const __begin::__fn'
   48 |   ranges::begin(__t); // sometimes equality-preserving
      |   ^
../../base/containers/span.h:1037:13: note: candidate template ignored: could not match 'span<OtherElementType, OtherExtent, OtherInternalPtrType>' against 'char16_t *'
 1037 |   constexpr span(
      |             ^
../../base/containers/span.h:1024:13: note: candidate constructor not viable: constraints not satisfied
 1024 |   constexpr span(std::initializer_list<value_type> il LIFETIME_BOUND)
      |             ^
../../base/containers/span.h:1025:14: note: because 'std::is_const_v<element_type>' evaluated to false
 1025 |     requires(std::is_const_v<element_type>)
      |              ^
7 errors generated.
[1/50162] 1m00.13s F CXX obj/net/net_unittests/mock_quic_data.o
[1/50162] 1m00.13s F CXX obj/remoting/protocol/protocol/chromium_port_allocator_factory.o
[1/50162] 1m00.13s F CXX obj/net/net/quic_session_attempt.o
[1/50162] 1m00.13s F CXX obj/remoting/base/base/url_loader_network_service_observer.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/mojom/oblivious_http_request.mojom.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/mojom_ip_address/host_resolver_endpoint_result.mojom.o
[1/50162] 1m00.13s F CXX obj/services/device/geolocation/geolocation/geolocation_provider_impl.o
[1/50162] 1m00.13s F CXX obj/components/sessions/shared/tab_restore_service_helper.o
[1/50162] 1m00.13s F CXX obj/components/infobars/core/core/infobar_manager.o
[1/50162] 1m00.13s F CXX obj/components/trusted_vault/trusted_vault/standalone_trusted_vault_backend.o
[1/50162] 1m00.13s F CXX obj/remoting/base/base/telemetry_log_writer.o
[1/50162] 1m00.13s F CXX obj/components/webapps/common/mojo_bindings/web_page_metadata_agent.mojom.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/mojom/reporting_api_endpoint_mojom_traits.o
[1/50162] 1m00.13s F CXX obj/components/safety_check/safety_check/update_check_helper.o
[1/50162] 1m00.13s F CXX obj/services/device/geolocation/geolocation/network_location_provider.o
[1/50162] 1m00.13s F CXX obj/net/test_support/request_handler_util.o
[1/50162] 1m00.13s F CXX obj/remoting/host/mojom/mojom/webrtc_types.mojom.o
[1/50162] 1m00.13s F CXX obj/media/filters/filters/blocking_url_protocol.o
[1/50162] 1m00.13s F CXX obj/net/net/pac_file_decider.o
[1/50162] 1m00.13s F CXX obj/remoting/signaling/signaling/ftl_messaging_client.o
[1/50162] 1m00.13s F CXX obj/services/device/geolocation/geolocation/public_ip_address_geolocation_provider.o
[1/50162] 1m00.13s F CXX obj/media/mojo/clients/clients/mojo_codec_factory.o
[1/50162] 1m00.13s F CXX obj/services/audio/audio/log_adapter.o
[1/50162] 1m00.13s F CXX obj/net/net/quic_session_pool.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/cookie_craving_unittest.o
[1/50162] 1m00.13s F CXX obj/services/proxy_resolver/public/mojom/mojom/proxy_resolver.mojom.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/url_loader_base/parsed_request_cookie.mojom.o
[1/50162] 1m00.13s F CXX obj/components/sessions/shared/base_session_service_commands.o
[1/50162] 1m00.13s F CXX obj/net/net/reporting_cache.o
[1/50162] 1m00.13s F CXX obj/media/mojo/mojom/mojom/renderer_extensions.mojom.o
[1/50162] 1m00.13s F CXX obj/media/muxers/unit_tests/mp4_muxer_delegate_unittest.o
[1/50162] 1m00.13s F CXX obj/net/net/proxy_bypass_rules.o
[1/50162] 1m00.13s F CXX obj/chrome/browser/new_tab_page/modules/file_suggestion/mojo_bindings/drive_suggestion.mojom.o
[1/50162] 1m00.13s F CXX obj/services/audio/public/mojom/mojom/audio_device_description.mojom.o
[1/50162] 1m00.13s F CXX obj/ui/base/ime/ime/text_input_client.o
[1/50162] 1m00.13s F CXX obj/components/web_package/test_support/test_support/mock_web_bundle_parser.o
[1/50162] 1m00.13s F CXX obj/media/learning/impl/unit_tests/distribution_reporter_unittest.o
[1/50162] 1m00.13s F CXX obj/media/filters/unit_tests/hls_media_player_tag_recorder_unittest.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/url_loader_base/client_security_state.mojom.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/session_challenge_param_unittest.o
[1/50162] 1m00.13s F CXX obj/remoting/host/mojom/mojom/remote_url_opener.mojom.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/cookies_mojom/cookie_access_observer.mojom.o
[1/50162] 1m00.13s F CXX obj/remoting/base/base/url_request_context_getter.o
[1/50162] 1m00.13s F CXX obj/media/gpu/test/video_player/decoder_wrapper.o
[1/50162] 1m00.13s F CXX obj/media/formats/unit_tests/common_playlist_unittest.o
[1/50162] 1m00.13s F CXX obj/components/autofill/core/common/common/log_message.o
[1/50162] 1m00.13s F CXX obj/ui/ozone/platform/wayland/wayland/wayland_menu_utils.o
[1/50162] 1m00.13s F CXX obj/media/mojo/services/services/webrtc_video_perf_recorder.o
[1/50162] 1m00.13s F CXX obj/media/base/base/content_decryption_module.o
[1/50162] 1m00.13s F CXX obj/media/base/base/cdm_initialized_promise.o
[1/50162] 1m00.13s F CXX obj/services/audio/audio/stream_factory.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/socket_watcher_unittest.o
[1/50162] 1m00.13s F CXX obj/net/net/http_auth_multi_round_parse.o
[1/50162] 1m00.13s F CXX obj/media/mojo/clients/clients/mojo_renderer.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/url_loader_base/early_hints.mojom.o
[1/50162] 1m00.13s F CXX obj/net/net/websocket_handshake_response_info.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/ip_address_util_unittest.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/storage_access_status_cache_unittest.o
[1/50162] 1m00.13s F CXX obj/chrome/updater/updater_test_sources/request_matcher.o
[1/50162] 1m00.13s F CXX obj/components/ip_protection/common/ip_protection_proxy_delegate/ip_protection_proxy_delegate.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/quic_socket_data_provider_unittest.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/first_party_sets_cache_filter_unittest.o
[1/50162] 1m00.13s F CXX obj/services/network/public/cpp/cpp/x_frame_options_parser.o
[1/50162] 1m00.13s F CXX obj/google_apis/google_apis/gaia_access_token_fetcher.o
[1/50162] 1m00.13s F CXX obj/services/metrics/public/cpp/metrics_cpp/delegating_ukm_recorder.o
[1/50162] 1m00.13s F CXX obj/net/net/site_for_cookies.o
[1/50162] 1m00.13s F CXX obj/gpu/ipc/client/ipc_client_sources/gpu_channel_host.o
[1/50162] 1m00.13s F CXX obj/components/security_state/core/core/security_state.o
[1/50162] 1m00.13s F CXX obj/media/mojo/mojom/encryption_pattern/encryption_pattern_mojom_traits.o
[1/50162] 1m00.13s F CXX obj/services/network/public/cpp/proxy_config_mojom_support/proxy_config_with_annotation_mojom_traits.o
[1/50162] 1m00.13s F CXX obj/media/base/base/cdm_session_tracker.o
[1/50162] 1m00.13s F CXX obj/media/video/video/openh264_video_encoder.o
[1/50162] 1m00.13s F CXX obj/net/net/network_binding_client_socket_factory.o
[1/50162] 1m00.13s F CXX obj/components/commerce/core/mojom/mojo_bindings/product_specifications.mojom.o
[1/50162] 1m00.13s F CXX obj/media/formats/unit_tests/mp4_stream_parser_unittest.o
[1/50162] 1m00.13s F CXX obj/media/mojo/services/unit_tests/cdm_service_broker_unittest.o
[1/50162] 1m00.13s F CXX obj/components/web_package/web_package/web_bundle_utils.o
[1/50162] 1m00.13s F CXX obj/media/mojo/mojom/mojom/supported_audio_decoder_config_mojom_traits.o
[1/50162] 1m00.13s F CXX obj/gpu/ipc/service/service/shared_image_stub.o
[1/50162] 1m00.13s F CXX obj/media/mojo/mojom/web_speech_recognition/speech_recognition_grammar.mojom.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/quic_session_key_unittest.o
[1/50162] 1m00.13s F CXX obj/media/mojo/clients/clients/mojo_gpu_video_accelerator_factories.o
[1/50162] 1m00.13s F CXX obj/chrome/updater/updater_test_sources/external_constants_builder_unittest.o
[1/50162] 1m00.13s f CXX obj/components/update_client/update_client/command_line_config_policy.o
[1/50162] 1m00.13s F CXX obj/services/network/public/mojom/mojom/restricted_udp_socket.mojom.o
[1/50162] 1m00.13s F CXX obj/net/net_unittests/bidirectional_stream_unittest.o
[1/50162] 1m00.13s F CXX obj/net/net/url_request.o
[1/50162] 1m00.13s F CXX obj/net/net/http_proxy_connect_job.o
[1/50162] 1m00.13s F CXX obj/net/net/client_socket_handle.o
[1/50162] 1m00.13s F CXX obj/components/policy/core/common/internal/machine_level_user_cloud_policy_manager.o
[1/50162] 1m00.13s F CXX obj/net/net/tcp_server_socket.o
[1/50162] 1m00.13s F CXX obj/components/cast_streaming/renderer/frame/frame/frame_injecting_demuxer.o
[1/50162] 1m00.13s F CXX obj/media/base/base/media_resource.o
[1/50162] 1m00.13s F CXX obj/chrome/browser/webauthn/test_support/fake_recovery_key_store.o
[1/50162] 1m00.13s F CXX obj/components/policy/core/common/internal/dmserver_job_configurations.o
[1/50162] 1m00.13s F CXX obj/cc/cc/debug_rect_history.o
[1/50162] 1m00.13s F CXX obj/net/net/polling_proxy_config_service.o
[1/50162] 1m00.13s F CXX obj/components/webapps/services/web_app_origin_association/public/mojom/mojom/web_app_origin_association_parser.mojom.o
[1/50162] 1m00.13s F CXX obj/components/server_certificate_database/unit_tests/server_certificate_database_unittest.o
[1/50162] 1m00.13s f CXX obj/net/dns/public/public/util.o
[1/50162] 1m00.14s F CXX obj/ui/base/base/os_exchange_data.o
[1/50162] 1m00.14s F CXX obj/components/update_client/update_client/command_line_config_policy.o
[1/50162] 1m00.14s F CXX obj/services/network/public/mojom/mojom/network_quality_estimator_manager.mojom.o
[1/50162] 1m00.14s F CXX obj/media/formats/formats/playlist.o
[1/50162] 1m00.14s F CXX obj/net/dns/public/public/util.o
[1/50162] 1m00.14s F CXX obj/services/network/public/mojom/mojom/network_context_client.mojom.o
[1/50162] 1m00.14s F CXX obj/components/ip_protection/common/ip_protection_core_host_remote/ip_protection_core_host_remote.o
build failed	
local:1 remote:0 cache:0 fallback:0 retry:0 skip:73106
reapi: ops: 1100(err:1085) / r:0(err:0) 0B / w:0(err:0) 0B
fs: ops: 177150(err:68200) / r:10378(err:0) 123.28MiB / w:0(err:0) 0B
```
