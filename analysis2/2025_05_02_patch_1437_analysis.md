# Build Failure Analysis: 2025_05_02_patch_1437

## First error

```
Overlapping replacements: ./media/formats/mp4/aac_unittest.cc at offset 4891, length 14: "(buffer.size() * sizeof(decltype(buffer)::value_type))" and offset 4897, length 0: ".data()"
```

## Category
Overlapping replacements between RewriteArraySizeof and AppendDataCall.

## Reason
The rewriter is attempting to apply two replacements that overlap in the same region of the code. First replacement is `(buffer.size() * sizeof(decltype(buffer)::value_type))` which is generated by the `RewriteArraySizeof`. The second replacement is `.data()` which is generated by `AppendDataCall`. The `data.assign` call requires the `.data()` because data.assign takes raw pointer as input.

## Solution
The rewriter should avoid overlapping replacements. It needs to check that the replacements do not overlap before applying them. In this specific case the rewriter can check the ranges and discard the `.data()` call, since we already know the `data.assign` takes the size of the buffer. The rewriter needs to account for when `RewriteArraySizeof` overlaps with `AppendDataCall`.

## Note
There are overlapping replacements between `RewriteArraySizeof` and `AppendDataCall`.