{
    "nodes": [
        {
            "id": 0,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::605:::7:::base::raw_span",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 1,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::285:::5:::base::span<int>",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 2,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::391:::4:::base::span<int>",
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 3,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::501:::4:::base::span<int>",
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 4,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::527:::6:::",
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 5,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::812:::5:::base::span<int>",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 6,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::823:::0:::<empty>",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 7,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::994:::7:::",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 8,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::695:::5:::base::span<int>",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 9,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::1145:::7:::",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        },
        {
            "id": 10,
            "replacement": "r:::tools/clang/spanify/tests/initializers-original.cc:::1159:::7:::",
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            }
        }
    ],
    "links": [
        {
            "source": 0,
            "target": 1
        },
        {
            "source": 1,
            "target": 7
        },
        {
            "source": 1,
            "target": 5
        },
        {
            "source": 2,
            "target": 0
        },
        {
            "source": 3,
            "target": 0
        },
        {
            "source": 4,
            "target": 0
        },
        {
            "source": 5,
            "target": 6
        },
        {
            "source": 8,
            "target": 9
        },
        {
            "source": 8,
            "target": 10
        }
    ],
    "source": {
        "content": "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n#include <vector>\n\n#include \"base/memory/raw_ptr.h\"\n\nclass A {\n public:\n  // Expected rewrite:\n  // A(base::span<int> ptr): member(ptr){}\n  A(int* ptr) : member(ptr) {}\n\n  // Expecte rewrite:\n  // int* advanceAndGet() { return member++.data(); }\n  int* advanceAndGet() { return member++; }\n\n  // Expected rewrite:\n  // int* get() { return member.data(); }\n  int* get() { return member.get(); }\n\n private:\n  // Expecte rewrite:\n  // base::raw_span<int> member;\n  raw_ptr<int> member;\n};\n\nstruct B {\n  // Expected rewrite:\n  // base::span<int> member;\n  int* member;\n  std::size_t size;\n};\n\nvoid fct() {\n  // Expected rewrite:\n  // base::span<int> buf = new int[1024];\n  int* buf = new int[1024];\n\n  bool condition = true;\n  std::vector<int> buf2 = {1, 2, 3};\n  // Expected rewrite:\n  // A obj((condition) ? buf : buf2);\n  A obj((condition) ? buf : buf2.data());\n\n  std::vector<int> buf3 = {4, 5, 6};\n  // Expected rewrite:\n  // B obj2{(condition) ? buf3 : buf2, buf3.size()};\n  B obj2{(condition) ? buf3.data() : buf2.data(), 2};\n  // Leads member to be marked as a buffer.\n  obj2.member[1] = 3;\n}\n",
        "file_path": "tools/clang/spanify/tests/initializers-original.cc",
        "rev": "733eff2098bf2f25b1cf0c182a3ee8beda9ef880"
    },
    "sources": [
        {
            "content": null,
            "file_path": "tools/clang/spanify/tests/initializers-original.cc"
        }
    ]
}