{
    "nodes": [
        {
            "id": 0,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::562:::7:::base::raw_span",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::562:::7:::base::raw_span",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/memory/raw_span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 1,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::193:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::193:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 2,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::807:::4:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::807:::4:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 3,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::841:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::841:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 4,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::988:::11:::base::span<const int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::988:::11:::base::span<const int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 5,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::911:::4:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::911:::4:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 6,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1010:::6:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1010:::6:::",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "dependent"
            ]
        },
        {
            "id": 7,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1135:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1135:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 8,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::855:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::855:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 9,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1144:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1144:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 10,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1253:::11:::base::span<const int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1253:::11:::base::span<const int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 11,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1300:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1300:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 12,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1473:::11:::base::span<const int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1473:::11:::base::span<const int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 13,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1496:::6:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1496:::6:::",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "dependent"
            ]
        },
        {
            "id": 14,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1578:::17:::const base::span<const int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1578:::17:::const base::span<const int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 15,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1678:::12:::base::span<const int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1678:::12:::base::span<const int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 16,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1779:::18:::const base::span<const int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1779:::18:::const base::span<const int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 17,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1952:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1952:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 18,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1963:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::1963:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 19,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2048:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2048:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 20,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2359:::7:::base::raw_span",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2359:::7:::base::raw_span",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/memory/raw_span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 21,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2172:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2172:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 22,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2200:::4:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2200:::4:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 23,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2445:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::2445:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 24,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::501:::4:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::501:::4:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 25,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::532:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::532:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 26,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::546:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::546:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": false,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 27,
            "replacement": "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::220:::4:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::220:::4:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/raw-ptr-fields-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        }
    ],
    "links": [
        {
            "source": 0,
            "target": 1
        },
        {
            "source": 1,
            "target": 17
        },
        {
            "source": 2,
            "target": 3
        },
        {
            "source": 2,
            "target": 24
        },
        {
            "source": 3,
            "target": 7
        },
        {
            "source": 3,
            "target": 25
        },
        {
            "source": 4,
            "target": 0
        },
        {
            "source": 4,
            "target": 2
        },
        {
            "source": 5,
            "target": 27
        },
        {
            "source": 5,
            "target": 0
        },
        {
            "source": 6,
            "target": 0
        },
        {
            "source": 8,
            "target": 9
        },
        {
            "source": 8,
            "target": 11
        },
        {
            "source": 8,
            "target": 26
        },
        {
            "source": 10,
            "target": 2
        },
        {
            "source": 12,
            "target": 0
        },
        {
            "source": 13,
            "target": 0
        },
        {
            "source": 14,
            "target": 12
        },
        {
            "source": 15,
            "target": 14
        },
        {
            "source": 16,
            "target": 15
        },
        {
            "source": 17,
            "target": 18
        },
        {
            "source": 19,
            "target": 5
        },
        {
            "source": 20,
            "target": 21
        },
        {
            "source": 21,
            "target": 23
        },
        {
            "source": 22,
            "target": 20
        },
        {
            "source": 24,
            "target": 2
        },
        {
            "source": 25,
            "target": 3
        },
        {
            "source": 26,
            "target": 8
        },
        {
            "source": 27,
            "target": 5
        }
    ],
    "source": {
        "content": "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n#include \"base/memory/raw_ptr.h\"\n\nstruct S {\n  S(int* ptr) : ptr_(ptr) {}\n  int* get();\n  // TODO: Currently return type is rewritten to: const base::span<int>\n  // Expected rewrite:\n  // static inline base::span<const int>\n  // SetWrapperInInlineStorage(base::span<int> isolate, int* object);\n  template <bool entered_context = true>\n  static inline const int* SetWrapperInInlineStorage(int* isolate, int* object);\n  raw_ptr<int> ptr_;\n};\n\n// TODO: Currently return type is rewritten to: const base::span<int>\n// Expected rewrite:\n// base::span<const int> SetWrapperInInlineStorage(base::span<int> isolate, int*\n// object);\ntemplate <bool entered_context>\nconst int* S::SetWrapperInInlineStorage(int* isolate, int* object) {\n  (void)isolate[0];\n  return isolate;\n}\n\nint* S::get() {\n  // Expected rewrite:\n  // const int* temp = ptr_.data();\n  const int* temp = ptr_.get();\n  // Expected rewrite:\n  // temp = SetWrapperInInlineStorage({}, nullptr).data();\n  temp = SetWrapperInInlineStorage(nullptr, nullptr);\n\n  // Expected rewrite:\n  // base::span<const int> ptr = SetWrapperInInlineStorage({}, nullptr);\n  const int* ptr = SetWrapperInInlineStorage({}, nullptr);\n  // Leads ptr to be rewritten, and thus SetWrapperInInlineStorage return type.\n  (void)ptr[0];\n\n  // Expected rewrite:\n  // base::span<const int> temp2 = ptr_;\n  const int* temp2 = ptr_.get();\n\n  // Expected rewrite:\n  // const base::span<const int> temp3 = temp2;\n  const int* const temp3 = temp2;\n\n  // Expected rewrite:\n  // base::span<const int> temp4 = temp3;\n  const auto* temp4 = temp3;\n\n  // Expected rewrite:\n  // const base::span<const int> temp5 = temp4;\n  const auto* const temp5 = temp4;\n  // Leads temp5 to be rewritten.\n  (void)temp5[0];\n\n  return ptr_;\n}\n\nchar fct() {\n  // Expected rewrite:\n  // base::span<int> var = {};\n  int* var = nullptr;\n  S obj(var);\n  // Expected rewrite:\n  // base::span<int> v2 = obj.get();\n  int* v2 = obj.get();\n  return v2[0];\n}\n\nstruct S2 {\n  // Expected rewrite:\n  // S2(base::span<int> ptr) : ptr_(ptr) {}\n  S2(int* ptr) : ptr_(ptr) {}\n\n  int* get_and_advance() {\n    // Expected rewrite:\n    // return ptr_++.data();\n    return ptr_++;\n  }\n\n  // Expected rewrite:\n  // base::raw_span<int> ptr_;\n  raw_ptr<int> ptr_;\n};\n\nvoid fct2() {\n  // Expected rewrite:\n  // S2 obj({});\n  S2 obj(nullptr);\n}\n",
        "file_path": "tools/clang/spanify/tests/raw-ptr-fields-original.cc",
        "rev": "733eff2098bf2f25b1cf0c182a3ee8beda9ef880"
    },
    "sources": [
        {
            "content": null,
            "file_path": "tools/clang/spanify/tests/raw-ptr-fields-original.cc"
        }
    ]
}