{
    "nodes": [
        {
            "id": 0,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::279:::2:::base::span<T>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::279:::2:::base::span<T>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 1,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::338:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::338:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 2,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::533:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::533:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 3,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::751:::7:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::751:::7:::",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 4,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::607:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::607:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": []
        },
        {
            "id": 5,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::810:::7:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::810:::7:::",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 6,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::681:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::681:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 7,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1127:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1127:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 8,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::967:::7:::base::raw_span",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::967:::7:::base::raw_span",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/memory/raw_span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 9,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1309:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1309:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 10,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1447:::5:::base::span<int>",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1447:::5:::base::span<int>",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "source"
            ]
        },
        {
            "id": 11,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1576:::7:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1576:::7:::",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 12,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1590:::7:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1590:::7:::",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 13,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::543:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::543:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 14,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::617:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::617:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 15,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::691:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::691:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 16,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::985:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::985:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 17,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1137:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1137:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 18,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1193:::6:::",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1193:::6:::",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": null,
            "visited": false,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "dependent"
            ]
        },
        {
            "id": 19,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1319:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1319:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        },
        {
            "id": 20,
            "replacement": "r:::tools/clang/spanify/tests/assignment-original.cc:::1457:::7:::{}",
            "replacements": [
                "r:::tools/clang/spanify/tests/assignment-original.cc:::1457:::7:::{}",
                "include-user-header:::tools/clang/spanify/tests/assignment-original.cc:::-1:::-1:::base/containers/span.h"
            ],
            "size_info_available": true,
            "visited": true,
            "debug_info": {
                "rewrite_applied": true,
                "original_is_buffer": false,
                "original_size_info_available": null
            },
            "node_types": [
                "sink"
            ]
        }
    ],
    "links": [
        {
            "source": 0,
            "target": 1
        },
        {
            "source": 2,
            "target": 3
        },
        {
            "source": 2,
            "target": 13
        },
        {
            "source": 4,
            "target": 5
        },
        {
            "source": 4,
            "target": 14
        },
        {
            "source": 4,
            "target": 2
        },
        {
            "source": 6,
            "target": 4
        },
        {
            "source": 6,
            "target": 15
        },
        {
            "source": 7,
            "target": 8
        },
        {
            "source": 7,
            "target": 17
        },
        {
            "source": 8,
            "target": 6
        },
        {
            "source": 8,
            "target": 16
        },
        {
            "source": 9,
            "target": 19
        },
        {
            "source": 9,
            "target": 0
        },
        {
            "source": 10,
            "target": 11
        },
        {
            "source": 10,
            "target": 20
        },
        {
            "source": 10,
            "target": 12
        },
        {
            "source": 18,
            "target": 8
        }
    ],
    "source": {
        "content": "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n#include <array>\n#include <vector>\n\n#include \"base/memory/raw_ptr.h\"\n\n// Expected rewrite:\n// base::span<T> get()\ntemplate <typename T>\nT* get() {\n  // Expected rewrite:\n  // return {};\n  return nullptr;\n}\n\nvoid fct() {\n  int index = 1;\n  int value = 11;\n  std::vector<int> ctn1 = {1, 2, 3, 4};\n  std::array<int, 3> ctn2 = {5, 6, 7};\n\n  // Expected rewrite:\n  // base::span<int> aa = {};\n  int* aa = nullptr;\n  // Expected rewrite:\n  // base::span<int> bb = {};\n  int* bb = nullptr;\n  // Expected rewrite:\n  // base::span<int> cc = {};\n  int* cc = nullptr;\n\n  // Expected rewrite:\n  // aa = ctn1;\n  aa = ctn1.data();\n  // Expected rewrite:\n  // bb = ctn2;\n  bb = ctn2.data();\n\n  bb = aa;\n  cc = bb;\n\n  cc[index] = value;  // Buffer usage, leads c to be rewritten.\n\n  // Expected rewrite:\n  // base::raw_span<int> dd = {};\n  raw_ptr<int> dd = nullptr;\n\n  dd = cc;\n\n  dd[index] = value;  // Buffer usage, leads d to be rewritten.\n\n  // Expected rewrite:\n  // base::span<int> ee = {};\n  int* ee = nullptr;\n\n  // Expected rewrite:\n  // ee = dd;\n  ee = dd.get();\n\n  ee++;  // Buffer usage, leads e to be rewritten.\n\n  // Expected rewrite:\n  // base::span<int> ff = {};\n  int* ff = nullptr;\n\n  ff = get<int>();\n\n  ++ff;  // Leads to ff being rewritten.\n\n  // Exptected rewrite:\n  // base::span<int> gg = {};\n  int* gg = nullptr;\n  bool condition = true;\n  // Expected rewrite:\n  // gg = (condition) ? ctn1 : ctn2;\n  gg = (condition) ? ctn1.data() : ctn2.data();\n\n  gg += 1;  // Buffer usage, leads gg to be rewritten.\n}\n",
        "file_path": "tools/clang/spanify/tests/assignment-original.cc",
        "rev": "733eff2098bf2f25b1cf0c182a3ee8beda9ef880"
    },
    "sources": [
        {
            "content": null,
            "file_path": "tools/clang/spanify/tests/assignment-original.cc"
        }
    ]
}